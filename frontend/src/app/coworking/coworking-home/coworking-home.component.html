<div class="coworking-reservations-grid">
  <ng-container *ngIf="status$ | async as status">
    <ng-container
      *ngIf="openOperatingHours$ | async as openOperatingHours; else closed">
      <coworking-operating-hours-panel
        [operatingHours]="status.operating_hours"
        [openOperatingHours]="openOperatingHours" />

      <ng-container
        *ngIf="activeReservation$ | async as activeReservation; else dropin">
        <coworking-reservation-card
          (updateActiveReservation)="setActiveReservation()"
          (reloadCoworkingHome)="ngOnInit()"
          [reservation]="activeReservation"></coworking-reservation-card>
      </ng-container>

      <ng-template #dropin>
        <div class="dropin-card-container">
          <coworking-dropin-availability-card
            [seat_availability]="status.seat_availability"
            (seatsSelected)="reserve($event)" />
        </div>
      </ng-template>
    </ng-container>

    <ng-template #closed>
      <coworking-operating-hours-panel
        [operatingHours]="status.operating_hours" />
    </ng-template>
  </ng-container>

  <mat-card appearance="outlined">
    <mat-action-list>
      <ng-container>
        <mat-list-item (click)="navigateToNewReservation()">
          <h3 matListItemTitle>{{ ' Room Reservations' }}</h3>
          <p matListItemLine>
            {{ 'Click here to make a new room reservations!' }}
          </p>
          <h3 matListItemMeta>&rsaquo;</h3>
        </mat-list-item>
      </ng-container>
    </mat-action-list>
  </mat-card>

  <div class="upcoming-card-container">
    <!-- Show upcoming room reservations -->
    <ng-container *ngIf="upcomingRoomReservations$ | async as upcomingReservations">
      <div *ngIf="upcomingReservations.length > 0">
        <div class="reservations-header">
          <h2 class="heading">Upcoming Reservations</h2>
        </div>
        <div class="upcoming-reservations-container">
          <ng-container *ngFor="let r of upcomingReservations">
            <ng-container *ngIf="r?.room?.id">
              <coworking-reservation-card
                [reservation]="r"
                (updateReservationsList)="handleUpdateReservationsList()">
              </coworking-reservation-card>
            </ng-container>
          </ng-container>
        </div>
      </div>
    </ng-container>
  </div>
</div>