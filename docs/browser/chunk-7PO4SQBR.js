import{a as je,b as jt,c as Be,d as Bt,e as qt,f as Ht,g as Gt,h as $t}from"./chunk-FOSHG4FT.js";import{a as I}from"./chunk-XWVSSOUL.js";import{a as Vt}from"./chunk-X5YZFMYX.js";import{a as re}from"./chunk-2NPHYAK5.js";import{a as he}from"./chunk-3NBKQ2M3.js";import{$d as U,$e as ne,Ac as ee,Ae as Tt,Ba as nt,Ca as at,Cc as te,Cd as w,Da as l,Dc as ie,Dd as gt,Df as A,Ea as n,Ec as _t,Ed as vt,Ef as Ot,Fa as r,Fc as Ct,Fd as H,Fe as It,Ff as Nt,Ga as p,Gd as y,Ge as Ne,Hb as dt,He as Rt,Ib as V,Id as G,Ie as kt,Jd as $,Je as E,Ka as J,Kb as pt,L as ke,La as K,Lb as Re,Na as x,Nd as bt,O as D,P as C,Pa as v,Pb as ut,Pf as Ft,Q as g,Qd as St,Ra as b,W,Wd as L,We as Fe,Xe as Ve,Ya as N,Ye as Dt,a as it,ab as m,ae as xt,af as ae,b as ot,bb as Ae,bc as j,bf as me,cb as Ie,de as Mt,df as se,ea as c,eb as Pe,ec as M,ef as ce,fb as mt,fc as B,gb as st,gf as le,hb as ct,hc as Ke,he as oe,hf as de,ia as d,ib as lt,ie as wt,jf as pe,ke as yt,kf as ue,la as S,lc as Q,ma as De,mf as fe,nc as _,nf as At,o as rt,qa as h,qb as ze,qc as q,rb as Je,rc as X,ub as F,uc as f,vc as ft,wa as Ee,wc as Y,xc as Oe,xe as Et,ya as Te,yc as ht,ye as T,yf as Pt,zc as Z}from"./chunk-KVV3I3RP.js";var Lt=(()=>{let e=class e{constructor(a,o,s){this.gearService=a,this.dialog=o,this.router=s}ngOnInit(){this.gearService.showAdminGearByPermissionCheck("academics.*","*","","academics/admin/section")}};e.Route={path:"",title:"Academics",component:e,canActivate:[]},e.\u0275fac=function(o){return new(o||e)(d(Ot),d(St),d(M))},e.\u0275cmp=S({type:e,selectors:[["app-academics-home"]],standalone:!1,decls:20,vars:0,consts:[["mat-flat-button","","color","primary","routerLink","/academics/offerings",1,"link-button"],["mat-stroked-button","","routerLink","/academics/catalog",1,"link-button"]],template:function(o,s){o&1&&(n(0,"mat-pane")(1,"mat-card-header")(2,"mat-card-title"),m(3," Computer Science Courses at UNC "),r()(),n(4,"mat-card-content")(5,"p"),m(6," The UNC Department of Computer Science offers numerous courses for students to explore various aspects of computer science. "),r(),n(7,"p"),m(8," View all COMP couses in the "),n(9,"i"),m(10,"Course Catalog"),r(),m(11,", or view course offerings by terms in "),n(12,"i"),m(13,"Section Offerings"),r(),m(14," page! "),r()(),n(15,"mat-card-actions")(16,"button",0),m(17," Section Offerings "),r(),n(18,"button",1),m(19," Course Catalog "),r()()())},dependencies:[B,G,y,$,H,w,E],styles:[".link-button[_ngcontent-%COMP%]{margin-left:8px;margin-top:14px;margin-bottom:14px}"]});let t=e;return t})();var Ut=(()=>{let e=class e{constructor(a){this.profileService=a,this.links=[{label:"Sections",path:"/academics/admin/section",icon:"event_seat"},{label:"Courses",path:"/academics/admin/course",icon:"jamboard_kiosk"},{label:"Rooms",path:"/academics/admin/room",icon:"meeting_room"},{label:"Terms",path:"/academics/admin/term",icon:"calendar_month"}],this.profile$=a.profile$}};e.\u0275fac=function(o){return new(o||e)(d(kt))},e.\u0275cmp=S({type:e,selectors:[["app-academics-admin"]],standalone:!1,decls:1,vars:1,consts:[[3,"links"]],template:function(o,s){o&1&&p(0,"tab-container",0),o&2&&l("links",s.links)},dependencies:[Nt],encapsulation:2});let t=e;return t})();function Xt(t,e){if(t&1){let i=x();n(0,"th",8)(1,"div",9),m(2," Terms "),n(3,"button",10),v("click",function(){C(i);let o=b(2);return g(o.createTerm())}),m(4,"Create"),r()()()}}function Yt(t,e){if(t&1){let i=x();n(0,"td",11)(1,"div",12),v("click",function(){let o=C(i).$implicit,s=b(2);return g(s.updateTerm(o))}),n(2,"p"),m(3),r(),n(4,"div",13)(5,"button",10),v("click",function(o){let s=C(i).$implicit,u=b(2);return g(u.deleteTerm(s,o))}),m(6," Delete "),r()()()()}if(t&2){let i=e.$implicit;c(3),Ie(" ",i.name," ")}}function Zt(t,e){t&1&&p(0,"tr",14)}function ei(t,e){t&1&&p(0,"tr",15)}function ti(t,e){if(t&1&&(n(0,"div",0)(1,"div",1)(2,"table",2),J(3,3),h(4,Xt,5,0,"th",4)(5,Yt,7,1,"td",5),K(),h(6,Zt,1,0,"tr",6)(7,ei,1,0,"tr",7),r()()()),t&2){let i=b();c(2),l("dataSource",i.terms()),c(4),l("matHeaderRowDef",i.displayedColumns),c(),l("matRowDefColumns",i.displayedColumns)}}var be=class be{constructor(e,i,a){this.router=e,this.snackBar=i,this.academicsService=a,this.terms=W([]),this.displayedColumns=["name"],a.getTerms().subscribe(o=>{this.terms.set(o)})}createTerm(){this.router.navigate(["academics","term","edit","new"])}updateTerm(e){this.router.navigate(["academics","term","edit",e.id])}deleteTerm(e,i){i.stopPropagation(),this.snackBar.open("Are you sure you want to delete this term?","Delete").onAction().subscribe(()=>{this.academicsService.deleteTerm(e).subscribe(()=>{this.terms.update(o=>[...o.filter(u=>u.id!==e.id)]),this.snackBar.open("This term has been deleted.","",{duration:2e3})})})}};be.Route={path:"term",component:be,title:"Term Administration",canActivate:[he("academics.term","*")]},be.\u0275fac=function(i){return new(i||be)(d(M),d(T),d(I))},be.\u0275cmp=S({type:be,selectors:[["app-admin-term"]],standalone:!1,decls:3,vars:1,consts:[[1,"content"],[1,"table-responsive"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],[1,"header"],["mat-stroked-button","",3,"click"],["mat-cell",""],[1,"row",3,"click"],["clas","modify-buttons"],["mat-header-row",""],["mat-row",""]],template:function(i,a){i&1&&(n(0,"mat-pane")(1,"mat-card-content"),Ee(2,ti,8,3,"div",0),r()()),i&2&&(c(2),Te(a.terms()?2:-1))},dependencies:[y,w,ne,me,de,se,ae,pe,ce,le,ue,fe,E],styles:[".mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{border-color:#fff}.header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;justify-content:space-between;align-items:center}.modify-buttons[_ngcontent-%COMP%]{margin-left:auto}#edit-button[_ngcontent-%COMP%]{margin-right:8px}  .mat-mdc-card-outlined{max-width:100%!important;margin-right:32px!important}"]});var qe=be;function ii(t,e){if(t&1){let i=x();n(0,"th",8)(1,"div",9),m(2," Courses "),n(3,"button",10),v("click",function(){C(i);let o=b(2);return g(o.createCourse())}),m(4," Create "),r()()()}}function oi(t,e){if(t&1){let i=x();n(0,"td",11)(1,"div",12),v("click",function(){let o=C(i).$implicit,s=b(2);return g(s.updateCourse(o))}),n(2,"p"),m(3),r(),n(4,"div",13)(5,"button",10),v("click",function(o){let s=C(i).$implicit,u=b(2);return g(u.deleteCourse(s,o))}),m(6," Delete "),r()()()()}if(t&2){let i=e.$implicit;c(3),Pe(" ",i.subject_code,"",i.number,": ",i.title," ")}}function ri(t,e){t&1&&p(0,"tr",14)}function ni(t,e){t&1&&p(0,"tr",15)}function ai(t,e){if(t&1&&(n(0,"div",0)(1,"div",1)(2,"table",2),J(3,3),h(4,ii,5,0,"th",4)(5,oi,7,3,"td",5),K(),h(6,ri,1,0,"tr",6)(7,ni,1,0,"tr",7),r()()()),t&2){let i=b();c(2),l("dataSource",i.courses()),c(4),l("matHeaderRowDef",i.displayedColumns),c(),l("matRowDefColumns",i.displayedColumns)}}var Se=class Se{constructor(e,i,a){this.router=e,this.snackBar=i,this.academicsService=a,this.courses=W([]),this.displayedColumns=["name"],a.getCourses().subscribe(o=>this.courses.set(o))}createCourse(){this.router.navigate(["academics","course","edit","new"])}updateCourse(e){this.router.navigate(["academics","course","edit",e.id])}deleteCourse(e,i){i.stopPropagation(),this.snackBar.open("Are you sure you want to delete this course?","Delete").onAction().subscribe(()=>{this.academicsService.deleteCourse(e).subscribe({next:()=>{this.courses.update(o=>[...o.filter(u=>u.id!==e.id)]),this.snackBar.open("This course has been deleted.","",{duration:2e3})},error:()=>{this.snackBar.open("Delete failed. Make sure to remove all sections for this course first.","",{duration:2e3})}})})}};Se.Route={path:"course",component:Se,title:"Course Administration",canActivate:[he("academics.course","*")]},Se.\u0275fac=function(i){return new(i||Se)(d(M),d(T),d(I))},Se.\u0275cmp=S({type:Se,selectors:[["app-admin-course"]],standalone:!1,decls:3,vars:1,consts:[[1,"content"],[1,"table-responsive"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],[1,"header"],["mat-stroked-button","",3,"click"],["mat-cell",""],[1,"row",3,"click"],["clas","modify-buttons"],["mat-header-row",""],["mat-row",""]],template:function(i,a){i&1&&(n(0,"mat-pane")(1,"mat-card-content"),Ee(2,ai,8,3,"div",0),r()()),i&2&&(c(2),Te(a.courses()?2:-1))},dependencies:[y,w,ne,me,de,se,ae,pe,ce,le,ue,fe,E],styles:[".mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{border-color:#fff}.header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;justify-content:space-between;align-items:center}.modify-buttons[_ngcontent-%COMP%]{margin-left:auto}#edit-button[_ngcontent-%COMP%]{margin-right:8px}  .mat-mdc-card-outlined{max-width:100%!important;margin-right:32px!important}"]});var He=Se;var si=(t,e)=>e.id;function ci(t,e){if(t&1&&(n(0,"mat-option",15),m(1),r()),t&2){let i=e.$implicit;l("value",i.id),c(),Ae(i.name)}}function li(t,e){if(t&1){let i=x();n(0,"th",10)(1,"div",11),m(2," Sections "),n(3,"div",12)(4,"mat-form-field",13)(5,"mat-label"),m(6,"Select Term"),r(),n(7,"mat-select",14),lt("ngModelChange",function(o){C(i);let s=b(2);return ct(s.displayTermId,o)||(s.displayTermId=o),g(o)}),v("selectionChange",function(){C(i);let o=b(2);return g(o.resetSections())}),nt(8,ci,2,2,"mat-option",15,si),r()(),n(10,"button",16),v("click",function(){C(i);let o=b(2);return g(o.createSection())}),m(11," Create "),r()()()()}if(t&2){let i=b(2);c(7),st("ngModel",i.displayTermId),c(),at(i.terms)}}function di(t,e){if(t&1){let i=x();n(0,"td",17)(1,"div",18),v("click",function(){let o=C(i).$implicit,s=b(2);return g(s.updateSection(o))}),n(2,"p"),m(3),r(),n(4,"div",19)(5,"button",16),v("click",function(o){let s=C(i).$implicit,u=b(2);return g(u.deleteSection(s,o))}),m(6," Delete "),r()()()()}if(t&2){let i=e.$implicit;c(3),mt(" ",i.subject_code," ",i.course_number," - ",i.section_number,": ",i.title," ")}}function pi(t,e){t&1&&p(0,"tr",20)}function ui(t,e){t&1&&p(0,"tr",21)}function fi(t,e){if(t&1&&(n(0,"div",2)(1,"div",3)(2,"table",4),J(3,5),h(4,li,12,1,"th",6)(5,di,7,4,"td",7),K(),h(6,pi,1,0,"tr",8)(7,ui,1,0,"tr",9),r()()()),t&2){let i=b();c(2),l("dataSource",i.sections()),c(4),l("matHeaderRowDef",i.displayedColumns),c(),l("matRowDefColumns",i.displayedColumns)}}function hi(t,e){t&1&&(n(0,"mat-card",22)(1,"mat-card-content")(2,"p"),m(3,"Please make a term first!"),r()()())}var xe=class xe{constructor(e,i,a,o){this.route=e,this.router=i,this.snackBar=a,this.academicsService=o,this.sections=W([]),this.displayedColumns=["name"];let s=this.route.snapshot.data;this.terms=s.terms,this.displayTermId=s.currentTerm?.id??null,this.displayTerm=W(this.selectedTerm()),this.resetSections()}createSection(){this.router.navigate(["academics","section","edit","new"])}updateSection(e){this.router.navigate(["academics","section","edit",e.id])}deleteSection(e,i){i.stopPropagation(),this.snackBar.open("Are you sure you want to delete this section?","Delete").onAction().subscribe(()=>{this.academicsService.deleteSection(e).subscribe(()=>{this.sections.update(o=>o.filter(s=>s.id!==e.id)),this.snackBar.open("This Section has been deleted.","",{duration:2e3})})})}selectedTerm(){return this.terms.find(e=>e.id==this.displayTermId)}resetSections(){this.displayTerm.set(this.selectedTerm()),this.displayTerm()&&this.academicsService.getSectionsByTerm(this.displayTerm()).subscribe(e=>{this.sections.set(e)})}};xe.Route={path:"section",component:xe,title:"Section Administration",canActivate:[he("academics.section","*")],resolve:{terms:Be,currentTerm:Bt,courses:je}},xe.\u0275fac=function(i){return new(i||xe)(d(j),d(M),d(T),d(I))},xe.\u0275cmp=S({type:xe,selectors:[["app-admin-section"]],standalone:!1,decls:5,vars:2,consts:[["noTerm",""],["class","content",4,"ngIf","ngIfElse"],[1,"content"],[1,"table-responsive"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],[1,"header"],[1,"right-header-container"],["appearance","outline",1,"term-selector"],[3,"ngModelChange","selectionChange","ngModel"],[3,"value"],["mat-stroked-button","",3,"click"],["mat-cell",""],[1,"row",3,"click"],["clas","modify-buttons"],["mat-header-row",""],["mat-row",""],["appearance","outlined"]],template:function(i,a){if(i&1&&(n(0,"mat-pane")(1,"mat-card-content"),h(2,fi,8,3,"div",1)(3,hi,4,0,"ng-template",null,0,F),r()()),i&2){let o=N(4);c(2),l("ngIf",a.displayTerm()&&a.sections())("ngIfElse",o)}},dependencies:[V,vt,y,w,ne,me,de,se,ae,pe,ce,le,ue,fe,U,L,q,ft,Ve,Fe,E],styles:[".mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{border-color:#fff}.header[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:16px;padding-bottom:16px}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;justify-content:space-between;align-items:center}.modify-buttons[_ngcontent-%COMP%]{margin-left:auto}#edit-button[_ngcontent-%COMP%]{margin-right:8px}.right-header-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-left:auto;gap:12px;align-items:center}.term-selector[_ngcontent-%COMP%]{width:260px;margin-bottom:-1.25em}  .mat-mdc-card-outlined{max-width:100%!important;margin-right:32px!important}"]});var Ge=xe;function _i(t,e){t&1&&(n(0,"mat-card-title"),m(1," Create Course "),r())}function Ci(t,e){t&1&&(n(0,"mat-card-title"),m(1," Update Course "),r())}var gi=(t,e)=>{let i=t.params.id;return i==="new"?D(A).check("academics.course.create","course"):D(A).check("academics.course.update",`course/${i}`)},Wt=(()=>{let e=class e{constructor(a,o,s,u,P){this.route=a,this.router=o,this.formBuilder=s,this.snackBar=u,this.academicsService=P,this.profile=null,this.courseId="new",this.subject_code=new f("",[_.required]),this.number=new f("",[_.required]),this.title=new f("",[_.required]),this.description=new f("",[_.required]),this.credit_hours=new f(3,[_.required]),this.courseForm=this.formBuilder.group({subject_code:this.subject_code,number:this.number,title:this.title,description:this.description,credit_hours:this.credit_hours});let z=this.route.snapshot.data;this.profile=z.profile,this.course=z.course,this.courseForm.setValue({subject_code:this.course.subject_code,number:this.course.number,title:this.course.title,description:this.course.description,credit_hours:this.course.credit_hours}),this.courseId=this.route.snapshot.params.id}onSubmit(){this.courseForm.valid&&(Object.assign(this.course,this.courseForm.value),this.courseId=="new"?(this.course.id=this.course.subject_code.toLowerCase()+this.course.number,this.academicsService.createCourse(this.course).subscribe({next:a=>this.onSuccess(a),error:a=>this.onError(a)})):this.academicsService.updateCourse(this.course).subscribe({next:a=>this.onSuccess(a),error:a=>this.onError(a)}))}onSuccess(a){this.router.navigate(["/academics/admin/course"]);let o=this.courseId==="new"?"Course Created":"Course Updated";this.snackBar.open(o,"",{duration:2e3})}onError(a){let o=this.courseId==="new"?"Error: Course Not Created":"Error: Course Not Updated";this.snackBar.open(o,"",{duration:2e3})}};e.Route={path:"course/edit/:id",component:e,title:"Course Editor",canActivate:[gi],resolve:{profile:re,course:jt}},e.\u0275fac=function(o){return new(o||e)(d(j),d(M),d(ie),d(T),d(I))},e.\u0275cmp=S({type:e,selectors:[["app-course-editor"]],standalone:!1,decls:32,vars:4,consts:[["update",""],[3,"ngSubmit","formGroup"],["appearance","outlined"],[4,"ngIf","ngIfElse"],["appearance","outline","color","accent"],["matInput","","placeholder","","formControlName","subject_code","name","subject_code","required",""],["matInput","","placeholder","","formControlName","number","name","number","required",""],["matInput","","placeholder","","formControlName","title","name","title","required",""],["matInput","","placeholder","","formControlName","description","name","description","required",""],["type","number","matInput","","placeholder","","formControlName","credit_hours","name","credit_hours","required",""],["mat-stroked-button","","routerLink","/academics/admin/course"],["mat-stroked-button","","type","submit",3,"disabled"]],template:function(o,s){if(o&1){let u=x();n(0,"form",1),v("ngSubmit",function(){return C(u),g(s.onSubmit())}),n(1,"mat-pane",2)(2,"mat-card-header"),h(3,_i,2,0,"mat-card-title",3)(4,Ci,2,0,"ng-template",null,0,F),r(),n(6,"mat-card-content")(7,"mat-form-field",4)(8,"mat-label"),m(9,"Subject Code"),r(),p(10,"input",5),r(),n(11,"mat-form-field",4)(12,"mat-label"),m(13,"Number"),r(),p(14,"input",6),r(),n(15,"mat-form-field",4)(16,"mat-label"),m(17,"Title"),r(),p(18,"input",7),r(),n(19,"mat-form-field",4)(20,"mat-label"),m(21,"Course Description"),r(),p(22,"textarea",8),r(),n(23,"mat-form-field",4)(24,"mat-label"),m(25,"Credit Hours"),r(),p(26,"input",9),r()(),n(27,"mat-card-actions")(28,"button",10),m(29," Cancel "),r(),n(30,"button",11),m(31," Save "),r()()()()}if(o&2){let u=N(5);l("formGroup",s.courseForm),c(3),l("ngIf",s.courseId==="new")("ngIfElse",u),c(27),l("disabled",s.courseForm.invalid)}},dependencies:[B,V,G,y,$,H,w,U,L,Y,Q,Oe,q,X,te,Z,ee,oe,E],styles:[".mat-mdc-card[_ngcontent-%COMP%]{margin:1em;max-width:640px}mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding-top:16px}mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-mdc-card-actions[_ngcontent-%COMP%]   .mdc-button[_ngcontent-%COMP%]{margin-left:8px;margin-bottom:8px}mat-card-content[_ngcontent-%COMP%]{margin-top:8px}"]});let t=e;return t})();function vi(t,e){t&1&&(n(0,"mat-card-title"),m(1," Create Term "),r())}function bi(t,e){t&1&&(n(0,"mat-card-title"),m(1," Update Term "),r())}function Si(t,e){t&1&&(n(0,"mat-form-field",5)(1,"mat-label"),m(2,"Term ID"),r(),p(3,"input",13),r())}var xi=(t,e)=>{let i=t.params.id;return i==="new"?D(A).check("academics.term.create","term"):D(A).check("academics.term.update",`term/${i}`)},zt=(()=>{let e=class e{constructor(a,o,s,u,P,z){this.route=a,this.router=o,this.formBuilder=s,this.snackBar=u,this.academicsService=P,this.datePipe=z,this.profile=null,this.termId="new",this.id=new f("",[_.required]),this.name=new f("",[_.required]),this.start=new f("",[_.required]),this.end=new f("",[_.required]),this.applications_open=new f("",[_.required]),this.applications_close=new f("",[_.required]),this.termForm=this.formBuilder.group({id:this.id,name:this.name,start:this.start,end:this.end,applications_open:this.applications_open,applications_close:this.applications_close});let k=this.route.snapshot.data;this.profile=k.profile,this.term=k.term,console.log(k.term),this.termId=this.route.snapshot.params.id,this.termForm.setValue({id:this.termId=="new"?"":this.term.id,name:this.term.name,start:this.datePipe.transform(this.term.start,"yyyy-MM-ddTHH:mm"),end:this.datePipe.transform(this.term.end,"yyyy-MM-ddTHH:mm"),applications_open:this.datePipe.transform(this.term.applications_open,"yyyy-MM-ddTHH:mm"),applications_close:this.datePipe.transform(this.term.applications_close,"yyyy-MM-ddTHH:mm")})}onSubmit(){this.termForm.valid&&(Object.assign(this.term,this.termForm.value),this.termId=="new"?this.academicsService.createTerm(this.term).subscribe({next:a=>this.onSuccess(a),error:a=>this.onError(a)}):this.academicsService.updateTerm(this.term).subscribe({next:a=>this.onSuccess(a),error:a=>this.onError(a)}))}onSuccess(a){this.router.navigate(["/academics/admin/term"]);let o=this.termId==="new"?"Term Created":"Term Updated";this.snackBar.open(o,"",{duration:2e3})}onError(a){let o=this.termId==="new"?"Error: Course Not Created":"Error: Course Not Updated";this.snackBar.open(o,"",{duration:2e3})}};e.Route={path:"term/edit/:id",component:e,title:"Term Editor",canActivate:[xi],resolve:{profile:re,term:qt}},e.\u0275fac=function(o){return new(o||e)(d(j),d(M),d(ie),d(T),d(I),d(Re))},e.\u0275cmp=S({type:e,selectors:[["app-term-editor"]],standalone:!1,decls:33,vars:5,consts:[["update",""],[3,"ngSubmit","formGroup"],["appearance","outlined"],[4,"ngIf","ngIfElse"],["appearance","outline","color","accent",4,"ngIf"],["appearance","outline","color","accent"],["matInput","","placeholder","","formControlName","name","name","name","required",""],["matInput","","type","datetime-local","placeholder","Start Date","formControlName","start","name","start","required",""],["matInput","","type","datetime-local","placeholder","End Date","formControlName","end","name","end","required",""],["matInput","","type","datetime-local","placeholder","Start Date","formControlName","applications_open","name","applications_open","required",""],["matInput","","type","datetime-local","placeholder","End Date","formControlName","applications_close","name","applications_close","required",""],["mat-stroked-button","","routerLink","/academics/admin/term"],["mat-stroked-button","","type","submit",3,"disabled"],["matInput","","placeholder","","formControlName","id","name","id","required",""]],template:function(o,s){if(o&1){let u=x();n(0,"form",1),v("ngSubmit",function(){return C(u),g(s.onSubmit())}),n(1,"mat-pane",2)(2,"mat-card-header"),h(3,vi,2,0,"mat-card-title",3)(4,bi,2,0,"ng-template",null,0,F),r(),n(6,"mat-card-content"),h(7,Si,4,0,"mat-form-field",4),n(8,"mat-form-field",5)(9,"mat-label"),m(10,"Term Name"),r(),p(11,"input",6),r(),n(12,"mat-form-field",5)(13,"mat-label"),m(14,"Term Start Date"),r(),p(15,"input",7),r(),n(16,"mat-form-field",5)(17,"mat-label"),m(18,"Term End Date"),r(),p(19,"input",8),r(),n(20,"mat-form-field",5)(21,"mat-label"),m(22,"Term Applications Open Date"),r(),p(23,"input",9),r(),n(24,"mat-form-field",5)(25,"mat-label"),m(26,"Term Applications Close Date"),r(),p(27,"input",10),r()(),n(28,"mat-card-actions")(29,"button",11),m(30," Cancel "),r(),n(31,"button",12),m(32," Save "),r()()()()}if(o&2){let u=N(5);l("formGroup",s.termForm),c(3),l("ngIf",s.termId==="new")("ngIfElse",u),c(4),l("ngIf",s.termId==="new"),c(24),l("disabled",s.termForm.invalid)}},dependencies:[B,V,G,y,$,H,w,U,L,Y,Q,q,X,te,Z,ee,oe,E],styles:[".mat-mdc-card[_ngcontent-%COMP%]{margin:1em;max-width:640px}mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding-top:16px}mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-mdc-card-actions[_ngcontent-%COMP%]   .mdc-button[_ngcontent-%COMP%]{margin-left:8px;margin-bottom:8px}mat-card-content[_ngcontent-%COMP%]{margin-top:8px}"]});let t=e;return t})();var Ye=(function(t){return t.STUDENT="Student",t.UTA="UTA",t.GTA="GTA",t.INSTRUCTOR="Instructor",t})(Ye||{});function wi(t,e){t&1&&(n(0,"mat-card-title"),m(1," Create Section "),r())}function yi(t,e){t&1&&(n(0,"mat-card-title"),m(1," Update Section "),r())}function Ei(t,e){if(t&1&&(n(0,"mat-option",14),m(1),r()),t&2){let i=e.$implicit;l("value",i),c(),Ae(i.name)}}function Ti(t,e){if(t&1&&(n(0,"mat-option",14),m(1),r()),t&2){let i=e.$implicit;l("value",i),c(),Pe(" ",i.subject_code," ",i.number,": ",i.title)}}function Ii(t,e){if(t&1&&(n(0,"mat-option",14),m(1),r()),t&2){let i=e.$implicit;l("value",i),c(),Ie(" ",i.nickname)}}function Ri(t,e){t&1&&(n(0,"mat-form-field",7)(1,"mat-label"),m(2,"Override Title"),r(),p(3,"input",15),r())}function ki(t,e){t&1&&(n(0,"mat-form-field",7)(1,"mat-label"),m(2,"Override Description"),r(),p(3,"textarea",16),r())}var Di=(t,e)=>{let i=t.params.id;return i==="new"?D(A).check("academics.section.create","section"):D(A).check("academics.section.update",`section/${i}`)},Jt=(()=>{let e=class e{constructor(a,o,s,u,P,z){this.route=a,this.router=o,this.formBuilder=s,this.snackBar=u,this.academicsService=P,this.datePipe=z,this.profile=null,this.sectionIdString="new",this.term=new f(null,[_.required]),this.course=new f(null,[_.required]),this.number=new f("",[_.required]),this.meeting_pattern=new f("",[_.required]),this.override_title=new f(""),this.override_description=new f(""),this.room=new f(null,[_.required]),this.instructors=[],this.override=new f(!1,[_.required]),this.isOverriding=new rt(1),this.isOverriding$=this.isOverriding.asObservable(),this.sectionForm=this.formBuilder.group({number:this.number,meeting_pattern:this.meeting_pattern,override_title:this.override_title,override_description:this.override_description});let k=this.route.snapshot.data;this.profile=k.profile,this.section=k.section,this.terms=k.terms,this.courses=k.courses,this.rooms=k.rooms,this.sectionIdString=this.route.snapshot.params.id,this.sectionForm.setValue({number:this.section.number,meeting_pattern:this.section.meeting_pattern,override_title:this.section.override_title,override_description:this.section.override_description}),(this.section.override_title!==""||this.section.override_description!=="")&&(this.override.setValue(!0),this.isOverriding.next(!0)),this.override.valueChanges.subscribe(R=>{this.isOverriding.next(R??!1),R||(this.override_title.setValue(""),this.override_description.setValue(""))});let Ze=this.terms.filter(R=>R.id==this.section.term_id),et=this.courses.filter(R=>R.id==this.section.course_id),tt=this.rooms.filter(R=>R.id==this.section.lecture_room?.id);this.term.setValue(Ze.length>0?Ze[0]:null),this.course.setValue(et.length>0?et[0]:null),this.room.setValue(tt.length>0?tt[0]:null),this.instructors=this.section.staff?.filter(R=>R.member_role==Ye.INSTRUCTOR).map(R=>({id:R.user_id,onyen:"",first_name:R.first_name,last_name:R.last_name,pronouns:"",email:"",github_avatar:"",github:"",bio:"",linkedin:"",website:""}))??[]}onSubmit(){if(this.sectionForm.valid){this.section.id=+this.sectionIdString,this.section.number=this.sectionForm.value.number??"",this.section.meeting_pattern=this.sectionForm.value.meeting_pattern??"",this.section.term_id=this.term.value.id,this.section.course_id=this.course.value.id,this.section.lecture_room=this.room.value,this.section.override_title=this.sectionForm.value.override_title??"",this.section.override_description=this.sectionForm.value.override_description??"";let a=ot(it({},this.section),{instructors:this.instructors});this.sectionIdString=="new"?this.academicsService.createSection(a).subscribe({next:o=>this.onSuccess(o),error:o=>this.onError(o)}):this.academicsService.updateSection(a).subscribe({next:o=>this.onSuccess(o),error:o=>this.onError(o)})}}onSuccess(a){this.router.navigate(["/academics/admin/section"]);let o=this.sectionIdString==="new"?"Section Created":"Section Updated";this.snackBar.open(o,"",{duration:2e3})}onError(a){let o=this.sectionIdString==="new"?"Error: Section Not Created":"Error: Section Not Updated";this.snackBar.open(o,"",{duration:2e3})}};e.Route={path:"section/edit/:id",component:e,title:"Section Editor",canActivate:[Di],resolve:{profile:re,section:Ht,terms:Be,courses:je,rooms:Gt}},e.\u0275fac=function(o){return new(o||e)(d(j),d(M),d(ie),d(T),d(I),d(Re))},e.\u0275cmp=S({type:e,selectors:[["app-section-editor"]],standalone:!1,decls:42,vars:18,consts:[["update",""],[3,"ngSubmit","formGroup"],["appearance","outlined"],[4,"ngIf","ngIfElse"],["appearance","outline"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline","color","accent"],["matInput","","placeholder","","formControlName","number","name","number","required",""],["matInput","","placeholder","","formControlName","meeting_pattern","name","meeting_pattern","required",""],["label","Instructors",3,"users"],["appearance","outline","color","accent",4,"ngIf"],["mat-stroked-button","","type","button","routerLink","/academics/admin/section"],["mat-stroked-button","","type","submit",3,"disabled"],[3,"value"],["matInput","","placeholder","","formControlName","override_title","name","override_title"],["matInput","","placeholder","","formControlName","override_description","name","override_description"]],template:function(o,s){if(o&1){let u=x();n(0,"form",1),v("ngSubmit",function(){return C(u),g(s.onSubmit())}),n(1,"mat-pane",2)(2,"mat-card-header"),h(3,wi,2,0,"mat-card-title",3)(4,yi,2,0,"ng-template",null,0,F),r(),n(6,"mat-card-content")(7,"mat-form-field",4)(8,"mat-label"),m(9,"Select Term"),r(),n(10,"mat-select",5),h(11,Ei,2,2,"mat-option",6),r()(),n(12,"mat-form-field",4)(13,"mat-label"),m(14,"Select Course"),r(),n(15,"mat-select",5),h(16,Ti,2,4,"mat-option",6),r()(),n(17,"mat-form-field",7)(18,"mat-label"),m(19,"Section Number"),r(),p(20,"input",8),r(),n(21,"mat-form-field",7)(22,"mat-label"),m(23,"Meeting Pattern"),r(),p(24,"input",9),r(),n(25,"mat-form-field",4)(26,"mat-label"),m(27,"Select Room"),r(),n(28,"mat-select",5),h(29,Ii,2,2,"mat-option",6),r()(),p(30,"user-lookup",10),n(31,"mat-slide-toggle",5),m(32," Override Course Name and Description? "),r(),h(33,Ri,4,0,"mat-form-field",11),ze(34,"async"),h(35,ki,4,0,"mat-form-field",11),ze(36,"async"),r(),n(37,"mat-card-actions")(38,"button",12),m(39," Cancel "),r(),n(40,"button",13),m(41," Save "),r()()()()}if(o&2){let u=N(5);l("formGroup",s.sectionForm),c(3),l("ngIf",s.sectionIdString==="new")("ngIfElse",u),c(7),l("formControl",s.term),c(),l("ngForOf",s.terms),c(4),l("formControl",s.course),c(),l("ngForOf",s.courses),c(12),l("formControl",s.room),c(),l("ngForOf",s.rooms),c(),l("users",s.instructors),c(),l("formControl",s.override),c(2),l("ngIf",Je(34,14,s.isOverriding$)),c(2),l("ngIf",Je(36,16,s.isOverriding$)),c(5),l("disabled",s.sectionForm.invalid)}},dependencies:[B,dt,V,G,y,$,H,w,U,L,Y,Q,q,X,te,Ve,Fe,ht,Z,ee,oe,Ne,Pt,E,pt],styles:[".mat-mdc-card[_ngcontent-%COMP%]{margin:1em;max-width:640px}mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding-top:16px}mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-mdc-card-actions[_ngcontent-%COMP%]   .mdc-button[_ngcontent-%COMP%]{margin-left:8px;margin-bottom:8px}mat-card-content[_ngcontent-%COMP%]{margin-top:8px}mat-slide-toggle[_ngcontent-%COMP%]{padding-bottom:16px}"]});let t=e;return t})();function Ai(t,e){if(t&1){let i=x();n(0,"th",8)(1,"div",9),m(2," Rooms "),n(3,"button",10),v("click",function(){C(i);let o=b(2);return g(o.createRoom())}),m(4," Create "),r()()()}}function Pi(t,e){if(t&1){let i=x();n(0,"td",11)(1,"div",12),v("click",function(){let o=C(i).$implicit,s=b(2);return g(s.updateRoom(o))}),n(2,"p"),m(3),r(),n(4,"div",13)(5,"button",10),v("click",function(o){let s=C(i).$implicit,u=b(2);return g(u.deleteRoom(s,o))}),m(6," Delete "),r()()()()}if(t&2){let i=e.$implicit;c(3),Ie(" ",i.nickname," ")}}function Oi(t,e){t&1&&p(0,"tr",14)}function Ni(t,e){t&1&&p(0,"tr",15)}function Fi(t,e){if(t&1&&(n(0,"div",0)(1,"div",1)(2,"table",2),J(3,3),h(4,Ai,5,0,"th",4)(5,Pi,7,1,"td",5),K(),h(6,Oi,1,0,"tr",6)(7,Ni,1,0,"tr",7),r()()()),t&2){let i=b();c(2),l("dataSource",i.rooms()),c(4),l("matHeaderRowDef",i.displayedColumns),c(),l("matRowDefColumns",i.displayedColumns)}}var Me=class Me{constructor(e,i,a){this.router=e,this.snackBar=i,this.academicsService=a,this.rooms=W([]),this.displayedColumns=["name"],a.getRooms().subscribe(o=>{this.rooms.set(o)})}createRoom(){this.router.navigate(["academics","room","edit","new"])}updateRoom(e){this.router.navigate(["academics","room","edit",e.id])}deleteRoom(e,i){i.stopPropagation(),this.snackBar.open("Are you sure you want to delete this room?","Delete").onAction().subscribe(()=>{this.academicsService.deleteRoom(e).subscribe({next:()=>{this.rooms.update(o=>[...o.filter(u=>u.id!==e.id)]),this.snackBar.open("This room has been deleted.","",{duration:2e3})},error:()=>{this.snackBar.open("Delete failed because this room is being used elsewhere.","",{duration:2e3})}})})}};Me.Route={path:"room",component:Me,title:"Room Administration",canActivate:[he("academics.term","*")]},Me.\u0275fac=function(i){return new(i||Me)(d(M),d(T),d(I))},Me.\u0275cmp=S({type:Me,selectors:[["app-admin-room"]],standalone:!1,decls:3,vars:1,consts:[[1,"content"],[1,"table-responsive"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],[1,"header"],["mat-stroked-button","",3,"click"],["mat-cell",""],[1,"row",3,"click"],["clas","modify-buttons"],["mat-header-row",""],["mat-row",""]],template:function(i,a){i&1&&(n(0,"mat-pane")(1,"mat-card-content"),Ee(2,Fi,8,3,"div",0),r()()),i&2&&(c(2),Te(a.rooms()?2:-1))},dependencies:[y,w,ne,me,de,se,ae,pe,ce,le,ue,fe,E],styles:[".mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{border-color:#fff}.header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;justify-content:space-between;align-items:center}.modify-buttons[_ngcontent-%COMP%]{margin-left:auto}#edit-button[_ngcontent-%COMP%]{margin-right:8px}  .mat-mdc-card-outlined{max-width:100%!important;margin-right:32px!important}"]});var We=Me;function Vi(t,e){t&1&&(n(0,"mat-card-title"),m(1," Create Room "),r())}function ji(t,e){t&1&&(n(0,"mat-card-title"),m(1," Update Room "),r())}function Bi(t,e){t&1&&(n(0,"mat-form-field",5)(1,"mat-label"),m(2,"Room ID"),r(),p(3,"input",13),r())}var qi=(t,e)=>{let i=t.params.id;return i==="new"?D(A).check("room.create","room"):D(A).check("room.update",`room/${i}`)},Kt=(()=>{let e=class e{constructor(a,o,s,u,P,z){this.route=a,this.router=o,this.formBuilder=s,this.snackBar=u,this.academicsService=P,this.datePipe=z,this.profile=null,this.roomId="new",this.id=new f("",[_.required]),this.nickname=new f("",[_.required]),this.building=new f("",[_.required]),this.roomName=new f("",[_.required]),this.capacity=new f(0,[_.required]),this.reservable=new f(!1,[_.required]),this.roomForm=this.formBuilder.group({id:this.id,nickname:this.nickname,building:this.building,room:this.roomName,capacity:this.capacity,reservable:this.reservable});let k=this.route.snapshot.data;this.profile=k.profile,this.room=k.room,this.roomId=this.route.snapshot.params.id,this.roomForm.setValue({id:this.room.id,nickname:this.room.nickname,building:this.room.building,room:this.room.room,capacity:this.room.capacity,reservable:this.room.reservable})}onSubmit(){this.roomForm.valid&&(Object.assign(this.room,this.roomForm.value),this.roomId=="new"?this.academicsService.createRoom(this.room).subscribe({next:a=>this.onSuccess(a),error:a=>this.onError(a)}):this.academicsService.updateRoom(this.room).subscribe({next:a=>this.onSuccess(a),error:a=>this.onError(a)}))}onSuccess(a){this.router.navigate(["/academics/admin/room"]);let o=this.roomId==="new"?"Room Created":"Room Updated";this.snackBar.open(o,"",{duration:2e3})}onError(a){let o=this.roomId==="new"?"Error: Room Not Created":"Error: Room Not Updated";this.snackBar.open(o,"",{duration:2e3})}};e.Route={path:"room/edit/:id",component:e,title:"Room Editor",canActivate:[qi],resolve:{profile:re,room:$t}},e.\u0275fac=function(o){return new(o||e)(d(j),d(M),d(ie),d(T),d(I),d(Re))},e.\u0275cmp=S({type:e,selectors:[["app-room-editor"]],standalone:!1,decls:31,vars:5,consts:[["update",""],[3,"ngSubmit","formGroup"],["appearance","outlined"],[4,"ngIf","ngIfElse"],["appearance","outline","color","accent",4,"ngIf"],["appearance","outline","color","accent"],["matInput","","placeholder","","formControlName","nickname","name","nickname","required",""],["matInput","","placeholder","","formControlName","building","name","building","required",""],["matInput","","placeholder","","formControlName","room","name","room","required",""],["type","number","matInput","","placeholder","","formControlName","capacity","name","capacity","required",""],["formControlName","reservable"],["mat-stroked-button","","routerLink","/academics/admin/room"],["mat-stroked-button","","type","submit",3,"disabled"],["matInput","","placeholder","","formControlName","id","name","id","required",""]],template:function(o,s){if(o&1){let u=x();n(0,"form",1),v("ngSubmit",function(){return C(u),g(s.onSubmit())}),n(1,"mat-pane",2)(2,"mat-card-header"),h(3,Vi,2,0,"mat-card-title",3)(4,ji,2,0,"ng-template",null,0,F),r(),n(6,"mat-card-content"),h(7,Bi,4,0,"mat-form-field",4),n(8,"mat-form-field",5)(9,"mat-label"),m(10,"Room Nickname"),r(),p(11,"input",6),r(),n(12,"mat-form-field",5)(13,"mat-label"),m(14,"Room Building"),r(),p(15,"input",7),r(),n(16,"mat-form-field",5)(17,"mat-label"),m(18,"Room Number"),r(),p(19,"input",8),r(),n(20,"mat-form-field",5)(21,"mat-label"),m(22,"Room Capacity"),r(),p(23,"input",9),r(),n(24,"mat-slide-toggle",10),m(25," Reservable? "),r()(),n(26,"mat-card-actions")(27,"button",11),m(28," Cancel "),r(),n(29,"button",12),m(30," Save "),r()()()()}if(o&2){let u=N(5);l("formGroup",s.roomForm),c(3),l("ngIf",s.roomId==="new")("ngIfElse",u),c(4),l("ngIf",s.roomId==="new"),c(22),l("disabled",s.roomForm.invalid)}},dependencies:[B,V,G,y,$,H,w,U,L,Y,Q,Oe,q,X,te,Z,ee,oe,Ne,E],styles:[".mat-mdc-card[_ngcontent-%COMP%]{margin:1em;max-width:640px}mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding-top:16px}mat-form-field[_ngcontent-%COMP%]{width:100%}mat-slide-toggle[_ngcontent-%COMP%]{padding-bottom:16px}.mat-mdc-card-actions[_ngcontent-%COMP%]   .mdc-button[_ngcontent-%COMP%]{margin-left:8px;margin-bottom:8px}mat-card-content[_ngcontent-%COMP%]{margin-top:8px}.checkbox[_ngcontent-%COMP%]{margin-top:0}"]});let t=e;return t})();var Hi=[{path:"admin",component:Ut,children:[qe.Route,He.Route,Ge.Route,We.Route]},Lt.Route,Wt.Route,zt.Route,Jt.Route,Kt.Route],Qt=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=De({type:e}),e.\u0275inj=ke({imports:[Ke.forChild(Hi),Ke]});let t=e;return t})();var Hr=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=De({type:e}),e.\u0275inj=ke({imports:[Qt,ut,bt,yt,Et,Vt,gt,At,Mt,xt,_t,Dt,Ct,Tt,wt,It,Rt,Ft]});let t=e;return t})();export{Hr as AcademicsModule};
