import{a as O}from"./chunk-TGRV7NB2.js";import{a as K,b as jt}from"./chunk-2NPHYAK5.js";import{$d as St,Ac as ht,Ae as Lt,Af as et,Cc as xt,Cd as G,Ce as Nt,Da as f,Dc as _t,Dd as vt,Ea as n,Ec as Ct,Fa as e,Fc as bt,Fd as S,Ga as d,Gd as y,Hd as E,Ib as mt,Id as H,Ie as J,Jd as I,Je as T,L as j,Md as q,Na as F,Nd as Mt,Oe as Q,P as A,Pa as _,Pb as ct,Pf as Ht,Q as R,Qd as z,Ra as s,Re as Y,Vd as Pt,Ve as Vt,Wd as kt,Xd as wt,Ya as at,Ye as Dt,_e as Bt,ab as o,ae as yt,bb as M,bc as w,cb as P,ce as W,da as x,db as k,de as Et,ea as l,ec as B,fc as U,hc as L,he as It,ia as p,ie as Ot,jc as pt,je as $,kb as D,la as v,lc as dt,ma as V,nc as C,nf as Ut,oe as Tt,qa as rt,qc as st,rc as ft,re as At,rf as Z,te as Rt,ub as lt,uf as Gt,vf as tt,wa as u,wc as ut,xe as Ft,ya as g,ye as X,zc as gt}from"./chunk-KVV3I3RP.js";function ae(t,i){if(t&1&&d(0,"img",0),t&2){let m=s();f("src",m.profile.github_avatar,x)}}function le(t,i){if(t&1&&(n(0,"p",1),o(1),e()),t&2){let m=s();l(),k(" ",m.profile.first_name.charAt(0),"",m.profile.last_name.charAt(0)," ")}}function me(t,i){if(t&1&&(n(0,"div",6)(1,"mat-icon",20),o(2,"link"),e(),n(3,"p")(4,"a",21),o(5,"Personal Website"),e()()()),t&2){let m=s();l(4),f("href",m.profile.website,x)}}function ce(t,i){if(t&1&&(n(0,"div",6),d(1,"mat-icon",22),n(2,"p")(3,"a",21),o(4,"LinkedIn"),e()()()),t&2){let m=s();l(3),f("href",m.profile.linkedin,x)}}function pe(t,i){if(t&1){let m=F();n(0,"p")(1,"a",23),o(2),e()(),n(3,"button",24),_("click",function(){A(m);let c=s();return R(c.unlinkGitHub())}),o(4," Unlink "),e()}if(t&2){let m=s();l(),f("href",D("https://github.com/",m.profile.github),x),l(),P(" @",m.profile.github," ")}}function de(t,i){if(t&1){let m=F();n(0,"button",25),_("click",function(){A(m);let c=s();return R(c.linkWithGitHub())}),o(1," Link with GitHub "),e()}}function se(t,i){if(t&1&&(n(0,"p",11),o(1),e()),t&2){let m=s();l(),M(m.profile.bio)}}function fe(t,i){t&1&&(n(0,"p"),o(1,"User does not have a bio."),e())}var $t=(()=>{let i=class i{constructor(a,c,r,h,N,nt,b){this.route=a,this.router=c,this.auth=r,this.profileService=h,this.snackBar=N,this.dialog=nt,this.icons=b,this.showToken=!1;let ot=this.route.snapshot.data;this.profile=ot.profile,this.profile.first_name==""&&this.router.navigate(["/profile/edit"]),this.token=`${localStorage.getItem("bearerToken")}`}displayToken(){this.showToken=!this.showToken}copyToken(){navigator.clipboard.writeText(this.token),this.snackBar.open("Token Copied","",{duration:2e3})}linkWithGitHub(){this.profileService.getGitHubOAuthLoginURL().subscribe(a=>{window.location.href=a})}unlinkGitHub(){this.profileService.unlinkGitHub().subscribe({next:()=>this.profile.github=""})}openAgreementDialog(){let a=this.dialog.open(et,{width:"1000px",height:"800px"});this.profileService.profile$.subscribe(),a.afterClosed().subscribe()}};i.Route={path:"",component:i,title:"Profile Page",canActivate:[O],resolve:{profile:K}},i.\u0275fac=function(c){return new(c||i)(p(w),p(B),p(pt),p(J),p(X),p(z),p(tt))},i.\u0275cmp=v({type:i,selectors:[["app-profile-page"]],standalone:!1,decls:55,vars:9,consts:[["mat-card-avatar","",1,"user-avatar",3,"src"],["mat-card-avatar","",1,"user-avatar","secondary-background"],[1,"header-row"],[1,"no-hover-chipset"],["disableRipple",""],[1,"links-row"],[1,"row"],[1,"secondary-icon"],["id","github-icon","svgIcon","github",1,"link-icons","secondary-icon"],["id","link-github-button","mat-button","",1,"font-secondary"],["id","bio-divider"],["markdown",""],["mat-flat-button","","routerLink","/profile/edit",1,"secondary-button"],[1,"actions-list"],[1,"actions-row","bottom-gap"],["matListItemIcon",""],["matListItemTitle",""],["mat-button","",1,"trailing-row-button",3,"click"],[1,"actions-row"],["id","sign-out-button","mat-flat-button","",1,"tertiary-button",3,"click"],[1,"link-icons","secondary-icon"],["target","_blank",1,"font-secondary",3,"href"],["id","linkedin-icon","svgIcon","linkedin",1,"link-icons","secondary-icon"],["id","github-link",1,"font-secondary",3,"href"],["id","unlink-github-button","mat-button","",1,"font-secondary",3,"click"],["id","link-github-button","mat-button","",1,"font-secondary",3,"click"]],template:function(c,r){c&1&&(n(0,"mat-pane")(1,"mat-card-header"),u(2,ae,1,1,"img",0)(3,le,2,2,"p",1),n(4,"div",2)(5,"mat-card-title"),o(6),e(),n(7,"mat-chip-set",3)(8,"mat-chip",4),o(9),e()()()(),n(10,"mat-card-content")(11,"div",5)(12,"div",6)(13,"mat-icon",7),o(14,"mail"),e(),n(15,"p"),o(16),e()(),u(17,me,6,1,"div",6),u(18,ce,5,1,"div",6),n(19,"div",6),d(20,"mat-icon",8),u(21,pe,5,3)(22,de,2,0,"button",9),e()(),d(23,"mat-divider",10),n(24,"mat-card-subtitle"),o(25,"Profile Bio"),e(),u(26,se,2,1,"p",11)(27,fe,2,0,"p"),e(),n(28,"mat-card-actions")(29,"button",12),o(30," Edit "),e()()(),n(31,"mat-pane")(32,"mat-card-header")(33,"mat-card-subtitle"),o(34,"Profile Actions"),e()(),n(35,"mat-card-content")(36,"mat-list",13)(37,"div",14)(38,"mat-icon",15),o(39,"handshake"),e(),n(40,"div",16),o(41,"Community Agreement"),e(),n(42,"button",17),_("click",function(){return r.openAgreementDialog()}),o(43," View "),e()(),n(44,"div",18)(45,"mat-icon",15),o(46,"key"),e(),n(47,"div",16),o(48,"Bearer Token"),e(),n(49,"button",17),_("click",function(){return r.copyToken()}),o(50," Copy "),e()()()()(),n(51,"mat-pane")(52,"mat-card-actions")(53,"button",19),_("click",function(){return r.auth.signOut()}),o(54," Sign Out "),e()()()),c&2&&(l(2),g(r.profile.github_avatar?2:r.profile.first_name&&r.profile.last_name?3:-1),l(4),k(" ",r.profile.first_name," ",r.profile.last_name," "),l(3),P(" ",r.profile.pronouns," "),l(7),M(r.profile.email),l(),g(r.profile.website?17:-1),l(),g(r.profile.linkedin?18:-1),l(3),g(r.profile.github?21:22),l(5),g(r.profile.bio?26:27))},dependencies:[H,q,y,I,E,S,G,Rt,At,$,Tt,W,U,T,Z,Q,Y],styles:["p[_ngcontent-%COMP%]{margin-bottom:0}.header-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;column-gap:8px;margin-left:8px}.actions-list[_ngcontent-%COMP%]{display:flex;flex-direction:column}.actions-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;width:100%}.bottom-gap[_ngcontent-%COMP%]{margin-bottom:16px}.trailing-row-button[_ngcontent-%COMP%]{margin-left:auto}.mat-mdc-list-item-icon[_ngcontent-%COMP%]{margin-right:16px}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column}.user-avatar[_ngcontent-%COMP%]{min-width:40px;max-width:40px;min-height:40px;max-height:40px;background-color:#4786c6;line-height:40px;border-radius:100%;text-align:center}.no-hover-chipset[_ngcontent-%COMP%]{--mat-chip-focus-state-layer-color: transparent !important;--mat-chip-hover-state-layer-color: transparent !important}.mat-mdc-chip[_ngcontent-%COMP%]{height:26px}.links-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;margin-top:4px;align-items:center;margin-bottom:12px;margin-left:48px;gap:4px}.link-icons[_ngcontent-%COMP%]{margin-left:6px}#linkedin-icon[_ngcontent-%COMP%]{height:22px;width:22px}#github-link[_ngcontent-%COMP%]{margin-right:4px}#link-github-button[_ngcontent-%COMP%]{height:20px;padding-left:2px;padding-right:2px;font-weight:500;text-decoration:underline}#unlink-github-button[_ngcontent-%COMP%]{height:20px;padding-left:2px;padding-right:2px;font-weight:400}#bio-divider[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px}mat-card-subtitle[_ngcontent-%COMP%]{margin-top:4px;margin-bottom:4px}.mat-mdc-list-item-icon[_ngcontent-%COMP%]{margin-left:0}mat-list-item[_ngcontent-%COMP%]{display:flex;flex-direction:row}.mdc-list-item__content[_ngcontent-%COMP%]{width:200px!important}.mdc-list-item__primary-text[_ngcontent-%COMP%]{width:200px}mat-card-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse}@media (prefers-color-scheme: light){#github_link[_ngcontent-%COMP%]{color:#000}}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:4px;align-items:center}"]});let t=i;return t})();function ue(t,i){t&1&&(n(0,"mat-card-header")(1,"mat-card-title"),o(2,"Update your Profile"),e()())}function ge(t,i){t&1&&(n(0,"mat-card-header")(1,"mat-card-title"),o(2,"Welcome to CSXL! Please verify and complete your profile below."),e(),n(3,"mat-card-subtitle"),o(4," Once your profile is setup you will be able to take advantage of CSXL initiatives such as enrolling in workshops, reserving a desk during coworking hours, and more! "),e()())}function he(t,i){t&1&&(n(0,"mat-error"),o(1,"Must provide a valid UNC email address."),e())}var Xt=(()=>{let i=class i{constructor(a,c,r,h,N,nt){this.formBuilder=c,this.profileService=r,this.snackBar=h,this.dialog=N,this.router=nt,this.showToken=!1,this.profileForm=this.formBuilder.group({first_name:"",last_name:"",email:"",website:"",linkedin:"",pronouns:"",bio:""});let b=this.profileForm;b.get("first_name")?.addValidators(C.required),b.get("lastname")?.addValidators(C.required),b.get("email")?.addValidators([C.required,C.email,C.pattern(/unc\.edu$/)]),b.get("pronouns")?.addValidators(C.required);let ot=a.snapshot.data;this.profile=ot.profile,this.token=`${localStorage.getItem("bearerToken")}`}ngOnInit(){let a=this.profile;this.profileForm.setValue({first_name:a.first_name,last_name:a.last_name,email:a.email,pronouns:a.pronouns,bio:a.bio,linkedin:a.linkedin,website:a.website})}onSubmit(){this.profileForm.valid&&(Object.assign(this.profile,this.profileForm.value),this.profile.accepted_community_agreement||this.dialog.open(et,{disableClose:!0,autoFocus:"dialog"}).afterClosed().subscribe(c=>{this.profile.accepted_community_agreement=!0}),this.profileService.put(this.profile).subscribe({next:a=>this.onSuccess(a),error:a=>this.onError(a)}))}onSuccess(a){this.router.navigate(["/profile"]),this.snackBar.open("Profile Saved","",{duration:2e3})}onError(a){console.error("How to handle this?")}};i.Route={path:"edit",component:i,title:"Profile",canActivate:[O],resolve:{profile:K}},i.\u0275fac=function(c){return new(c||i)(p(w),p(_t),p(J),p(X),p(z),p(B))},i.\u0275cmp=v({type:i,selectors:[["app-profile-editor"]],standalone:!1,decls:40,vars:5,consts:[["registration",""],[3,"ngSubmit","formGroup"],["appearance","outlined"],[4,"ngIf","ngIfElse"],["appearance","outline"],["matInput","","placeholder","First Name","formControlName","first_name","name","first_name","required",""],["matInput","","placeholder","Last Name","formControlName","last_name","name","last_name","required",""],["matInput","","type","email","placeholder","email@unc.edu","formControlName","email","name","email","required",""],[4,"ngIf"],["matInput","","placeholder","Paste your LinkedIn profile URL here.","formControlName","linkedin","name","linkedin"],["matInput","","placeholder","Paste the url of your website here.","formControlName","website","name","website"],["matInput","","placeholder","she / her / hers","formControlName","pronouns","name","pronouns","required",""],["appearance","outline","color","accent"],["matInput","","placeholder","Write your bio here (markdown supported).","formControlName","bio","name","bio"],["mat-stroked-button","","routerLink","/profile"],["mat-flat-button","","color","primary","type","submit",3,"disabled"]],template:function(c,r){if(c&1){let h=F();n(0,"form",1),_("ngSubmit",function(){return A(h),R(r.onSubmit())}),n(1,"mat-pane",2),rt(2,ue,3,0,"mat-card-header",3)(3,ge,5,0,"ng-template",null,0,lt),n(5,"mat-card-content")(6,"mat-form-field",4)(7,"mat-label"),o(8,"First Name"),e(),d(9,"input",5),e(),n(10,"mat-form-field",4)(11,"mat-label"),o(12,"Last Name"),e(),d(13,"input",6),e(),n(14,"mat-form-field",4)(15,"mat-label"),o(16,"UNC Email"),e(),d(17,"input",7),rt(18,he,2,0,"mat-error",8),e(),n(19,"mat-form-field",4)(20,"mat-label"),o(21,"LinkedIn Profile Link"),e(),d(22,"input",9),e(),n(23,"mat-form-field",4)(24,"mat-label"),o(25,"Personal Website Link"),e(),d(26,"input",10),e(),n(27,"mat-form-field",4)(28,"mat-label"),o(29,"Pronouns"),e(),d(30,"input",11),e(),n(31,"mat-form-field",12)(32,"mat-label"),o(33,"Bio (Markdown Supported)"),e(),d(34,"textarea",13),e()(),n(35,"mat-card-actions")(36,"button",14),o(37,"Cancel"),e(),n(38,"button",15),o(39," Save "),e()()()()}if(c&2){let h=at(4);f("formGroup",r.profileForm),l(2),f("ngIf",r.profile.id)("ngIfElse",h),l(16),f("ngIf",r.profileForm.value.email),l(20),f("disabled",r.profileForm.invalid)}},dependencies:[mt,H,y,I,E,S,G,St,kt,wt,It,ut,dt,st,ft,xt,gt,ht,U,T],styles:["mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding-top:16px}mat-form-field[_ngcontent-%COMP%]{width:100%}.horizontal-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:16px}.mat-mdc-card-actions[_ngcontent-%COMP%]{padding-bottom:16px;justify-content:end;gap:12px}"]});let t=i;return t})();function xe(t,i){if(t&1&&d(0,"img",0),t&2){let m=s();f("src",m.profile.github_avatar,x)}}function _e(t,i){if(t&1&&(n(0,"p",1),o(1),e()),t&2){let m=s();l(),k(" ",m.profile.first_name.charAt(0),"",m.profile.last_name.charAt(0)," ")}}function Ce(t,i){if(t&1&&(n(0,"div",6)(1,"mat-icon",10),o(2,"link"),e(),n(3,"p")(4,"a",11),o(5,"Personal Website"),e()()()),t&2){let m=s();l(4),f("href",m.profile.website,x)}}function be(t,i){if(t&1&&(n(0,"div",6),d(1,"mat-icon",12),n(2,"p")(3,"a",11),o(4,"LinkedIn"),e()()()),t&2){let m=s();l(3),f("href",m.profile.linkedin,x)}}function ve(t,i){if(t&1&&(d(0,"mat-icon",13),n(1,"p")(2,"a",14),o(3),e()()),t&2){let m=s();l(2),f("href",D("https://github.com/",m.profile.github),x),l(),P(" @",m.profile.github," ")}}function Me(t,i){if(t&1&&(n(0,"p",9),o(1),e()),t&2){let m=s();l(),M(m.profile.bio)}}function Pe(t,i){t&1&&(n(0,"p"),o(1,"User does not have a bio."),e())}var Jt=(()=>{let i=class i{constructor(a,c){this.route=a,this.icons=c;let r=this.route.snapshot.data;this.profile=r.profile}};i.Route={path:":onyen",component:i,title:"Profile Page",canActivate:[O],resolve:{profile:jt}},i.\u0275fac=function(c){return new(c||i)(p(w),p(tt))},i.\u0275cmp=v({type:i,selectors:[["app-public-profile-page"]],standalone:!1,decls:26,vars:9,consts:[["mat-card-avatar","",1,"user-avatar",3,"src"],["mat-card-avatar","",1,"user-avatar","secondary-background"],[1,"header-row"],[1,"no-hover-chipset"],["disableRipple",""],[1,"links-row"],[1,"row"],[1,"secondary-icon"],["id","bio-divider"],["markdown",""],[1,"link-icons","secondary-icon"],["target","_blank",1,"font-secondary",3,"href"],["id","linkedin-icon","svgIcon","linkedin",1,"link-icons","secondary-icon"],["id","github-icon","svgIcon","github",1,"link-icons","secondary-icon"],["id","github-link",1,"font-secondary",3,"href"]],template:function(c,r){c&1&&(n(0,"mat-pane")(1,"mat-card-header"),u(2,xe,1,1,"img",0)(3,_e,2,2,"p",1),n(4,"div",2)(5,"mat-card-title"),o(6),e(),n(7,"mat-chip-set",3)(8,"mat-chip",4),o(9),e()()()(),n(10,"mat-card-content")(11,"div",5)(12,"div",6)(13,"mat-icon",7),o(14,"mail"),e(),n(15,"p"),o(16),e()(),u(17,Ce,6,1,"div",6),u(18,be,5,1,"div",6),n(19,"div",6),u(20,ve,4,3),e()(),d(21,"mat-divider",8),n(22,"mat-card-subtitle"),o(23,"Profile Bio"),e(),u(24,Me,2,1,"p",9)(25,Pe,2,0,"p"),e()()),c&2&&(l(2),g(r.profile.github_avatar?2:r.profile.first_name&&r.profile.last_name?3:-1),l(4),k(" ",r.profile.first_name," ",r.profile.last_name," "),l(3),P(" ",r.profile.pronouns," "),l(7),M(r.profile.email),l(),g(r.profile.website?17:-1),l(),g(r.profile.linkedin?18:-1),l(2),g(r.profile.github?20:-1),l(4),g(r.profile.bio?24:25))},dependencies:[q,y,I,E,S,$,W,T,Z,Q,Y],styles:["p[_ngcontent-%COMP%]{margin-bottom:0}.header-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;column-gap:8px;margin-left:8px}.actions-list[_ngcontent-%COMP%]{display:flex;flex-direction:column}.actions-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;width:100%}.bottom-gap[_ngcontent-%COMP%]{margin-bottom:16px}.trailing-row-button[_ngcontent-%COMP%]{margin-left:auto}.mat-mdc-list-item-icon[_ngcontent-%COMP%]{margin-right:16px}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column}.user-avatar[_ngcontent-%COMP%]{min-width:40px;max-width:40px;min-height:40px;max-height:40px;background-color:#4786c6;line-height:40px;border-radius:100%;text-align:center}.no-hover-chipset[_ngcontent-%COMP%]{--mat-chip-focus-state-layer-color: transparent !important;--mat-chip-hover-state-layer-color: transparent !important}.mat-mdc-chip[_ngcontent-%COMP%]{height:26px}.links-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;margin-top:4px;align-items:center;margin-bottom:12px;margin-left:48px;gap:4px}.link-icons[_ngcontent-%COMP%]{margin-left:6px}#linkedin-icon[_ngcontent-%COMP%]{height:22px;width:22px}#github-link[_ngcontent-%COMP%]{margin-right:4px}#link-github-button[_ngcontent-%COMP%]{height:20px;padding-left:2px;padding-right:2px;font-weight:500;text-decoration:underline}#unlink-github-button[_ngcontent-%COMP%]{height:20px;padding-left:2px;padding-right:2px;font-weight:400}#bio-divider[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px}mat-card-subtitle[_ngcontent-%COMP%]{margin-top:4px;margin-bottom:4px}.mat-mdc-list-item-icon[_ngcontent-%COMP%]{margin-left:0}mat-list-item[_ngcontent-%COMP%]{display:flex;flex-direction:row}.mdc-list-item__content[_ngcontent-%COMP%]{width:200px!important}.mdc-list-item__primary-text[_ngcontent-%COMP%]{width:200px}mat-card-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse}@media (prefers-color-scheme: light){#github_link[_ngcontent-%COMP%]{color:#000}}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:4px;align-items:center}"]});let t=i;return t})();var ke=[Xt.Route,$t.Route,Jt.Route],Kt=(()=>{let i=class i{};i.\u0275fac=function(c){return new(c||i)},i.\u0275mod=V({type:i}),i.\u0275inj=j({imports:[L.forChild(ke),L]});let t=i;return t})();var Ci=(()=>{let i=class i{};i.\u0275fac=function(c){return new(c||i)},i.\u0275mod=V({type:i}),i.\u0275inj=j({imports:[ct,Lt,Ut,Mt,Pt,vt,Dt,yt,Ot,Bt,Ft,Gt,Ct,bt,Et,Nt,Kt,L,Ht,Vt]});let t=i;return t})();export{Ci as ProfileModule};
