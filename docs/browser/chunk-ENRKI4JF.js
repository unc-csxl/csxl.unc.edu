import{Ef as A,K as D,N as v,W as S,Wb as H,e as P,r as u,xb as h,ye as j}from"./chunk-KVV3I3RP.js";var F=P((y,w)=>{"use strict";(function(e,o){typeof define=="function"&&define.amd?define([],o):typeof y<"u"?o():(o(),e.FileSaver={})})(y,function(){"use strict";function e(i,n){return typeof n>"u"?n={autoBom:!1}:typeof n!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}function o(i,n,f){var s=new XMLHttpRequest;s.open("GET",i),s.responseType="blob",s.onload=function(){a(s.response,n,f)},s.onerror=function(){console.error("could not download file")},s.send()}function O(i){var n=new XMLHttpRequest;n.open("HEAD",i,!1);try{n.send()}catch{}return 200<=n.status&&299>=n.status}function t(i){try{i.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(n)}}var r=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,c=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=r.saveAs||(typeof window!="object"||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(i,n,f){var s=r.URL||r.webkitURL,p=document.createElement("a");n=n||i.name||"download",p.download=n,p.rel="noopener",typeof i=="string"?(p.href=i,p.origin===location.origin?t(p):O(p.href)?o(i,n,f):t(p,p.target="_blank")):(p.href=s.createObjectURL(i),setTimeout(function(){s.revokeObjectURL(p.href)},4e4),setTimeout(function(){t(p)},0))}:"msSaveOrOpenBlob"in navigator?function(i,n,f){if(n=n||i.name||"download",typeof i!="string")navigator.msSaveOrOpenBlob(e(i,f),n);else if(O(i))o(i,n,f);else{var s=document.createElement("a");s.href=i,s.target="_blank",setTimeout(function(){t(s)})}}:function(i,n,f,s){if(s=s||open("","_blank"),s&&(s.document.title=s.document.body.innerText="downloading..."),typeof i=="string")return o(i,n,f);var p=i.type==="application/octet-stream",L=/constructor/i.test(r.HTMLElement)||r.safari,b=/CriOS\/[\d]+/.test(navigator.userAgent);if((b||p&&L||c)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var l=g.result;l=b?l:l.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=l:location=l,s=null},g.readAsDataURL(i)}else{var T=r.URL||r.webkitURL,_=T.createObjectURL(i);s?s.location=_:location.href=_,s=null,setTimeout(function(){T.revokeObjectURL(_)},4e4)}});r.saveAs=a.saveAs=a,typeof w<"u"&&(w.exports=a)})});var N=e=>({id:e.id,subject_code:e.subject_code,course_number:e.course_number,section_number:e.section_number,title:""}),I={page:0,page_size:25,student_ids:"",staff_ids:"",range_start:"",range_end:""},C=e=>Object.assign({},e,{start:new Date(e.start),end:new Date(e.end)}),$=e=>e.map(C),J=e=>Object.assign({},e,{start_time:new Date(e.start_time),end_time:new Date(e.end_time)}),E=e=>e.map(o=>J(o)),d=e=>Object.assign({},e,{created_at:new Date(e.created_at),called_at:e.called_at?new Date(e.called_at):void 0,closed_at:e.closed_at?new Date(e.closed_at):void 0}),R=e=>Object.assign({},e,{start_time:new Date(e.start_time),end_time:new Date(e.end_time),active:e.active?d(e.active):void 0,other_called:e.other_called.map(d),queue:e.queue.map(d),history:e.history.map(d)}),x=e=>Object.assign({},e,{ticket:e.ticket?d(e.ticket):void 0,event_start_time:new Date(e.event_start_time),event_end_time:new Date(e.event_end_time)});var m=e=>Object.assign({},e,{start_time:new Date(e.start_time),end_time:new Date(e.end_time)}),k=e=>Object.assign({},e,{term_start:new Date(e.term_start),term_end:new Date(e.term_end)});var U=(function(e){return e.Monday="Monday",e.Tuesday="Tuesday",e.Wednesday="Wednesday",e.Thursday="Thursday",e.Friday="Friday",e.Saturday="Saturday",e.Sunday="Sunday",e})(U||{}),K=(()=>{let o=class o{courseOverview(t){return this.termsSignal().flatMap(r=>r.sites).find(r=>r.id==t)}constructor(t,r,c){this.http=t,this.snackBar=r,this.gearService=c,this.termsSignal=S([]),this.currentTerms=h(()=>this.termsSignal().filter(a=>new Date<=a.end)),this.pastTerms=h(()=>this.termsSignal().filter(a=>{let i=new Date;return a.end<i})),this.allTerms=h(()=>this.termsSignal()),this.teachingCoursesWithNoSite=h(()=>this.termsSignal().flatMap(a=>a.teaching_no_site.length>0).includes(!0)),this.getTermOverviews()}getTermOverviews(){let t=this.http.get("/api/my-courses").pipe(u($));return t.subscribe(r=>{this.termsSignal.set(r)}),t}getCurrentOfficeHourEvents(t){return this.http.get(`/api/my-courses/${t}/oh-events/current`).pipe(u(E))}getOfficeHoursQueue(t){return this.http.get(`/api/office-hours/${t}/queue`).pipe(u(R))}callTicket(t){return this.http.put(`/api/office-hours/ticket/${t}/call`,{}).pipe(u(d))}cancelTicket(t){return this.http.put(`/api/office-hours/ticket/${t}/cancel`,{}).pipe(u(d))}closeTicket(t,r,c){return this.http.put(`/api/office-hours/ticket/${t}/close`,{has_concerns:r,caller_notes:c}).pipe(u(d))}getOfficeHoursRole(t){return this.http.get(`/api/office-hours/${t}/role`)}getOfficeHoursHelpOverview(t){return this.http.get(`/api/office-hours/${t}/get-help`).pipe(u(x))}createTicket(t){return this.http.post("api/office-hours/ticket/",t)}getCourseSite(t){return this.http.get(`/api/my-courses/${t}`)}createCourseSite(t){return this.http.post("/api/my-courses/new",t)}updateCourseSite(t){return this.http.put("/api/my-courses",t)}importRosterFromCanvasCSV(t,r){return this.http.post(`/api/academics/section-member/import-from-canvas/${t}`,{csv_data:r})}getOfficeHours(t,r){return this.http.get(`/api/office-hours/${t}/${r}`).pipe(u(m))}createOfficeHours(t,r){return this.http.post(`/api/office-hours/${t}`,r).pipe(u(m))}createRecurringOfficeHours(t,r,c){return this.http.post(`/api/office-hours/${t}/recurring`,{oh:r,recur:c}).pipe(u(a=>a.map(m)))}updateOfficeHours(t,r){return this.http.put(`/api/office-hours/${t}`,r).pipe(u(m))}updateRecurringOfficeHours(t,r,c){return this.http.put(`/api/office-hours/${t}/recurring`,{oh:r,recur:c}).pipe(u(a=>a.map(m)))}deleteOfficeHours(t,r){return this.http.delete(`/api/office-hours/${t}/${r}`)}deleteRecurringOfficeHours(t,r){return this.http.delete(`/api/office-hours/${t}/${r}/recurring`)}getOfficeHoursStatisticsFilterOptions(t){return this.http.get(`/api/my-courses/${t}/statistics/filter-data`).pipe(u(k))}getPaginatedOfficeHoursStatisticsTicketHistory(t,r){let c=new URLSearchParams(r),a=`/api/my-courses/${t}/statistics/ticket-history?`+c.toString();return this.http.get(a)}getOfficeHoursTicketStatistics(t,r){let c=new URLSearchParams(r),a=`/api/my-courses/${t}/statistics?`+c.toString();return this.http.get(a)}getOfficeHoursTicketCsv(t,r){let c=r?`/api/my-courses/${t}/statistics/csv?`+new URLSearchParams(r).toString():`/api/my-courses/${t}/statistics/csv`;return this.http.get(c,{responseType:"blob"})}getCourseRosterCsv(t){let r=`/api/my-courses/${t}/roster/csv`;return this.http.get(r,{responseType:"blob"})}};o.\u0275fac=function(r){return new(r||o)(v(H),v(j),v(A))},o.\u0275prov=D({token:o,factory:o.\u0275fac,providedIn:"root"});let e=o;return e})();export{N as a,I as b,$ as c,J as d,U as e,K as f,F as g};
