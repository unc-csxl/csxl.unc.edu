import{a as Xn,b as Kn,c as ai,d as ct,e as W,f as T,g as eo}from"./chunk-ENRKI4JF.js";import{a as si,b as ci,c as to}from"./chunk-3PYUEOGT.js";import{a as kn}from"./chunk-I464KKEC.js";import{c as zt,d as Qt,f as gt,g as Ct,h as Ut,l as mn,m as un,n as pn,o as fn}from"./chunk-THU5RPG5.js";import{a as Ln,b as qn,c as jn,d as Gn,e as Wn,f as $n,g as zn,h as Ii,i as Qn}from"./chunk-ZFATP7SM.js";import{a as Un,c as Yn,d as Jn,g as Zn}from"./chunk-FOSHG4FT.js";import{a as ri}from"./chunk-XWVSSOUL.js";import{$ as yi,$a as qt,$d as ue,$e as We,Aa as ut,Ac as Jt,Ad as dn,Ae as wn,Ba as P,Bb as ht,Bc as tn,Bd as ke,Bf as et,Ca as H,Cb as Mi,Cc as Me,Cd as R,Da as d,Db as ki,Dc as xt,Dd as _n,De as En,Ea as s,Eb as Ve,Ec as nn,Ed as ee,Ee as Xt,Ef as wt,Fa as o,Fb as wi,Fc as on,Fd as L,Ff as oi,Ga as f,Gd as V,Ge as Tn,Hd as Z,He as In,Ib as Gt,Id as de,J as Vi,Jd as B,Je as X,Jf as Rt,Ka as A,Kb as Ji,L as dt,La as N,Lb as J,Lf as Vt,M as Si,Mb as Zi,Me as On,Na as S,Nd as hn,Ne as Kt,O as G,Od as we,Oe as bt,Of as An,P as g,Pa as _,Pb as Xi,Pd as Ee,Pf as Nn,Q as C,Qd as Te,Qe as ei,Ra as m,Re as ti,Sa as Gi,Sc as rn,Sd as Ie,T as Bi,Ta as Wi,Td as Oe,Te as ii,Ua as $i,Uc as an,Ud as Ge,Ue as ni,Va as Dt,Vd as gn,Ve as Dn,W as D,Wa as pt,Wb as Wt,Wd as me,We as ve,Xa as ft,Xd as Zt,Xe as Pe,Ya as K,Yd as Cn,Ye as Pn,Z as Ai,Ze as St,_a as be,_b as $t,_c as Ei,_e as Hn,a as At,ab as c,ae as vn,af as $e,b as Nt,bb as y,bc as Q,bd as sn,bf as ze,c as Fi,cb as k,ce as pe,db as $,de as xn,df as Qe,ea as l,eb as ce,ec as le,ef as Ue,fb as zi,fc as qe,fd as cn,g as Ri,gb as ie,gd as ln,gf as Ye,ha as Ni,hb as ne,hc as Ft,he as De,hf as Je,ia as p,ib as oe,ie as bn,jb as Qi,je as fe,jf as Ze,kc as Ki,ke as Sn,kf as Xe,la as M,lb as Ui,lc as ge,le as yn,ma as mt,mb as z,mf as Ke,na as Li,nb as _t,nc as re,nf as Fn,q as at,qa as I,qb as w,qc as U,r as Re,rb as jt,rc as Se,rf as yt,sa as Le,sb as E,sf as Mt,ta as qi,tc as vt,tf as kt,ua as ji,uc as F,uf as Rn,v as lt,va as st,vc as Ce,wa as v,wc as ye,xb as Pt,xc as en,xe as Mn,xf as Vn,ya as x,yb as Ht,yc as je,ye as Y,yf as Bn,z as Lt,zb as Yi,zc as Yt,zd as Ti}from"./chunk-KVV3I3RP.js";var Oi=(e,i)=>i.id;function Lo(e,i){if(e&1&&(s(0,"mat-option",7),c(1),o()),e&2){let t=i.$implicit;d("value",t),l(),y(t.name)}}function qo(e,i){if(e&1){let t=S();s(0,"mat-chip-row",12),_("removed",function(){let n=g(t).$implicit,a=m(2);return C(a.remove(n))}),c(1),s(2,"button",13)(3,"mat-icon"),c(4,"cancel"),o()()()}if(e&2){let t=i.$implicit;l(),ce(" ",t.subject_code," ",t.course_number,"-",t.section_number," ")}}function jo(e,i){if(e&1&&(s(0,"mat-option",7),c(1),o()),e&2){let t=m().$implicit;d("value",t),l(),ce("",t.subject_code," ",t.course_number,"-",t.section_number)}}function Go(e,i){if(e&1&&v(0,jo,2,4,"mat-option",7),e&2){let t=i.$implicit,r=m(2);x(r.selectedSections().includes(t)?-1:0)}}function Wo(e,i){if(e&1){let t=S();s(0,"mat-form-field",4)(1,"mat-label"),c(2,"Select Course Sections"),o(),s(3,"mat-chip-grid",null,0),P(5,qo,5,3,"mat-chip-row",null,Oi),o(),s(7,"input",10,1),oe("ngModelChange",function(n){g(t);let a=m();return ne(a.currentSectionInput,n)||(a.currentSectionInput=n),C(n)}),o(),s(9,"mat-autocomplete",11,2),_("optionSelected",function(n){g(t);let a=m();return C(a.selected(n))}),P(11,Go,1,1,null,null,Oi),o()()}if(e&2){let t=K(4),r=K(10),n=m();l(5),H(n.selectedSections()),l(2),ie("ngModel",n.currentSectionInput),d("matChipInputFor",t)("matAutocomplete",r),l(4),H(n.selectedTerm.value.teaching_no_site)}}var no=(()=>{let i=class i{constructor(r,n,a,u,h,b){this.dialogRef=r,this.data=n,this.myCoursesService=a,this.router=u,this.snackBar=h,this.formBuilder=b,this.title=new F(""),this.selectedSections=D([]),this.currentSectionInput=D(""),this.selectedTerm=new F(a.allTerms()[0])}selected(r){let n=r.option.value;this.selectedSections.update(a=>[...a,n]),this.currentSectionInput.set(""),r.option.deselect()}remove(r){this.selectedSections.update(n=>{let a=n.indexOf(r);return a<0?n:(n.splice(a,1),[...n])})}resetSections(){this.selectedSections.set([])}formIsValid(){return this.title.value!==null&&this.title.value!==""&&this.selectedTerm.value!==null&&this.selectedSections().length>0}submit(){if(this.formIsValid()){let r={title:this.title.value??"",term_id:this.selectedTerm.value.id,section_ids:this.selectedSections().map(n=>n.id)};this.myCoursesService.createCourseSite(r).subscribe({next:n=>{this.myCoursesService.getTermOverviews(),this.router.navigate(["course",n.id,"office-hours"]),this.close()},error:n=>this.snackBar.open(n,"",{duration:2e3})})}}close(){this.dialogRef.close()}};i.\u0275fac=function(n){return new(n||i)(p(we),p(Ee),p(T),p(le),p(Y),p(xt))},i.\u0275cmp=M({type:i,selectors:[["dialog-create-course-site"]],standalone:!1,decls:22,vars:4,consts:[["chipGrid",""],["sectionInput",""],["auto","matAutocomplete"],["mat-dialog-title",""],["appearance","outline"],["matInput","","placeholder","Enter the title for the course site.","required","",3,"formControl"],[3,"selectionChange","formControl"],[3,"value"],["mat-stroked-button","","color","secondary",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"],["name","currentSection","placeholder","Add Sections...",3,"ngModelChange","ngModel","matChipInputFor","matAutocomplete"],[3,"optionSelected"],[3,"removed"],["matChipRemove",""]],template:function(n,a){n&1&&(s(0,"h2",3),c(1,"Create Course Site"),o(),s(2,"mat-dialog-content")(3,"form")(4,"p"),c(5," Creating a course site for your course section will allow you to manage your office hours, rosters, and more. Office hours are shared for all course sections within the same site. You may only add a section to one course page at a time. You can add and remove sections later, but you cannot change the term of a course site later. "),o(),s(6,"mat-form-field",4)(7,"mat-label"),c(8,"Title"),o(),f(9,"input",5),o(),s(10,"mat-form-field",4)(11,"mat-label"),c(12,"Select Term"),o(),s(13,"mat-select",6),_("selectionChange",function(){return a.resetSections()}),P(14,Lo,2,2,"mat-option",7,Oi),o()(),v(16,Wo,13,3,"mat-form-field",4),o()(),s(17,"mat-dialog-actions")(18,"button",8),_("click",function(){return a.close()}),c(19,"Cancel"),o(),s(20,"button",9),_("click",function(){return a.submit()}),c(21," Create "),o()()),n&2&&(l(9),d("formControl",a.title),l(4),d("formControl",a.selectedTerm),l(),H(a.myCoursesService.allTerms()),l(2),x(a.selectedTerm.value?16:-1),l(4),d("disabled",!a.formIsValid()))},dependencies:[R,pe,ue,me,Pe,ve,ye,ge,U,Se,Me,Ce,vt,je,Ie,Ge,Oe,ii,ni,Kt,ei,De,Mt,kt],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%;margin-top:8px}"]});let e=i;return e})();var $o=(e,i)=>i.number;function zo(e,i){if(e&1&&(s(0,"p",3),c(1),o()),e&2){let t=i.$implicit,r=m();l(),$(" ",r.course.sections.length>1?"Sec "+t.number+": ":"","",t.meeting_pattern," ")}}function Qo(e,i){if(e&1&&(s(0,"button",5),c(1," Get Help "),o()),e&2){let t=m();d("routerLink","/course/"+t.course.id+"/office-hours")}}function Uo(e,i){if(e&1&&(s(0,"button",6),c(1," Hiring "),o()),e&2){let t=m(2);d("routerLink","/hiring/"+t.course.id+"/preferences")}}function Yo(e,i){if(e&1&&(v(0,Uo,2,1,"button",6),s(1,"button",5),c(2," Manage "),o()),e&2){let t=m();x(t.course.role==="Instructor"?0:-1),l(),d("routerLink","/course/"+t.course.id+"/office-hours")}}var oo=(()=>{let i=class i{constructor(){}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=M({type:i,selectors:[["course-card"]],inputs:{termId:"termId",course:"course"},standalone:!1,decls:12,vars:7,consts:[["appearance","outlined"],[1,"title-medium"],[1,"title-small","course-title"],[1,"meeting-pattern-text"],[1,"course-card-actions"],["mat-flat-button","","color","primary","type","submit",3,"routerLink"],["mat-stroked-button","","color","primary","type","submit",3,"routerLink"]],template:function(n,a){n&1&&(s(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),c(3),o(),s(4,"mat-card-subtitle",2),c(5),o()(),s(6,"mat-card-content"),P(7,zo,2,2,"p",3,$o),o(),s(9,"mat-card-actions",4),v(10,Qo,2,1,"button",5)(11,Yo,3,2),o()()),n&2&&(qt("course-card "+(a.course.role!=="Student"&&"surface-container-card")),l(3),ce(" ",a.course.subject_code," ",a.course.number,"",a.course.role==="Student"?"-"+a.course.sections[0].number:""," "),l(2),y(a.course.title),l(2),H(a.course.sections),l(3),x(a.course.role==="Student"?10:11))},dependencies:[qe,ee,de,V,B,Z,L,R],styles:[".course-card{max-width:300px!important;margin:0!important}.course-title[_ngcontent-%COMP%]{width:268px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.course-card-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px;justify-content:end;padding-top:16px;padding-bottom:16px}.meeting-pattern-text[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}"]});let e=i;return e})();var mi=(e,i)=>i.id;function Zo(e,i){if(e&1){let t=S();s(0,"button",7),_("click",function(){g(t);let n=m();return C(n.createCourseSite())}),c(1," Create Course Site "),o()}}function Xo(e,i){if(e&1&&f(0,"course-card",10),e&2){let t=i.$implicit;d("termId",t.termId)("course",t)}}function Ko(e,i){if(e&1&&(s(0,"h2",8),c(1,"Instructor Courses"),o(),s(2,"div",9),P(3,Xo,1,2,"course-card",10,mi),o()),e&2){let t=m();l(3),H(t.getInstructorCourses())}}function er(e,i){if(e&1&&f(0,"course-card",10),e&2){let t=i.$implicit;d("termId",t.termId)("course",t)}}function tr(e,i){if(e&1&&(s(0,"h2",8),c(1,"Student Courses"),o(),s(2,"div",9),P(3,er,1,2,"course-card",10,mi),o()),e&2){let t=m();l(3),H(t.getStudentCourses())}}function ir(e,i){e&1&&(s(0,"div",5)(1,"p",11)(2,"strong"),c(3,"You are not in any courses yet!"),o()(),s(4,"p"),c(5,"If you are a student enrolled in a course that uses the CSXL site for office hours, please contact your instructor to be added into the course."),o()())}function nr(e,i){if(e&1&&f(0,"course-card",10),e&2){let t=i.$implicit,r=m().$implicit;d("termId",r.id)("course",t)}}function or(e,i){if(e&1&&(s(0,"h3",8),c(1),o(),s(2,"div",9),P(3,nr,1,2,"course-card",10,mi),o()),e&2){let t=i.$implicit,r=m(2);l(),y(t.name),l(2),H(r.getPastCourses(t))}}function rr(e,i){if(e&1){let t=S();P(0,or,5,1,null,null,mi),s(2,"button",12),_("click",function(){g(t);let n=m();return C(n.showPreviousCourses.set(!1))}),c(3,"Hide Past Courses"),o()}if(e&2){let t=m();H(t.myCoursesService.pastTerms())}}function ar(e,i){if(e&1){let t=S();s(0,"button",12),_("click",function(){g(t);let n=m();return C(n.showPreviousCourses.set(!0))}),c(1,"View Past Courses"),o()}}var ro=(()=>{let i=class i{constructor(r,n,a){this.myCoursesService=r,this.router=n,this.dialog=a,this.showPreviousCourses=D(!1)}createCourseSite(){this.dialog.open(no,{height:"560px",width:"620px",data:this.myCoursesService.allTerms()})}getActiveTermNames(){return this.myCoursesService.currentTerms().map(r=>r.name).join(", ")}hasInstructorCourses(){return this.myCoursesService.currentTerms().some(r=>r.sites.some(n=>n.role!=="Student"))}hasStudentCourses(){return this.myCoursesService.currentTerms().some(r=>r.sites.some(n=>n.role==="Student"))}getInstructorCourses(){return this.myCoursesService.currentTerms().flatMap(r=>r.sites.filter(n=>n.role!=="Student").map(n=>Nt(At({},n),{termId:r.id})))}getStudentCourses(){return this.myCoursesService.currentTerms().flatMap(r=>r.sites.filter(n=>n.role==="Student").map(n=>Nt(At({},n),{termId:r.id})))}getPastCourses(r){return r.sites.sort((n,a)=>n.role!=="Student"&&a.role==="Student"?-1:n.role==="Student"&&a.role!=="Student"?1:0).map(n=>Nt(At({},n),{termId:r.id}))}};i.Route={path:"my-courses",title:"My Courses",component:i},i.\u0275fac=function(n){return new(n||i)(p(T),p(le),p(Te))},i.\u0275cmp=M({type:i,selectors:[["app-my-courses-page"]],standalone:!1,decls:16,vars:6,consts:[[1,"container"],["id","pane-header"],[1,"header-buttons"],["mat-stroked-button","","color","secondary","routerLink","/catalog/offerings"],["mat-flat-button","","color","tertiary"],[1,"no-courses-content"],["id","more-courses-button","mat-button","","color","secondary"],["mat-flat-button","","color","tertiary",3,"click"],[1,"title-medium","term-header"],[1,"course-card-container"],[3,"termId","course"],[1,"tertiary-color"],["id","more-courses-button","mat-button","","color","secondary",3,"click"]],template:function(n,a){n&1&&(s(0,"div",0)(1,"mat-pane")(2,"mat-card-header",1)(3,"mat-card-title"),c(4),o(),s(5,"div",2)(6,"button",3),c(7," View Catalog "),o(),v(8,Zo,2,0,"button",4),o()(),s(9,"mat-card-content"),f(10,"mat-divider"),v(11,Ko,5,0),v(12,tr,5,0),v(13,ir,6,0,"div",5),v(14,rr,4,0)(15,ar,2,0,"button",6),o()()()),n&2&&(l(4),y(a.getActiveTermNames()),l(4),x(a.myCoursesService.teachingCoursesWithNoSite()?8:-1),l(3),x(a.hasInstructorCourses()?11:-1),l(),x(a.hasStudentCourses()?12:-1),l(),x(!a.hasInstructorCourses()&&!a.hasStudentCourses()?13:-1),l(),x(a.showPreviousCourses()?14:a.myCoursesService.pastTerms().length>0?15:-1))},dependencies:[qe,X,V,B,L,fe,R,oo],styles:[".mat-pane{margin-right:32px!important}.container[_ngcontent-%COMP%]{height:100%}.container[_ngcontent-%COMP%]     .mat-pane{max-width:100%!important;min-height:calc(100vh - 112px);margin-bottom:32px!important}#pane-header[_ngcontent-%COMP%]{align-items:center!important;padding-bottom:16px!important}.header-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-left:auto;gap:12px}.course-card-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;row-gap:24px;column-gap:24px}#more-courses-button[_ngcontent-%COMP%]{margin-top:12px}.term-header[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px}@media only screen and (max-width: 640px){#pane-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:start!important}.header-buttons[_ngcontent-%COMP%]{margin-left:0;margin-top:8px;flex-direction:column;align-items:start!important}}.no-courses-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:20px}"]});let e=i;return e})();var ao=(()=>{let i=class i{constructor(){this.links=[{label:"Current Offerings",path:"/catalog/offerings",icon:"overview"},{label:"All Courses",path:"/catalog/all",icon:"list_alt"}]}};i.Route={path:"catalog",title:"Catalog",component:i},i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=M({type:i,selectors:[["app-catalog"]],standalone:!1,decls:1,vars:1,consts:[[3,"links"]],template:function(n,a){n&1&&f(0,"tab-container",0),n&2&&d("links",a.links)},dependencies:[oi],encapsulation:2});let e=i;return e})();var lr=()=>["expandedDetail"];function dr(e,i){e&1&&(s(0,"th",12),c(1,"Code"),o())}function mr(e,i){if(e&1&&(s(0,"td",13),c(1),o()),e&2){let t=i.$implicit;l(),$(" ",t.subject_code," ",t.number," ")}}function ur(e,i){e&1&&(s(0,"th",12),c(1,"Title"),o())}function pr(e,i){if(e&1&&(s(0,"td",13),c(1),o()),e&2){let t=i.$implicit;l(),y(t.title)}}function fr(e,i){e&1&&(s(0,"th",14),c(1," \xA0 "),o())}function _r(e,i){e&1&&(s(0,"mat-icon"),c(1,"keyboard_arrow_up"),o())}function hr(e,i){e&1&&(s(0,"mat-icon"),c(1,"keyboard_arrow_down"),o())}function gr(e,i){if(e&1){let t=S();s(0,"td",13)(1,"div",15)(2,"button",16),_("click",function(n){let a=g(t).$implicit,u=m();return u.expandedElement=u.expandedElement===a?null:a,C(n.stopPropagation())}),I(3,_r,2,0,"mat-icon",17)(4,hr,2,0,"mat-icon",17),o()()()}if(e&2){let t=i.$implicit,r=m();l(3),d("ngIf",r.expandedElement===t),l(),d("ngIf",r.expandedElement!==t)}}function Cr(e,i){if(e&1&&(s(0,"td",13)(1,"div",18)(2,"div")(3,"p")(4,"strong"),c(5,"Credit Hours:"),o(),c(6),o(),s(7,"p")(8,"strong"),c(9,"Description:"),o()(),s(10,"p"),c(11),o()()()()),e&2){let t=i.$implicit,r=m();st("colspan",r.columnsToDisplayWithExpand.length),l(),d("@detailExpand",t===r.expandedElement?"expanded":"collapsed"),l(5),k(" ",t.credit_hours),l(5),y(t.description)}}function vr(e,i){e&1&&f(0,"tr",19)}function xr(e,i){if(e&1){let t=S();s(0,"tr",20),_("click",function(){let n=g(t).$implicit,a=m();return C(a.expandedElement=a.expandedElement===n?null:n)}),o()}if(e&2){let t=i.$implicit,r=m();be("example-expanded-row",r.expandedElement===t)}}function br(e,i){e&1&&f(0,"tr",21)}var co=(()=>{let i=class i{constructor(r,n,a){this.route=r,this.academicsService=n,this.gearService=a,this.displayedColumns=["code","title"],this.columnsToDisplayWithExpand=[...this.displayedColumns,"expand"],this.expandedElement=null;let u=this.route.snapshot.data;this.courses=u.courses}ngOnInit(){this.gearService.showAdminGearByPermissionCheck("academics.*","*","","academics/admin/course")}};i.Route={path:"all",title:"Catalog",component:i,canActivate:[],resolve:{courses:Un}},i.\u0275fac=function(n){return new(n||i)(p(Q),p(ri),p(wt))},i.\u0275cmp=M({type:i,selectors:[["app-courses-home"]],standalone:!1,decls:20,vars:5,consts:[["appearance","outlined",1,"content"],["mat-table","","multiTemplateDataRows","",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","expand"],["mat-header-cell","","aria-label","row actions",4,"matHeaderCellDef"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",3,"example-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","aria-label","row actions"],[2,"display","flex","flex-direction","row-reverse"],["mat-icon-button","","aria-label","expand row",3,"click"],[4,"ngIf"],[1,"example-element-detail"],["mat-header-row",""],["mat-row","",1,"example-element-row",3,"click"],["mat-row","",1,"example-detail-row"]],template:function(n,a){n&1&&(s(0,"mat-pane",0)(1,"mat-card-header")(2,"mat-card-title"),c(3,"All Courses"),o()(),s(4,"mat-card-content")(5,"table",1),A(6,2),I(7,dr,2,0,"th",3)(8,mr,2,2,"td",4),N(),A(9,5),I(10,ur,2,0,"th",3)(11,pr,2,1,"td",4),N(),A(12,6),I(13,fr,2,0,"th",7)(14,gr,5,2,"td",4),N(),A(15,8),I(16,Cr,12,4,"td",4),N(),I(17,vr,1,0,"tr",9)(18,xr,1,2,"tr",10)(19,br,1,0,"tr",11),o()()()),n&2&&(l(5),d("dataSource",a.courses),l(12),d("matHeaderRowDef",a.columnsToDisplayWithExpand),l(),d("matRowDefColumns",a.columnsToDisplayWithExpand),l(),d("matRowDefColumns",z(4,lr)))},dependencies:[Gt,X,V,B,L,ke,pe,We,ze,Je,Qe,$e,Ze,Ue,Ye,Xe,Ke],styles:[".mat-mdc-card-outlined{max-width:100%!important;margin-right:32px!important}tr.example-detail-row[_ngcontent-%COMP%]{height:0}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}"],data:{animation:[zt("detailExpand",[Ct("collapsed,void",gt({height:"0px",minHeight:"0"})),Ct("expanded",gt({height:"*"})),Ut("expanded <=> collapsed",Qt("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}});let e=i;return e})();var Sr=()=>["expandedDetail"],yr=(e,i)=>i.id;function Mr(e,i){if(e&1&&(s(0,"mat-option",3),c(1),o()),e&2){let t=i.$implicit;d("value",t.id),l(),y(t.name)}}function kr(e,i){e&1&&(s(0,"th",19),c(1,"Code"),o())}function wr(e,i){if(e&1&&(s(0,"td",20),c(1),o()),e&2){let t=i.$implicit;l(),ce(" ",t.subject_code," ",t.course_number," - ",t.section_number," ")}}function Er(e,i){e&1&&(s(0,"th",19),c(1,"Title"),o())}function Tr(e,i){if(e&1&&(s(0,"td",20),c(1),o()),e&2){let t=i.$implicit;l(),k(" ",t.title," ")}}function Ir(e,i){e&1&&(s(0,"th",19),c(1,"Instructor(s)"),o())}function Or(e,i){if(e&1&&(s(0,"td",20),c(1),o()),e&2){let t=i.$implicit,r=m();l(),k(" ",r.instructorNameForSection(t)," ")}}function Dr(e,i){e&1&&(s(0,"th",19),c(1,"Meeting Pattern"),o())}function Pr(e,i){if(e&1&&(s(0,"td",20),c(1),o()),e&2){let t=i.$implicit;l(),k(" ",t.meeting_pattern," ")}}function Hr(e,i){e&1&&(s(0,"th",19),c(1,"Room"),o())}function Fr(e,i){if(e&1&&(s(0,"td",20),c(1),o()),e&2){let t=i.$implicit;l(),k(" ",(t.lecture_room==null?null:t.lecture_room.nickname)??"Unknown"," ")}}function Rr(e,i){e&1&&(s(0,"th",19),c(1,"Enrolled"),o())}function Vr(e,i){e&1&&c(0," Unknown ")}function Br(e,i){if(e&1&&c(0),e&2){let t=m().$implicit;$(" ",t.enrolled," / ",t.total_seats," ")}}function Ar(e,i){if(e&1&&(s(0,"td",20),v(1,Vr,1,0)(2,Br,1,2),o()),e&2){let t=i.$implicit;l(),x(t.total_seats<=0?1:2)}}function Nr(e,i){e&1&&(s(0,"th",21),c(1," \xA0 "),o())}function Lr(e,i){e&1&&(s(0,"mat-icon"),c(1,"keyboard_arrow_up"),o())}function qr(e,i){e&1&&(s(0,"mat-icon"),c(1,"keyboard_arrow_down"),o())}function jr(e,i){if(e&1){let t=S();s(0,"td",20)(1,"div",22)(2,"button",23),_("click",function(n){let a=g(t).$implicit,u=m();return u.expandedElement=u.expandedElement===a?null:a,C(n.stopPropagation())}),I(3,Lr,2,0,"mat-icon",24)(4,qr,2,0,"mat-icon",24),o()()()}if(e&2){let t=i.$implicit,r=m();l(3),d("ngIf",r.expandedElement===t),l(),d("ngIf",r.expandedElement!==t)}}function Gr(e,i){if(e&1&&(s(0,"td",20)(1,"div",25)(2,"p"),c(3),o()()()),e&2){let t=i.$implicit,r=m();st("colspan",r.columnsToDisplayWithExpand.length),l(),d("@detailExpand",t===r.expandedElement?"expanded":"collapsed"),l(2),k(" ",t.description," ")}}function Wr(e,i){e&1&&f(0,"tr",26)}function $r(e,i){if(e&1){let t=S();s(0,"tr",27),_("click",function(){let n=g(t).$implicit,a=m();return C(a.expandedElement=a.expandedElement===n?null:n)}),o()}if(e&2){let t=i.$implicit,r=m();be("example-expanded-row",r.expandedElement===t)}}function zr(e,i){e&1&&f(0,"tr",28)}var lo=(()=>{let i=class i{constructor(r,n,a){this.route=r,this.academicsService=n,this.gearService=a,this.sections=D([]),this.displayedColumns=["code","title","instructor","meetingpattern","room","enrollment"],this.columnsToDisplayWithExpand=[...this.displayedColumns,"expand"],this.expandedElement=null;let u=this.route.snapshot.data;this.terms=u.terms,this.displayTermId=u.currentTerm.id??null,this.displayTerm=D(this.selectedTerm()),this.resetSections()}ngOnInit(){this.gearService.showAdminGearByPermissionCheck("academics.*","*","","academics/admin/section")}instructorNameForSection(r){if(!r.instructors||r.instructors.length==0)return"Unknown";let n="";for(let a of r.instructors)n+=a.first_name+" "+a.last_name+", ";return n.substring(0,n.length-2)}selectedTerm(){return this.terms.find(r=>r.id==this.displayTermId)}resetSections(){this.displayTerm.set(this.selectedTerm()),this.displayTerm()&&this.academicsService.getSectionsByTerm(this.displayTerm()).subscribe(r=>{this.sections.set(r)})}};i.Route={path:"offerings",title:"Catalog",component:i,canActivate:[],resolve:{terms:Yn,currentTerm:Jn}},i.\u0275fac=function(n){return new(n||i)(p(Q),p(ri),p(wt))},i.\u0275cmp=M({type:i,selectors:[["app-offerings"]],standalone:!1,decls:39,vars:7,consts:[["appearance","outlined",1,"content"],["appearance","outline",1,"term-selector"],[3,"ngModelChange","selectionChange","ngModel"],[3,"value"],["mat-table","","multiTemplateDataRows","",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","instructor"],["matColumnDef","meetingpattern"],["matColumnDef","room"],["matColumnDef","enrollment"],["matColumnDef","expand"],["mat-header-cell","","aria-label","row actions",4,"matHeaderCellDef"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",3,"example-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","aria-label","row actions"],[2,"display","flex","flex-direction","row-reverse"],["mat-icon-button","","aria-label","expand row",3,"click"],[4,"ngIf"],[1,"example-element-detail"],["mat-header-row",""],["mat-row","",1,"example-element-row",3,"click"],["mat-row","",1,"example-detail-row"]],template:function(n,a){n&1&&(s(0,"mat-pane",0)(1,"mat-card-header")(2,"mat-card-title"),c(3),o(),s(4,"mat-form-field",1)(5,"mat-label"),c(6,"Select Term"),o(),s(7,"mat-select",2),oe("ngModelChange",function(h){return ne(a.displayTermId,h)||(a.displayTermId=h),h}),_("selectionChange",function(){return a.resetSections()}),P(8,Mr,2,2,"mat-option",3,yr),o()()(),s(10,"mat-card-content")(11,"mat-card-content")(12,"table",4),A(13,5),I(14,kr,2,0,"th",6)(15,wr,2,3,"td",7),N(),A(16,8),I(17,Er,2,0,"th",6)(18,Tr,2,1,"td",7),N(),A(19,9),I(20,Ir,2,0,"th",6)(21,Or,2,1,"td",7),N(),A(22,10),I(23,Dr,2,0,"th",6)(24,Pr,2,1,"td",7),N(),A(25,11),I(26,Hr,2,0,"th",6)(27,Fr,2,1,"td",7),N(),A(28,12),I(29,Rr,2,0,"th",6)(30,Ar,3,1,"td",7),N(),A(31,13),I(32,Nr,2,0,"th",14)(33,jr,5,2,"td",7),N(),A(34,15),I(35,Gr,4,3,"td",7),N(),I(36,Wr,1,0,"tr",16)(37,$r,1,2,"tr",17)(38,zr,1,0,"tr",18),o()()()()),n&2&&(l(3),k(" ",a.displayTerm()?a.displayTerm().name+" ":""," Course Offerings "),l(4),ie("ngModel",a.displayTermId),l(),H(a.terms),l(4),d("dataSource",a.sections()),l(24),d("matHeaderRowDef",a.columnsToDisplayWithExpand),l(),d("matRowDefColumns",a.columnsToDisplayWithExpand),l(),d("matRowDefColumns",z(6,Sr)))},dependencies:[Gt,X,V,B,L,ke,pe,We,ze,Je,Qe,$e,Ze,Ue,Ye,Xe,Ke,ue,me,Pe,ve,U,Ce],styles:[".mat-mdc-card-outlined{max-width:100%!important;margin-right:32px!important}tr.example-detail-row[_ngcontent-%COMP%]{height:0}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.term-selector[_ngcontent-%COMP%]{margin-left:auto;width:260px;margin-bottom:-1.25em}.mat-mdc-card-header[_ngcontent-%COMP%]{align-items:center}"],data:{animation:[zt("detailExpand",[Ct("collapsed,void",gt({height:"0px",minHeight:"0"})),Ct("expanded",gt({height:"*"})),Ut("expanded <=> collapsed",Qt("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}});let e=i;return e})();var mo=(()=>{let i=class i{constructor(r,n,a,u){this.route=r,this.myCoursesService=n,this.http=a,this.gearService=u,this.isStaff=D(!1),this.isInstructor=D(!1),this.officeHoursLink={label:"Office Hours",path:`/course/${this.route.snapshot.params.course_site_id}/office-hours`,icon:"person_raised_hand"},this.statisticsLink={label:"Statistics",path:`/course/${this.route.snapshot.params.course_site_id}/statistics`,icon:"analytics"},this.rosterLink={label:"Roster",path:`/course/${this.route.snapshot.params.course_site_id}/roster`,icon:"groups"},this.settingsLink={label:"Settings",path:`/course/${this.route.snapshot.params.course_site_id}/settings`,icon:"settings"},this.links=Pt(()=>this.isInstructor()?[this.officeHoursLink,this.statisticsLink,this.rosterLink,this.settingsLink]:this.isStaff()?[this.officeHoursLink,this.statisticsLink,this.rosterLink]:[this.officeHoursLink,this.rosterLink]);let h=+this.route.snapshot.params.course_site_id;this.http.get("/api/my-courses").pipe(Re(ai)).subscribe(b=>{let O=b.flatMap(j=>j.sites).find(j=>j.id===h)?.role;this.isStaff.set(O=="UTA"||O=="GTA"||O=="Instructor"),this.isInstructor.set(O=="Instructor"),this.isInstructor()&&this.gearService.showAdminGear("Course Settings",`/course/${h}/settings`)})}};i.\u0275fac=function(n){return new(n||i)(p(Q),p(T),p(Wt),p(wt))},i.\u0275cmp=M({type:i,selectors:[["app-course"]],standalone:!1,decls:1,vars:1,consts:[[3,"links"]],template:function(n,a){n&1&&f(0,"tab-container",0),n&2&&d("links",a.links())},dependencies:[oi],encapsulation:2});let e=i;return e})();var Qr=(e,i)=>i.number;function Ur(e,i){if(e&1&&(s(0,"mat-option",5),c(1),o()),e&2){let t=i.$implicit;d("value",t),l(),k("Section ",t.number)}}var uo=(()=>{let i=class i{constructor(r,n,a,u,h){this.dialogRef=r,this.data=n,this.myCoursesService=a,this.router=u,this.snackBar=h,this.file=null,this.selectedSection=new F(n.sections[0])}uploadFile(r){let n=r.target.files[0];n&&(this.file=n)}clearFile(){this.file=null}close(){this.dialogRef.close()}submit(){if(this.file&&this.selectedSection){var r=new FileReader;r.readAsText(this.file,"UTF-8"),r.onload=n=>{let a=n.target?.result??"";this.myCoursesService.importRosterFromCanvasCSV(this.selectedSection.value.id,a).subscribe({next:u=>{this.snackBar.open(`Imported ${u.uploaded} students.`,"",{duration:5e3}),this.close()},error:u=>this.snackBar.open("Error: "+u.error.detail,"",{duration:2e3})})},r.onerror=n=>{this.snackBar.open("Error reading the CSV file.","",{duration:2e3})}}}};i.\u0275fac=function(n){return new(n||i)(p(we),p(Ee),p(T),p(le),p(Y))},i.\u0275cmp=M({type:i,selectors:[["dialog-import-roster"]],standalone:!1,decls:40,vars:3,consts:[["csvInput",""],["mat-dialog-title",""],[1,"semibold"],["appearance","outline",1,"section-selector"],[3,"selectionChange","formControl"],[3,"value"],["id","file-input","placeholder","Enter the title for the course site.","type","file","accept",".csv",3,"change"],[1,"file-input-container"],["id","choose-file-button","mat-flat-button","","color","primary",3,"click"],["mat-stroked-button","","color","secondary",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"]],template:function(n,a){if(n&1){let u=S();s(0,"h2",1),c(1,"Import From Canvas"),o(),s(2,"mat-dialog-content")(3,"form")(4,"p"),c(5," Add students to a course section by importing the roster CSV from Canvas. "),o(),s(6,"p")(7,"strong",2),c(8,"Steps to Download Roster CSV:"),o()(),s(9,"ol")(10,"li"),c(11,'Navigate to the "Grades" tab in your Canvas course page.'),o(),s(12,"li")(13,"em"),c(14,"Filter"),o(),c(15," your gradebook to include just one section. If you have two or more sections in your class, you will want to export these from Canvas and import this into the CSXL website separately."),o(),s(16,"li"),c(17,'On the top right, press the dropdown "Export".'),o(),s(18,"li"),c(19,'Select "Export Current Gradebook View".'),o(),s(20,"li"),c(21,"Now, fill in the prompts below to upload your roster into the CSXL site."),o()(),s(22,"mat-form-field",3)(23,"mat-label"),c(24,"Select Section to Import Into"),o(),s(25,"mat-select",4),_("selectionChange",function(){return g(u),C(a.clearFile())}),P(26,Ur,2,2,"mat-option",5,Qr),o()(),s(28,"input",6,0),_("change",function(b){return g(u),C(a.uploadFile(b))}),o(),s(30,"div",7)(31,"p"),c(32),o(),s(33,"button",8),_("click",function(){g(u);let b=K(29);return C(b.click())}),c(34," Select File "),o()()()(),s(35,"mat-dialog-actions")(36,"button",9),_("click",function(){return g(u),C(a.close())}),c(37,"Cancel"),o(),s(38,"button",10),_("click",function(){return g(u),C(a.submit())}),c(39," Import "),o()()}n&2&&(l(25),d("formControl",a.selectedSection),l(),H(a.data.sections),l(6),y(a.file?a.file.name:"No file selected."),l(6),d("disabled",!a.file))},dependencies:[R,ue,me,Pe,ve,ye,U,Se,vt,je,Ie,Ge,Oe],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%;margin-top:8px}#file-input[_ngcontent-%COMP%]{display:none}.file-input-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;align-items:center;padding-left:16px;margin-top:16px}.file-input-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0}#choose-file-button[_ngcontent-%COMP%]{margin-left:auto;margin-right:16px}.semibold[_ngcontent-%COMP%]{font-weight:500}.section-selector[_ngcontent-%COMP%]{margin-top:16px}"]});let e=i;return e})();var fo=Ri(eo());var Yr=()=>[];function Jr(e,i){if(e&1){let t=S();s(0,"button",22),_("click",function(){g(t);let n=m();return C(n.importFromCanvas())}),c(1," Import From Canvas "),o()}}function Zr(e,i){e&1&&(s(0,"th",23),c(1,"Section"),o())}function Xr(e,i){if(e&1&&(s(0,"td",24),c(1),o()),e&2){let t=i.$implicit;l(),k(" ",t.section_number," ")}}function Kr(e,i){e&1&&(s(0,"th",23),c(1,"Name"),o())}function ea(e,i){if(e&1&&(s(0,"span",25),c(1),o()),e&2){let t=m().$implicit;l(),k("(",t.pronouns,")")}}function ta(e,i){if(e&1&&(s(0,"td",24),c(1),v(2,ea,2,1,"span",25),o()),e&2){let t=i.$implicit;l(),$(" ",t.first_name," ",t.last_name," "),l(),x(t.pronouns&&t.pronouns!==""?2:-1)}}function ia(e,i){e&1&&(s(0,"th",23),c(1,"PID"),o())}function na(e,i){if(e&1&&(s(0,"td",24),c(1),o()),e&2){let t=i.$implicit;l(),y(t.pid)}}function oa(e,i){e&1&&(s(0,"th",23),c(1,"Email"),o())}function ra(e,i){if(e&1){let t=S();s(0,"td",24)(1,"div",26),c(2),s(3,"button",27),_("click",function(){let n=g(t).$implicit,a=m();return C(a.copyToClipboard(n.email))}),s(4,"mat-icon"),c(5,"content_copy"),o()()()()}if(e&2){let t=i.$implicit;l(2),k(" ",t.email," ")}}function aa(e,i){e&1&&(s(0,"th",23),c(1,"Role"),o())}function sa(e,i){if(e&1&&(s(0,"td",24),c(1),o()),e&2){let t=i.$implicit;l(),y(t.role)}}function ca(e,i){e&1&&f(0,"th",23)}function la(e,i){if(e&1){let t=S();s(0,"td",28)(1,"button",29)(2,"mat-icon"),c(3,"more_vert"),o()(),s(4,"mat-menu",30,0)(6,"button",31),_("click",function(){let n=g(t).$implicit,a=m();return C(a.openUserStatistics(n))}),s(7,"mat-icon"),c(8,"equalizer"),o(),s(9,"span"),c(10,"View Statistics"),o()()()()}if(e&2){let t=K(5);l(),d("matMenuTriggerFor",t)}}function da(e,i){e&1&&f(0,"tr",32)}function ma(e,i){e&1&&f(0,"tr",33)}var _o=(()=>{let i=class i{constructor(r,n,a,u,h){this.route=r,this.router=n,this.dialog=a,this.myCoursesService=u,this.snackBar=h,this.rosterPage=D(void 0),this.previousParams=Rt,this.displayedColumns=["section","name","role"],this.searchBarQuery=D(""),this.searchBarEffect=Ht(()=>{let b=this.previousParams;b.filter=this.searchBarQuery(),this.rosterPaginator.loadPage(b).subscribe(O=>{this.rosterPage.set(O),this.previousParams=b})}),this.courseSiteId=this.route.parent.snapshot.params.course_site_id,this.rosterPaginator=new Vt(`/api/my-courses/${this.courseSiteId}/roster`),this.rosterPaginator.loadPage(this.previousParams).subscribe(b=>{this.rosterPage.set(b)}),this.myCoursesService.getTermOverviews().subscribe(b=>{b.flatMap(j=>j.sites).find(j=>j.id==+this.courseSiteId)?.role!=="Student"&&(this.displayedColumns=["section","name","pid","email","role","actions"])})}handlePageEvent(r){let n=this.rosterPage().params;n.page=r.pageIndex,n.page_size=r.pageSize,this.rosterPaginator.loadPage(n).subscribe(a=>{this.rosterPage.set(a),this.previousParams=n})}importFromCanvas(){this.dialog.open(uo,{height:"540px",width:"600px",data:this.myCoursesService.courseOverview(this.route.parent.snapshot.params.course_site_id)}).afterClosed().subscribe(n=>{this.rosterPaginator.loadPage(this.previousParams).subscribe(a=>{this.rosterPage.set(a)})})}copyToClipboard(r){navigator.clipboard.writeText(r).then(()=>{this.snackBar.open("Copied to clipboard","",{duration:2e3})})}downloadCourseRoster(){this.myCoursesService.getCourseRosterCsv(this.courseSiteId).subscribe({next:r=>{(0,fo.saveAs)(r,"course-roster.csv"),this.snackBar.open("Course roster downloaded","",{duration:2e3})},error:()=>{this.snackBar.open("There was an error downloading the course roster.","",{duration:2e3})}})}openUserStatistics(r){let a=r.role==="Student"?"studentId":"staffId";this.router.navigate(["../statistics"],{relativeTo:this.route,queryParams:{[a]:r.id}})}};i.Route={path:"roster",title:"Course",component:i},i.\u0275fac=function(n){return new(n||i)(p(Q),p(le),p(Te),p(T),p(Y))},i.\u0275cmp=M({type:i,selectors:[["app-roster"]],standalone:!1,decls:35,vars:9,consts:[["menu","matMenu"],[1,"roster-search-bar","mat-csxl-search-bar",3,"searchBarQueryChange","searchBarQuery"],[1,"container"],["id","pane-header"],[1,"header-buttons"],["mat-stroked-button","","color","primary"],["mat-flat-button","",1,"secondary-button",3,"click"],["id","download-button-icon"],[1,"table-responsive"],["mat-table","",3,"dataSource"],["matColumnDef","section"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","pid"],["matColumnDef","email"],["matColumnDef","role"],["matColumnDef","actions"],["mat-cell","","class","more-items-cell",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"page","length","pageSize","pageIndex"],["mat-stroked-button","","color","primary",3,"click"],["mat-header-cell",""],["mat-cell",""],[1,"pronoun-labels"],[1,"email-container"],["mat-icon-button","",1,"copy-icon",3,"click"],["mat-cell","",1,"more-items-cell"],["mat-icon-button","",1,"more-items-action",3,"matMenuTriggerFor"],["xPosition","before"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,a){if(n&1&&(s(0,"search-bar",1),_("searchBarQueryChange",function(h){return a.searchBarQuery.set(h)}),o(),s(1,"div",2)(2,"mat-pane")(3,"mat-card-header",3)(4,"mat-card-title"),c(5,"Course Roster"),o(),s(6,"div",4),v(7,Jr,2,0,"button",5),s(8,"button",6),_("click",function(){return a.downloadCourseRoster()}),s(9,"mat-icon",7),c(10,"download"),o()()()(),s(11,"mat-card-content")(12,"div",8)(13,"table",9),A(14,10),I(15,Zr,2,0,"th",11)(16,Xr,2,1,"td",12),N(),A(17,13),I(18,Kr,2,0,"th",11)(19,ta,3,3,"td",12),N(),A(20,14),I(21,ia,2,0,"th",11)(22,na,2,1,"td",12),N(),A(23,15),I(24,oa,2,0,"th",11)(25,ra,6,1,"td",12),N(),A(26,16),I(27,aa,2,0,"th",11)(28,sa,2,1,"td",12),N(),A(29,17),I(30,ca,1,0,"th",11)(31,la,11,1,"td",18),N(),I(32,da,1,0,"tr",19)(33,ma,1,0,"tr",20),o(),s(34,"mat-paginator",21),_("page",function(h){return a.handlePageEvent(h)}),o()()()()()),n&2){let u,h,b,O,j;d("searchBarQuery",a.searchBarQuery()),l(7),x(((u=a.myCoursesService.courseOverview(+a.courseSiteId))==null?null:u.role)!=="Student"?7:-1),l(6),d("dataSource",((h=a.rosterPage())==null?null:h.items)??z(8,Yr)),l(19),d("matHeaderRowDef",a.displayedColumns),l(),d("matRowDefColumns",a.displayedColumns),l(),d("length",((b=a.rosterPage())==null?null:b.length)??0)("pageSize",((O=a.rosterPage())==null||O.params==null?null:O.params.page_size)??0)("pageIndex",((j=a.rosterPage())==null||j.params==null?null:j.params.page)??0)}},dependencies:[Vn,X,V,B,L,un,mn,pn,R,ke,pe,We,ze,Je,Qe,$e,Ze,Ue,Ye,Xe,Ke,St],styles:[".mat-pane{margin-right:32px!important}.container[_ngcontent-%COMP%]{height:100%}.container[_ngcontent-%COMP%]     .mat-pane{max-width:100%!important;min-height:73vh;margin-bottom:32px!important}.roster-search-bar[_ngcontent-%COMP%]     .mat-mdc-card{max-width:100%!important;margin-right:32px!important}#pane-header[_ngcontent-%COMP%]{align-items:center!important;padding-bottom:16px!important}.header-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-left:auto;gap:12px}#download-button-icon[_ngcontent-%COMP%]{margin-right:-8px}.email-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.copy-icon[_ngcontent-%COMP%]{opacity:0;transition:opacity .2s ease-in-out}.email-container[_ngcontent-%COMP%]:hover   .copy-icon[_ngcontent-%COMP%]{opacity:1}.more-items-cell[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;width:100%;height:52px}.more-items-action[_ngcontent-%COMP%]{margin-left:auto}"]});let e=i;return e})();var ua=["input"],pa=["formField"],fa=["*"],ui=class{source;value;constructor(i,t){this.source=i,this.value=t}},_a={provide:Ki,useExisting:Vi(()=>Pi),multi:!0},ho=new Si("MatRadioGroup"),ha=new Si("mat-radio-default-options",{providedIn:"root",factory:ga});function ga(){return{color:"accent",disabledInteractive:!1}}var Pi=(()=>{class e{_changeDetector=G(ki);_value=null;_name=G(Ei).getId("mat-radio-group-");_selected=null;_isInitialized=!1;_labelPosition="after";_disabled=!1;_required=!1;_buttonChanges;_controlValueAccessorChangeFn=()=>{};onTouched=()=>{};change=new Le;_radios;color;get name(){return this._name}set name(t){this._name=t,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(t){this._labelPosition=t==="before"?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(t){this._selected=t,this.value=t?t.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._markRadiosForCheck()}get required(){return this._required}set required(t){this._required=t,this._markRadiosForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(t){this._disabledInteractive=t,this._markRadiosForCheck()}_disabledInteractive=!1;constructor(){}ngAfterContentInit(){this._isInitialized=!0,this._buttonChanges=this._radios.changes.subscribe(()=>{this.selected&&!this._radios.find(t=>t===this.selected)&&(this._selected=null)})}ngOnDestroy(){this._buttonChanges?.unsubscribe()}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(t=>{t.name=this.name,t._markForCheck()})}_updateSelectedRadioFromValue(){let t=this._selected!==null&&this._selected.value===this._value;this._radios&&!t&&(this._selected=null,this._radios.forEach(r=>{r.checked=this.value===r.value,r.checked&&(this._selected=r)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new ui(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(t=>t._markForCheck())}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetector.markForCheck()}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Li({type:e,selectors:[["mat-radio-group"]],contentQueries:function(r,n,a){if(r&1&&$i(a,pi,5),r&2){let u;pt(u=ft())&&(n._radios=u)}},hostAttrs:["role","radiogroup",1,"mat-mdc-radio-group"],inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:[2,"disabled","disabled",Ve],required:[2,"required","required",Ve],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Ve]},outputs:{change:"change"},exportAs:["matRadioGroup"],features:[Ui([_a,{provide:ho,useExisting:e}])]})}return e})(),pi=(()=>{class e{_elementRef=G(yi);_changeDetector=G(ki);_focusMonitor=G(rn);_radioDispatcher=G(yn);_defaultOptions=G(ha,{optional:!0});_ngZone=G(qi);_renderer=G(Ni);_uniqueId=G(Ei).getId("mat-radio-");_cleanupClick;id=this._uniqueId;name;ariaLabel;ariaLabelledby;ariaDescribedby;disableRipple=!1;tabIndex=0;get checked(){return this._checked}set checked(t){this._checked!==t&&(this._checked=t,t&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!t&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),t&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,this.radioGroup!==null&&(this.checked||(this.checked=this.radioGroup.value===t),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(t){this._labelPosition=t}_labelPosition;get disabled(){return this._disabled||this.radioGroup!==null&&this.radioGroup.disabled}set disabled(t){this._setDisabled(t)}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(t){t!==this._required&&this._changeDetector.markForCheck(),this._required=t}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._defaultOptions&&this._defaultOptions.color||"accent"}set color(t){this._color=t}_color;get disabledInteractive(){return this._disabledInteractive||this.radioGroup!==null&&this.radioGroup.disabledInteractive}set disabledInteractive(t){this._disabledInteractive=t}_disabledInteractive;change=new Le;radioGroup;get inputId(){return`${this.id||this._uniqueId}-input`}_checked=!1;_disabled;_required;_value=null;_removeUniqueSelectionListener=()=>{};_previousTabIndex;_inputElement;_rippleTrigger;_noopAnimations=cn();_injector=G(Bi);constructor(){G(an).load(sn);let t=G(ho,{optional:!0}),r=G(new Yi("tabindex"),{optional:!0});this.radioGroup=t,this._disabledInteractive=this._defaultOptions?.disabledInteractive??!1,r&&(this.tabIndex=wi(r,0))}focus(t,r){r?this._focusMonitor.focusVia(this._inputElement,r,t):this._inputElement.nativeElement.focus(t)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name),this._removeUniqueSelectionListener=this._radioDispatcher.listen((t,r)=>{t!==this.id&&r===this.name&&(this.checked=!1)})}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{!t&&this.radioGroup&&this.radioGroup._touch()}),this._ngZone.runOutsideAngular(()=>{this._cleanupClick=this._renderer.listen(this._inputElement.nativeElement,"click",this._onInputClick)})}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new ui(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputInteraction(t){if(t.stopPropagation(),!this.checked&&!this.disabled){let r=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),r&&this.radioGroup._emitChangeEvent())}}_onTouchTargetClick(t){this._onInputInteraction(t),(!this.disabled||this.disabledInteractive)&&this._inputElement?.nativeElement.focus()}_setDisabled(t){this._disabled!==t&&(this._disabled=t,this._changeDetector.markForCheck())}_onInputClick=t=>{this.disabled&&this.disabledInteractive&&t.preventDefault()};_updateTabIndex(){let t=this.radioGroup,r;if(!t||!t.selected||this.disabled?r=this.tabIndex:r=t.selected===this?this.tabIndex:-1,r!==this._previousTabIndex){let n=this._inputElement?.nativeElement;n&&(n.setAttribute("tabindex",r+""),this._previousTabIndex=r,ji(()=>{queueMicrotask(()=>{t&&t.selected&&t.selected!==this&&document.activeElement===n&&(t.selected?._inputElement.nativeElement.focus(),document.activeElement===n&&this._inputElement.nativeElement.blur())})},{injector:this._injector}))}}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=M({type:e,selectors:[["mat-radio-button"]],viewQuery:function(r,n){if(r&1&&(Dt(ua,5),Dt(pa,7,yi)),r&2){let a;pt(a=ft())&&(n._inputElement=a.first),pt(a=ft())&&(n._rippleTrigger=a.first)}},hostAttrs:[1,"mat-mdc-radio-button"],hostVars:19,hostBindings:function(r,n){r&1&&_("focus",function(){return n._inputElement.nativeElement.focus()}),r&2&&(st("id",n.id)("tabindex",null)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),be("mat-primary",n.color==="primary")("mat-accent",n.color==="accent")("mat-warn",n.color==="warn")("mat-mdc-radio-checked",n.checked)("mat-mdc-radio-disabled",n.disabled)("mat-mdc-radio-disabled-interactive",n.disabledInteractive)("_mat-animation-noopable",n._noopAnimations))},inputs:{id:"id",name:"name",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],disableRipple:[2,"disableRipple","disableRipple",Ve],tabIndex:[2,"tabIndex","tabIndex",t=>t==null?0:wi(t)],checked:[2,"checked","checked",Ve],value:"value",labelPosition:"labelPosition",disabled:[2,"disabled","disabled",Ve],required:[2,"required","required",Ve],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",Ve]},outputs:{change:"change"},exportAs:["matRadioButton"],ngContentSelectors:fa,decls:13,vars:17,consts:[["formField",""],["input",""],["mat-internal-form-field","",3,"labelPosition"],[1,"mdc-radio"],[1,"mat-mdc-radio-touch-target",3,"click"],["type","radio","aria-invalid","false",1,"mdc-radio__native-control",3,"change","id","checked","disabled","required"],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mdc-label",3,"for"]],template:function(r,n){if(r&1){let a=S();Gi(),s(0,"div",2,0)(2,"div",3)(3,"div",4),_("click",function(h){return g(a),C(n._onTouchTargetClick(h))}),o(),s(4,"input",5,1),_("change",function(h){return g(a),C(n._onInputInteraction(h))}),o(),s(6,"div",6),f(7,"div",7)(8,"div",8),o(),s(9,"div",9),f(10,"div",10),o()(),s(11,"label",11),Wi(12),o()()}r&2&&(d("labelPosition",n.labelPosition),l(2),be("mdc-radio--disabled",n.disabled),l(2),d("id",n.inputId)("checked",n.checked)("disabled",n.disabled&&!n.disabledInteractive)("required",n.required),st("name",n.name)("value",n.value)("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledby)("aria-describedby",n.ariaDescribedby)("aria-disabled",n.disabled&&n.disabledInteractive?"true":null),l(5),d("matRippleTrigger",n._rippleTrigger.nativeElement)("matRippleDisabled",n._isRippleDisabled())("matRippleCentered",!0),l(2),d("for",n.inputId))},dependencies:[ln,En],styles:[`.mat-mdc-radio-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-radio-button .mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color;padding:calc((var(--mat-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:not([disabled]):not(:focus)~.mdc-radio__background::before{opacity:.04;transform:scale(1)}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:not([disabled])~.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-unselected-hover-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-selected-hover-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{background-color:var(--mat-radio-selected-hover-icon-color, var(--mat-sys-primary, currentColor))}.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-unselected-pressed-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-selected-pressed-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{background-color:var(--mat-radio-selected-pressed-icon-color, var(--mat-sys-primary, currentColor))}.mat-mdc-radio-button .mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mat-mdc-radio-button .mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:"";transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);width:var(--mat-radio-state-layer-size, 40px);height:var(--mat-radio-state-layer-size, 40px);top:calc(-1*(var(--mat-radio-state-layer-size, 40px) - 20px)/2);left:calc(-1*(var(--mat-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-radio-button .mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0);border-radius:50%;transition:transform 90ms cubic-bezier(0.4, 0, 0.6, 1),background-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}@media(forced-colors: active){.mat-mdc-radio-button .mdc-radio__inner-circle{background-color:CanvasText !important}}.mat-mdc-radio-button .mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;top:0;right:0;left:0;cursor:inherit;z-index:1;width:var(--mat-radio-state-layer-size, 40px);height:var(--mat-radio-state-layer-size, 40px)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__outer-circle{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__inner-circle{transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{cursor:default}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__inner-circle{background-color:var(--mat-radio-disabled-selected-icon-color, var(--mat-sys-on-surface, currentColor));opacity:var(--mat-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-unselected-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-selected-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{background-color:var(--mat-radio-selected-icon-color, var(--mat-sys-primary, currentColor))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-selected-focus-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background>.mdc-radio__inner-circle{background-color:var(--mat-radio-selected-focus-icon-color, var(--mat-sys-primary, currentColor))}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle{transform:scale(0.5);transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled{pointer-events:auto}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background>.mdc-radio__inner-circle{background-color:var(--mat-radio-disabled-selected-icon-color, var(--mat-sys-on-surface, currentColor));opacity:var(--mat-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-radio-button label{cursor:pointer}.mat-mdc-radio-button .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button.mat-mdc-radio-checked .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-checked .mdc-radio__background::before{background-color:var(--mat-radio-checked-ripple-color, var(--mat-sys-primary))}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mat-internal-form-field{color:var(--mat-radio-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-radio-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-radio-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-radio-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-radio-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-radio-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-radio-button .mdc-radio--disabled+label{color:var(--mat-radio-disabled-label-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-radio-button .mat-radio-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:50%}.mat-mdc-radio-button .mat-radio-ripple>.mat-ripple-element{opacity:.14}.mat-mdc-radio-button .mat-radio-ripple::before{border-radius:50%}.mat-mdc-radio-button .mdc-radio>.mdc-radio__native-control:focus:enabled:not(:checked)~.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-unselected-focus-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button.cdk-focused .mat-focus-indicator::before{content:""}.mat-mdc-radio-disabled{cursor:default;pointer-events:none}.mat-mdc-radio-disabled.mat-mdc-radio-disabled-interactive{pointer-events:auto}.mat-mdc-radio-touch-target{position:absolute;top:50%;left:50%;height:var(--mat-radio-touch-target-size, 48px);width:var(--mat-radio-touch-target-size, 48px);transform:translate(-50%, -50%);display:var(--mat-radio-touch-target-display, block)}[dir=rtl] .mat-mdc-radio-touch-target{left:auto;right:50%;transform:translate(50%, -50%)}
`],encapsulation:2,changeDetection:0})}return e})(),go=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=mt({type:e});static \u0275inj=dt({imports:[Ti,dn,pi,Ti]})}return e})();var Co=(()=>{let i=class i{constructor(r,n,a){this.dialogRef=r,this.data=n,this.myCoursesService=a,this.deleteAll=!1}confirm(){this.deleteAll?this.myCoursesService.deleteRecurringOfficeHours(this.data.siteId,this.data.officeHours.id).subscribe(()=>{this.close()}):this.myCoursesService.deleteOfficeHours(this.data.siteId,this.data.officeHours.id).subscribe(()=>{this.close()})}close(){this.dialogRef.close()}};i.\u0275fac=function(n){return new(n||i)(p(we),p(Ee),p(T))},i.\u0275cmp=M({type:i,selectors:[["dialog-delete-recurring-event"]],standalone:!1,decls:13,vars:3,consts:[["mat-dialog-title",""],[3,"ngModelChange","ngModel"],[3,"value"],["mat-stroked-button","","color","secondary",3,"click"],["mat-flat-button","","color","primary",3,"click"]],template:function(n,a){n&1&&(s(0,"h2",0),c(1,"Delete Recurring Event"),o(),s(2,"mat-dialog-content")(3,"mat-radio-group",1),oe("ngModelChange",function(h){return ne(a.deleteAll,h)||(a.deleteAll=h),h}),s(4,"mat-radio-button",2),c(5,"This event only"),o(),s(6,"mat-radio-button",2),c(7,"This and following events"),o()()(),s(8,"mat-dialog-actions")(9,"button",3),_("click",function(){return a.close()}),c(10,"Cancel"),o(),s(11,"button",4),_("click",function(){return a.confirm()}),c(12," Ok "),o()()),n&2&&(l(3),ie("ngModel",a.deleteAll),l(),d("value",!1),l(2),d("value",!0))},dependencies:[R,U,Ce,Ie,Ge,Oe,Pi,pi],encapsulation:2});let e=i;return e})();function va(e,i){if(e&1&&(s(0,"button",2),c(1," Edit "),o()),e&2){let t=m();d("routerLink",t.editRoute)}}var vo=(()=>{let i=class i{constructor(r){this.myCoursesService=r,this.editRoute="",this.role$=at("")}ngOnInit(){this.role$=this.myCoursesService.getOfficeHoursRole(this.event.id).pipe(Re(r=>r.role))}};i.\u0275fac=function(n){return new(n||i)(p(T))},i.\u0275cmp=M({type:i,selectors:[["office-hour-event-card"]],inputs:{event:"event",editRoute:"editRoute"},standalone:!1,decls:23,vars:21,consts:[["appearance","outlined",1,"office-hours-event-card"],[1,"office-hours-event-card-actions"],["mat-stroked-button","","color","secondary",3,"routerLink"],["mat-flat-button","","color","primary","type","submit",3,"routerLink"]],template:function(n,a){n&1&&(s(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-subtitle"),c(3),o(),s(4,"mat-chip-set")(5,"mat-chip"),c(6),o()()(),s(7,"mat-card-content")(8,"p"),c(9),w(10,"date"),w(11,"date"),o(),s(12,"p"),c(13),o(),s(14,"p"),c(15),o()(),s(16,"mat-card-actions",1),v(17,va,2,1,"button",2),w(18,"async"),s(19,"button",3),w(20,"async"),c(21),w(22,"async"),o()()()),n&2&&(l(3),y(a.event.type),l(3),k("",a.event.queued," waiting"),l(3),$(" ",E(10,9,a.event.start_time,"shortTime")," - ",E(11,12,a.event.end_time,"shortTime")," "),l(4),y(a.event.location),l(2),y(a.event.description),l(2),x(jt(18,15,a.role$)!=="Student"?17:-1),l(2),d("routerLink",a.event.id+(jt(20,17,a.role$)==="Student"?"/get-help":"/queue")),l(2),k(" ",jt(22,19,a.role$)==="Student"?"Get Help":"Check In"," "))},dependencies:[qe,ee,de,V,B,Z,R,bt,ti,Ji,J],styles:[".office-hours-event-card{max-width:380px!important;margin:0!important}.mat-mdc-card-header[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:center}.office-hours-event-card-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px;justify-content:end;padding-top:16px;padding-bottom:16px}.mat-mdc-chip-set[_ngcontent-%COMP%]{height:24px;margin-left:auto;margin-right:16px}.mat-mdc-chip[_ngcontent-%COMP%]{height:24px;margin:0 16px 0 0}p[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}"]});let e=i;return e})();var _i=()=>[],Sa=(e,i)=>i.id;function ya(e,i){e&1&&(s(0,"button",1),c(1," Create Event "),o())}function Ma(e,i){e&1&&(s(0,"p"),c(1,"Office hours are currently closed."),o())}function ka(e,i){if(e&1&&f(0,"office-hour-event-card",7),e&2){let t=i.$implicit;d("event",t)("editRoute",t.id+"/edit")}}function wa(e,i){e&1&&(s(0,"th",23),c(1,"Date"),o())}function Ea(e,i){if(e&1&&(s(0,"td",24),c(1),w(2,"date"),f(3,"br"),c(4),w(5,"date"),w(6,"date"),o()),e&2){let t=i.$implicit;l(),k(" ",E(2,3,t.start_time,"EEEE, M/d")),l(3),$(" ",E(5,6,t.start_time,"shortTime")," - ",E(6,9,t.end_time,"shortTime")," ")}}function Ta(e,i){e&1&&(s(0,"th",23),c(1,"Type"),o())}function Ia(e,i){if(e&1&&(s(0,"td",24)(1,"span",25),c(2),o(),f(3,"br"),c(4),o()),e&2){let t=i.$implicit;l(2),y(t.type),l(2),k(" ",t.location," ")}}function Oa(e,i){e&1&&f(0,"th",23)}function Da(e,i){if(e&1){let t=S();s(0,"td",26)(1,"div",27)(2,"button",28)(3,"mat-icon",29),c(4,"edit"),o()(),s(5,"button",30),_("click",function(){let n=g(t).$implicit,a=m(3);return C(a.deleteOfficeHours(n))}),s(6,"mat-icon",31),c(7,"delete"),o()()()()}if(e&2){let t=i.$implicit;l(2),d("routerLink",t.id+"/edit")}}function Pa(e,i){e&1&&f(0,"tr",32)}function Ha(e,i){e&1&&f(0,"tr",33)}function Fa(e,i){if(e&1){let t=S();s(0,"mat-card",9)(1,"mat-card-content",11)(2,"div",12)(3,"table",13),A(4,14),I(5,wa,2,0,"th",15)(6,Ea,7,12,"td",16),N(),A(7,17),I(8,Ta,2,0,"th",15)(9,Ia,5,2,"td",16),N(),A(10,18),I(11,Oa,1,0,"th",15)(12,Da,8,1,"td",19),N(),I(13,Pa,1,0,"tr",20)(14,Ha,1,0,"tr",21),o(),s(15,"mat-paginator",22),_("page",function(n){g(t);let a=m(2);return C(a.handleFutureOfficeHoursPageEvent(n))}),o()()()()}if(e&2){let t,r,n,a,u=m(2);l(3),d("dataSource",((t=u.futureOfficeHourEventsPage())==null?null:t.items)??z(6,_i)),l(10),d("matHeaderRowDef",u.futureOhDisplayedColumns),l(),d("matRowDefColumns",u.futureOhDisplayedColumns),l(),d("length",((r=u.futureOfficeHourEventsPage())==null?null:r.length)??0)("pageSize",((n=u.futureOfficeHourEventsPage())==null||n.params==null?null:n.params.page_size)??0)("pageIndex",((a=u.futureOfficeHourEventsPage())==null||a.params==null?null:a.params.page)??0)}}function Ra(e,i){e&1&&(s(0,"div",10)(1,"p",31)(2,"strong"),c(3,"No future office hours yet!"),o()(),s(4,"p"),c(5,'To schedule office hours, press "Create Event" at the top right of the page.'),o()())}function Va(e,i){if(e&1&&(s(0,"mat-card-content",5)(1,"mat-card-subtitle"),c(2,"Happening Now"),o(),s(3,"div",6),v(4,Ma,2,0,"p"),P(5,ka,1,2,"office-hour-event-card",7,Sa),o(),s(7,"mat-card-subtitle",8),c(8," Future Schedule "),o(),v(9,Fa,16,7,"mat-card",9)(10,Ra,6,0,"div",10),o()),e&2){let t,r=m();l(4),x(r.currentOfficeHourEvents().length===0?4:-1),l(),H(r.currentOfficeHourEvents()),l(4),x((((t=r.futureOfficeHourEventsPage())==null?null:t.items)??z(2,_i)).length>0?9:10)}}function Ba(e,i){e&1&&(s(0,"th",23),c(1,"Date"),o())}function Aa(e,i){if(e&1&&(s(0,"td",24),c(1),w(2,"date"),f(3,"br"),c(4),w(5,"date"),w(6,"date"),o()),e&2){let t=i.$implicit;l(),k(" ",E(2,3,t.start_time,"EEEE, M/d")),l(3),$(" ",E(5,6,t.start_time,"shortTime")," - ",E(6,9,t.end_time,"shortTime")," ")}}function Na(e,i){e&1&&(s(0,"th",23),c(1,"Type"),o())}function La(e,i){if(e&1&&(s(0,"td",24)(1,"span",25),c(2),o(),f(3,"br"),c(4),o()),e&2){let t=i.$implicit;l(2),y(t.type),l(2),k(" ",t.location," ")}}function qa(e,i){e&1&&f(0,"tr",32)}function ja(e,i){e&1&&f(0,"tr",33)}function Ga(e,i){if(e&1){let t=S();s(0,"mat-card",9)(1,"mat-card-content",11)(2,"div",12)(3,"table",13),A(4,14),I(5,Ba,2,0,"th",15)(6,Aa,7,12,"td",16),N(),A(7,17),I(8,Na,2,0,"th",15)(9,La,5,2,"td",16),N(),I(10,qa,1,0,"tr",20)(11,ja,1,0,"tr",21),o(),s(12,"mat-paginator",22),_("page",function(n){g(t);let a=m(2);return C(a.handlePastOfficeHoursPageEvent(n))}),o()()()()}if(e&2){let t,r,n,a,u=m(2);l(3),d("dataSource",((t=u.pastOfficeHourEventsPage())==null?null:t.items)??z(6,_i)),l(7),d("matHeaderRowDef",u.pastOhDisplayedColumns),l(),d("matRowDefColumns",u.pastOhDisplayedColumns),l(),d("length",((r=u.pastOfficeHourEventsPage())==null?null:r.length)??0)("pageSize",((n=u.pastOfficeHourEventsPage())==null||n.params==null?null:n.params.page_size)??0)("pageIndex",((a=u.pastOfficeHourEventsPage())==null||a.params==null?null:a.params.page)??0)}}function Wa(e,i){e&1&&(s(0,"div",10)(1,"p",31)(2,"strong"),c(3,"No past office hours"),o()(),s(4,"p"),c(5,"Scheduled office hours will appear here once completed."),o()())}function $a(e,i){if(e&1&&(s(0,"mat-card-content",5)(1,"mat-card-subtitle"),c(2,"History"),o(),v(3,Ga,13,7,"mat-card",9)(4,Wa,6,0,"div",10),o()),e&2){let t,r=m();l(3),x((((t=r.pastOfficeHourEventsPage())==null?null:t.items)??z(1,_i)).length>0?3:4)}}function za(e,i){e&1&&(s(0,"mat-card-content",5)(1,"mat-card-subtitle"),c(2,"More data coming soon!"),o()())}var fi=(()=>{let i=class i{constructor(r,n,a,u){this.route=r,this.myCoursesService=n,this.snackBar=a,this.dialog=u,this.ViewState=i.ViewState,this.viewState=i.ViewState.Scheduled,this.currentOfficeHourEvents=D([]),this.futureOfficeHourEventsPage=D(void 0),this.previousFutureOfficeHourEventParams=Rt,this.futureOhDisplayedColumns=["date","type"],this.pastOfficeHourEventsPage=D(void 0),this.previousPastOfficeHourEventParams=Rt,this.pastOhDisplayedColumns=["date","type"],this.courseSiteId=this.route.parent.snapshot.params.course_site_id,this.myCoursesService.getCurrentOfficeHourEvents(this.courseSiteId).subscribe(h=>{this.currentOfficeHourEvents.set(h)}),this.futureOfficeHourEventsPaginator=new Vt(`/api/my-courses/${this.courseSiteId}/oh-events/future`),this.futureOfficeHourEventsPaginator.loadPage(this.previousFutureOfficeHourEventParams,ct).subscribe(h=>{this.futureOfficeHourEventsPage.set(h)}),this.pastOfficeHourEventsPaginator=new Vt(`/api/my-courses/${this.courseSiteId}/oh-events/history`),this.pastOfficeHourEventsPaginator.loadPage(this.previousPastOfficeHourEventParams,ct).subscribe(h=>{this.pastOfficeHourEventsPage.set(h)}),this.myCoursesService.getTermOverviews().subscribe(h=>{h.flatMap(O=>O.sites).find(O=>O.id==+this.courseSiteId)?.role!=="Student"&&(this.futureOhDisplayedColumns=["date","type","actions"])})}handleFutureOfficeHoursPageEvent(r){let n=this.futureOfficeHourEventsPage().params;n.page=r.pageIndex,n.page_size=r.pageSize,this.futureOfficeHourEventsPaginator.loadPage(n,ct).subscribe(a=>{this.futureOfficeHourEventsPage.set(a),this.previousFutureOfficeHourEventParams=n})}handlePastOfficeHoursPageEvent(r){let n=this.pastOfficeHourEventsPage().params;n.page=r.pageIndex,n.page_size=r.pageSize,this.pastOfficeHourEventsPaginator.loadPage(n,ct).subscribe(a=>{this.pastOfficeHourEventsPage.set(a),this.previousPastOfficeHourEventParams=n})}deleteOfficeHours(r){r.recurrence_pattern_id?this.dialog.open(Co,{height:"230px",width:"300px",data:{siteId:this.courseSiteId,officeHours:r}}).afterClosed().subscribe(()=>{this.futureOfficeHourEventsPaginator.loadPage(this.previousFutureOfficeHourEventParams,ct).subscribe(a=>{this.futureOfficeHourEventsPage.set(a)})}):this.snackBar.open("Are you sure you want to delete this office hours event?","Delete",{duration:15e3}).onAction().subscribe(()=>{this.myCoursesService.deleteOfficeHours(+this.courseSiteId,r.id).subscribe(()=>{this.futureOfficeHourEventsPaginator.loadPage(this.previousFutureOfficeHourEventParams,ct).subscribe(a=>{this.futureOfficeHourEventsPage.set(a)}),this.snackBar.open("The office hours has been deleted.","",{duration:2e3})})})}};i.Route={path:"office-hours",title:"Course",component:i},i.\u0275fac=function(n){return new(n||i)(p(Q),p(T),p(Y),p(Te))},i.\u0275cmp=M({type:i,selectors:[["app-course-office-hours-page"]],standalone:!1,decls:16,vars:7,consts:[[1,"header-horizontal-container"],["mat-flat-button","","color","primary","routerLink","new/edit",1,"create-event-button"],[1,"header-horizontal-container","low-button-toggle-density"],["name","view",1,"view-toggle",3,"ngModelChange","ngModel"],[3,"value"],[1,"pane-content"],[1,"card-container"],[3,"event","editRoute"],[1,"schedule-header"],["appearance","outlined",1,"schedule-card"],[1,"fallback-text-container"],[1,"schedule-card-content"],[1,"table-responsive"],["mat-table","",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","actions"],["class","future-actions-cell","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"page","length","pageSize","pageIndex"],["mat-header-cell",""],["mat-cell",""],[1,"semibold"],["mat-cell","",1,"future-actions-cell"],[1,"future-actions"],["mat-icon-button","",3,"routerLink"],[1,"font-secondary"],["mat-icon-button","",3,"click"],[1,"font-tertiary"],["mat-header-row",""],["mat-row",""]],template:function(n,a){if(n&1&&(s(0,"mat-pane")(1,"mat-card-header")(2,"div",0)(3,"mat-card-title"),c(4,"Office Hours"),o(),v(5,ya,2,0,"button",1),o(),s(6,"div",2)(7,"mat-button-toggle-group",3),oe("ngModelChange",function(h){return ne(a.viewState,h)||(a.viewState=h),h}),s(8,"mat-button-toggle",4),c(9," Scheduled "),o(),s(10,"mat-button-toggle",4),c(11," History "),o()()(),f(12,"mat-divider"),o(),v(13,Va,11,3,"mat-card-content",5),v(14,$a,5,2,"mat-card-content",5),v(15,za,3,0,"mat-card-content",5),o()),n&2){let u;l(5),x(((u=a.myCoursesService.courseOverview(+a.courseSiteId))==null?null:u.role)!=="Student"?5:-1),l(2),ie("ngModel",a.viewState),l(),d("value",a.ViewState.Scheduled),l(2),d("value",a.ViewState.History),l(3),x(a.viewState===a.ViewState.Scheduled?13:-1),l(),x(a.viewState===a.ViewState.History?14:-1),l(),x(a.viewState===a.ViewState.Data?15:-1)}},dependencies:[qe,X,ee,V,B,Z,L,fe,R,ke,pe,We,ze,Je,Qe,$e,Ze,Ue,Ye,Xe,Ke,U,Ce,St,si,ci,vo,J],styles:[".mat-mdc-card-outlined{max-width:100%!important;margin-right:32px!important}.pane-content[_ngcontent-%COMP%]{width:100%}.mat-mdc-card-header[_ngcontent-%COMP%]{padding-bottom:16px;display:flex;flex-direction:column}.header-horizontal-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:center;padding-bottom:16px}.create-event-button[_ngcontent-%COMP%]{margin-left:auto}.card-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:wrap;row-gap:24px;column-gap:24px;margin-top:16px}.schedule-header[_ngcontent-%COMP%]{margin-top:24px}.schedule-card[_ngcontent-%COMP%]{margin-left:0!important}.schedule-card-content[_ngcontent-%COMP%]{padding-top:0}.semibold[_ngcontent-%COMP%]{font-weight:500}.future-actions-cell[_ngcontent-%COMP%]{display:flex;width:100%;height:52px;flex-direction:row;padding-right:0;align-items:center}.future-actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:6px;margin-left:auto}.fallback-text-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-top:16px;padding-bottom:16px;gap:4px}.fallback-text-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0}"]});let e=i;return e})();(function(e){let i;(function(t){t[t.Scheduled=0]="Scheduled",t[t.History=1]="History",t[t.Data=2]="Data"})(i=e.ViewState||(e.ViewState={}))})(fi||(fi={}));var hi=e=>(i,t)=>{let r=i.params.event_id;return G(T).getOfficeHoursRole(r).pipe(Re(n=>e.includes(n.role))).pipe(Lt(n=>at(!1)))},xo=e=>(i,t)=>{let r=+i.parent.params.course_site_id,n=e.includes(G(T).courseOverview(r)?.role??"");return at(n)};var bo=(()=>{let i=class i{constructor(r,n,a,u,h){this.dialogRef=r,this.ticketId=n,this.myCoursesService=a,this.router=u,this.snackBar=h,this.hasConcerns=new F(!1),this.notes=new F("")}submit(){this.myCoursesService.closeTicket(this.ticketId,this.hasConcerns.value??!1,this.notes.value??"").subscribe({next:()=>{this.close()},error:r=>this.snackBar.open(r,"",{duration:2e3})})}close(){this.dialogRef.close()}};i.\u0275fac=function(n){return new(n||i)(p(we),p(Ee),p(T),p(le),p(Y))},i.\u0275cmp=M({type:i,selectors:[["dialog-close-ticket"]],standalone:!1,decls:14,vars:2,consts:[["mat-dialog-title",""],[3,"formControl"],["appearance","outline"],["matInput","","placeholder","Please leave any notes here.","required","",3,"formControl"],["mat-flat-button","","color","primary",3,"click"]],template:function(n,a){n&1&&(s(0,"h2",0),c(1,"Close Ticket"),o(),s(2,"mat-dialog-content")(3,"p"),c(4,"Please leave feedback below."),o(),s(5,"mat-slide-toggle",1),c(6," I have concerns about this ticket. "),o(),s(7,"mat-form-field",2)(8,"mat-label"),c(9,"Notes"),o(),f(10,"textarea",3),o()(),s(11,"mat-dialog-actions")(12,"button",4),_("click",function(){return a.submit()}),c(13," Close Ticket "),o()()),n&2&&(l(5),d("formControl",a.hasConcerns),l(5),d("formControl",a.notes))},dependencies:[R,ue,me,ge,U,Me,je,Ie,Ge,Oe,De,Tn],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}mat-slide-toggle[_ngcontent-%COMP%]{padding-top:12px;padding-bottom:18px}"]});let e=i;return e})();function Qa(e,i){if(e&1&&(s(0,"p")(1,"span",3),c(2,"You"),o(),c(3),w(4,"date"),o()),e&2){let t=m();l(3),k(" called this ticket at ",E(4,1,t.ticket.called_at,"shortTime")," ")}}function Ua(e,i){if(e&1&&(s(0,"p"),c(1," Called by "),s(2,"span",3),c(3),o(),c(4),w(5,"date"),o()),e&2){let t=m();l(3),$("",t.ticket.caller.first_name," ",t.ticket.caller.last_name),l(),k(" at ",E(5,3,t.ticket.called_at,"shortTime")," ")}}function Ya(e,i){if(e&1){let t=S();s(0,"mat-card-content"),f(1,"mat-divider",4),s(2,"div",5)(3,"p")(4,"span",3),c(5,"Helping:"),o()(),f(6,"user-chip-list",6),o(),f(7,"mat-divider",7),s(8,"p",8),c(9),o()(),s(10,"mat-card-actions")(11,"button",9),_("click",function(){g(t);let n=m();return C(n.closeButtonEvent())}),c(12," Close Ticket "),o()()}if(e&2){let t=m();l(6),d("users",t.ticket.creators)("clickable",!1),l(3),y(t.ticket.description)}}var yo=(()=>{let i=class i{constructor(){this.calledByUser=!1,this.closeButtonPressed=new Le,this.expanded=D(!1)}toggleExpanded(){this.expanded.set(!this.expanded())}closeButtonEvent(){this.closeButtonPressed.emit(this.ticket)}ngOnChanges(r){r.calledByUser&&r.calledByUser.currentValue&&this.expanded.set(!0)}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=M({type:i,selectors:[["called-ticket-card"]],inputs:{ticket:"ticket",calledByUser:"calledByUser"},outputs:{closeButtonPressed:"closeButtonPressed"},standalone:!1,features:[Ai],decls:10,vars:4,consts:[["appearance","outlined"],[1,"column-view"],["mat-stroked-button","","color","secondary",1,"view-button",3,"click"],[1,"semibold-text"],[1,"spacing-divider"],[1,"row"],[3,"users","clickable"],[1,"spacing-divider-bottom"],["markdown",""],["mat-flat-button","",1,"tertiary-button",3,"click"]],template:function(n,a){n&1&&(s(0,"mat-card",0)(1,"mat-card-header")(2,"div",1)(3,"mat-card-subtitle"),c(4),o(),v(5,Qa,5,4,"p")(6,Ua,6,6,"p"),o(),s(7,"button",2),_("click",function(){return a.toggleExpanded()}),c(8),o()(),v(9,Ya,13,3),o()),n&2&&(l(4),y(a.ticket.type),l(),x(a.calledByUser?5:6),l(3),k(" ",a.expanded()?"Hide Details":"Show Details"," "),l(),x(a.expanded()?9:-1))},dependencies:[et,yt,ee,de,V,B,Z,fe,R,J],styles:[".mat-mdc-card-outlined[_ngcontent-%COMP%]{margin:8px 0}.mat-mdc-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding-bottom:16px}.column-view[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.view-button[_ngcontent-%COMP%]{margin-left:auto}p[_ngcontent-%COMP%]{margin:0}.semibold-text[_ngcontent-%COMP%]{font-weight:500}.mat-mdc-card-actions[_ngcontent-%COMP%]{padding-top:12px;justify-content:end}  strong, b[_ngcontent-%COMP%]{font-weight:500!important}.spacing-divider[_ngcontent-%COMP%]{margin-top:12px;margin-bottom:12px}.spacing-divider-bottom[_ngcontent-%COMP%]{margin-top:4px;margin-bottom:12px}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:8px}.row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:8px}"]});let e=i;return e})();function Za(e,i){if(e&1){let t=S();s(0,"button",5),_("click",function(){g(t);let n=m();return C(n.callButtonEvent())}),c(1," Call Ticket "),o()}if(e&2){let t=m();d("disabled",t.disableCallTicketButton)}}var gi=(()=>{let i=class i{constructor(){this.hideCallTicketButton=!1,this.disableCallTicketButton=!1,this.cancelButtonPressed=new Le,this.callButtonPressed=new Le}cancelButtonEvent(){this.cancelButtonPressed.emit(this.ticket)}callButtonEvent(){this.callButtonPressed.emit(this.ticket)}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=M({type:i,selectors:[["queued-ticket-card"]],inputs:{ticket:"ticket",hideCallTicketButton:"hideCallTicketButton",disableCallTicketButton:"disableCallTicketButton"},outputs:{cancelButtonPressed:"cancelButtonPressed",callButtonPressed:"callButtonPressed"},standalone:!1,decls:15,vars:7,consts:[["appearance","outlined"],[1,"column-view"],["markdown",""],["mat-stroked-button","",1,"tertiary-button",3,"click"],["mat-flat-button","",1,"primary-button",3,"disabled"],["mat-flat-button","",1,"primary-button",3,"click","disabled"]],template:function(n,a){n&1&&(s(0,"mat-card",0)(1,"mat-card-header")(2,"div",1)(3,"mat-card-subtitle"),c(4),o(),s(5,"p"),c(6),w(7,"date"),o()()(),s(8,"mat-card-content")(9,"p",2),c(10),o()(),s(11,"mat-card-actions")(12,"button",3),_("click",function(){return a.cancelButtonEvent()}),c(13," Cancel Ticket "),o(),v(14,Za,2,1,"button",4),o()()),n&2&&(l(4),y(a.ticket.type),l(2),k("Created at ",E(7,4,a.ticket.created_at,"shortTime")),l(4),y(a.ticket.description),l(4),x(a.hideCallTicketButton?-1:14))},dependencies:[yt,ee,de,V,B,Z,R,J],styles:[".mat-mdc-card-outlined[_ngcontent-%COMP%]{margin:8px 0}.mat-mdc-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding-bottom:16px}.column-view[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.view-button[_ngcontent-%COMP%]{margin-left:auto}p[_ngcontent-%COMP%]{margin:0}.semibold-text[_ngcontent-%COMP%]{font-weight:500}.mat-mdc-card-actions[_ngcontent-%COMP%]{padding-top:12px;display:flex;flex-direction:row;gap:8px;justify-content:end}  strong, b[_ngcontent-%COMP%]{font-weight:500!important}"]});let e=i;return e})();var ko=(e,i)=>i.id;function Ka(e,i){e&1&&(s(0,"p"),c(1,"Nobody is being helped right now."),o())}function es(e,i){if(e&1){let t=S();s(0,"called-ticket-card",9),_("closeButtonPressed",function(n){g(t);let a=m(2);return C(a.closeTicket(n))}),o()}if(e&2){let t=m(2);d("ticket",t.queue().active)("calledByUser",!0)}}function ts(e,i){if(e&1){let t=S();s(0,"called-ticket-card",10),_("closeButtonPressed",function(n){g(t);let a=m(2);return C(a.closeTicket(n))}),o()}if(e&2){let t=i.$implicit;d("ticket",t)}}function is(e,i){e&1&&(s(0,"p"),c(1,"There are no tickets in the queue."),o())}function ns(e,i){if(e&1){let t=S();s(0,"queued-ticket-card",11),_("callButtonPressed",function(n){g(t);let a=m(2);return C(a.callTicket(n))})("cancelButtonPressed",function(n){g(t);let a=m(2);return C(a.cancelTicket(n))}),o()}if(e&2){let t=i.$implicit,r=m(2);d("ticket",t)("disableCallTicketButton",r.queue().active!==void 0)}}function os(e,i){if(e&1&&(s(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-header",3)(4,"mat-card-title"),c(5),o(),s(6,"p"),c(7),w(8,"date"),w(9,"date"),o(),s(10,"mat-chip-set")(11,"mat-chip"),c(12),o()(),f(13,"mat-divider",4),o(),s(14,"mat-card-content",5)(15,"mat-card-subtitle"),c(16,"Called Tickets"),o(),v(17,Ka,2,0,"p"),v(18,es,1,2,"called-ticket-card",6),P(19,ts,1,1,"called-ticket-card",7,ko),s(21,"mat-card-subtitle"),c(22,"Queue"),o(),v(23,is,2,0,"p"),P(24,ns,1,2,"queued-ticket-card",8,ko),o()()()()),e&2){let t=m();l(5),k("",t.queue().type," Event"),l(2),$(" ",E(8,7,t.queue().start_time,"shortTime")," - ",E(9,10,t.queue().end_time,"shortTime")," "),l(5),k("",t.queue().queue.length," waiting"),l(5),x(!t.queue().active&&t.queue().other_called.length===0?17:-1),l(),x(t.queue().active?18:-1),l(),H(t.queue().other_called),l(4),x(t.queue().queue.length===0?23:-1),l(),H(t.queue().queue)}}var wo="Office Hours Queue",Eo="Queued Ticket!",rs=new Audio("assets/office-hours-notif.wav"),it=class it{constructor(i,t,r,n,a){this.route=i,this.snackBar=t,this.myCoursesService=r,this.titleService=n,this.dialog=a,this.queue=D(void 0),this.ohEventId=this.route.snapshot.params.event_id}ngOnInit(){this.timer=lt(0,1e4).subscribe(()=>{this.pollQueue()})}ngOnDestroy(){this.timer.unsubscribe(),this.titleFlashTimer?.unsubscribe()}handleNotification(i){let t=!1;if(!i.active&&i.queue.length>0){if(!this.queue()||this.queue().queue.length===0)t=!0;else for(let r of i.queue)if(!this.queue().queue.some(n=>r.id===n.id)){t=!0;break}}t?(rs.play(),this.titleFlashTimer=lt(0,1e3).subscribe(()=>{this.titleService.setTitle(this.titleService.getTitle()===Eo?wo:Eo)})):(this.titleFlashTimer?.unsubscribe(),this.titleService.setTitle(wo))}pollQueue(){this.myCoursesService.getOfficeHoursQueue(this.ohEventId).subscribe(i=>{this.handleNotification(i),this.queue.set(i)})}callTicket(i){this.myCoursesService.callTicket(i.id).subscribe({next:t=>this.pollQueue(),error:t=>this.snackBar.open(t.error?.message??"Error calling ticket","",{duration:2e3})})}cancelTicket(i){this.myCoursesService.cancelTicket(i.id).subscribe({next:t=>this.pollQueue(),error:t=>this.snackBar.open(t,"",{duration:2e3})})}closeTicket(i){this.dialog.open(bo,{height:"400px",width:"500px",data:i.id}).afterClosed().subscribe(r=>{this.pollQueue()})}};it.Route={path:"office-hours/:event_id/queue",title:"Office Hours Queue",component:it,canActivate:[hi(["UTA","GTA","Instructor"])]},it.\u0275fac=function(t){return new(t||it)(p(Q),p(Y),p(T),p($t),p(Te))},it.\u0275cmp=M({type:it,selectors:[["app-office-hours-queue"]],standalone:!1,decls:1,vars:1,consts:[[1,"container"],[1,"left-column"],["appearance","outlined",1,"queue-pane"],[1,"pane-header"],["id","pane-divider"],[1,"pane-content"],[3,"ticket","calledByUser"],[3,"ticket"],[3,"ticket","disableCallTicketButton"],[3,"closeButtonPressed","ticket","calledByUser"],[3,"closeButtonPressed","ticket"],[3,"callButtonPressed","cancelButtonPressed","ticket","disableCallTicketButton"]],template:function(t,r){t&1&&v(0,os,26,13,"div",0),t&2&&x(r.queue()?0:-1)},dependencies:[ee,V,B,Z,L,fe,bt,ti,yo,gi,J],styles:[".pane-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}#pane-divider[_ngcontent-%COMP%]{margin-top:8px}.pane-content[_ngcontent-%COMP%]{padding-top:8px;overflow-y:scroll}.mat-mdc-chip-set[_ngcontent-%COMP%], .mat-mdc-chip[_ngcontent-%COMP%]{height:24px;margin-top:0}.container[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%}.left-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:95%;height:85vh}.right-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:30%;height:85vh;padding-right:16px}.queue-pane[_ngcontent-%COMP%]{flex:1 1 auto;min-height:0;max-height:100%;max-width:100%;border-color:transparent!important}.ta-facts-pane[_ngcontent-%COMP%]{max-width:100%;border-color:transparent!important}.facts-pane[_ngcontent-%COMP%]{flex:1 1 auto;min-height:0;max-height:100%;max-width:100%;border-color:transparent!important}.facts-pane-content[_ngcontent-%COMP%]{overflow-y:auto;height:100%}.mdc-list-item--with-leading-icon[_ngcontent-%COMP%]   .mdc-list-item__start[_ngcontent-%COMP%]{font-size:24px;background:#4786c6;width:36px;height:36px;text-align:center;margin:auto 8px;padding-bottom:0;line-height:36px;border-radius:100%;color:#fff}.pane-subtitle[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:12px}strong[_ngcontent-%COMP%]{font-weight:500!important}.history-card[_ngcontent-%COMP%]{margin:0 0 12px!important}@media only screen and (max-width: 1000px){.container[_ngcontent-%COMP%]{flex-direction:column}.left-column[_ngcontent-%COMP%], .right-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:auto}.queue-pane[_ngcontent-%COMP%]{flex:auto}.queue-pane[_ngcontent-%COMP%]     .mat-mdc-card-outlined{height:auto!important}.queue-pane[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]{height:auto!important;overflow-y:auto!important}}"]});var Ci=it;var as=e=>[e];function ss(e,i){if(e&1){let t=S();s(0,"mat-pane")(1,"mat-card-header",1)(2,"mat-card-title"),c(3,"You're In The Queue!"),o(),s(4,"p"),c(5),w(6,"date"),w(7,"date"),o(),s(8,"div",2)(9,"p",3),c(10," You're number "),s(11,"span",4),c(12),o(),c(13," in the Queue "),o()(),f(14,"mat-divider",5),o(),s(15,"mat-card-content",6)(16,"mat-card-subtitle"),c(17,"Ticket Summary"),o(),s(18,"queued-ticket-card",7),_("cancelButtonPressed",function(n){g(t);let a=m(3);return C(a.cancelTicket(n))}),o()()()}if(e&2){let t=m(3);l(5),ce(" ",t.data().event_type," Event: ",E(6,6,t.data().event_start_time,"shortTime")," - ",E(7,9,t.data().event_end_time,"shortTime")," "),l(7),y(t.data().queue_position),l(6),d("ticket",t.data().ticket)("hideCallTicketButton",!0)}}function cs(e,i){if(e&1&&(s(0,"mat-pane")(1,"mat-card-header",1)(2,"mat-card-title",8),c(3," Your Ticket Has Been Called! "),o(),s(4,"p"),c(5),w(6,"date"),w(7,"date"),o(),s(8,"div",2)(9,"div",9)(10,"p",10)(11,"span",11),c(12,"Your ticket has been called by: "),o()(),f(13,"user-chip-list",12),o(),s(14,"p",10)(15,"span",11),c(16,"Meeting Location: "),s(17,"span",13),c(18),o()(),f(19,"br"),c(20),o()()()()),e&2){let t=m(3);l(5),ce(" ",t.data().event_type," Event: ",E(6,7,t.data().event_start_time,"shortTime")," - ",E(7,10,t.data().event_end_time,"shortTime")," "),l(8),d("users",_t(13,as,t.data().ticket.caller))("clickable",!1),l(5),y(t.data().event_location),l(2),k(" ",t.data().event_location_description," ")}}function ls(e,i){if(e&1&&v(0,ss,19,12,"mat-pane")(1,cs,21,15,"mat-pane"),e&2){let t=m(2);x(t.data().ticket.state==="Queued"?0:t.data().ticket.state==="Called"?1:-1)}}function ds(e,i){e&1&&(s(0,"mat-form-field",15)(1,"mat-label"),c(2," What section of the assignment do you need help with? "),o(),f(3,"textarea",20),o(),s(4,"mat-form-field",15)(5,"mat-label"),c(6," Describe in English what you are trying to express in code. "),o(),f(7,"textarea",21),o(),s(8,"mat-form-field",15)(9,"mat-label"),c(10," What concepts do you need to use to solve this problem? "),o(),f(11,"textarea",22),o(),s(12,"mat-form-field",15)(13,"mat-label"),c(14," What have you tried? Why do you suspect it didn't work? "),o(),f(15,"textarea",23),o())}function ms(e,i){e&1&&(s(0,"mat-form-field",15)(1,"mat-label"),c(2," What questions or topics do you want to talk through? "),o(),f(3,"textarea",24),o())}function us(e,i){e&1&&(s(0,"mat-form-field",18)(1,"mat-label"),c(2,"Zoom Link"),o(),f(3,"input",25),o())}function ps(e,i){if(e&1){let t=S();s(0,"form",14),_("ngSubmit",function(){g(t);let n=m(2);return C(n.submitTicketForm())}),s(1,"mat-pane")(2,"mat-card-header",1)(3,"mat-card-title"),c(4,"Create a Ticket"),o(),s(5,"p"),c(6),w(7,"date"),w(8,"date"),o(),f(9,"mat-divider",5),o(),s(10,"mat-card-content",6)(11,"mat-form-field",15)(12,"mat-label"),c(13,"Ticket Type"),o(),s(14,"mat-select",16)(15,"mat-option",17),c(16,"Assignment Help"),o(),s(17,"mat-option",17),c(18,"Conceptual Help"),o()()(),v(19,ds,16,0)(20,ms,4,0,"mat-form-field",15),v(21,us,4,0,"mat-form-field",18),o(),s(22,"mat-card-actions")(23,"button",19),c(24," Create Ticket "),o()()()()}if(e&2){let t=m(2);d("formGroup",t.ticketForm),l(6),ce(" ",t.data().event_type," Event: ",E(7,9,t.data().event_start_time,"shortTime")," - ",E(8,12,t.data().event_end_time,"shortTime")," "),l(9),d("value",1),l(2),d("value",0),l(2),x(+t.ticketForm.controls.type.value==1?19:20),l(2),x(t.data().event_mode==="Virtual - Student Link"?21:-1),l(2),d("disabled",!t.isFormValid())}}function fs(e,i){if(e&1&&v(0,ls,2,1)(1,ps,25,15,"form",0),e&2){let t=m();x(t.data().ticket?0:1)}}var To="Office Hours Get Help",Io="Ticket Called!",_s=new Audio("assets/office-hours-notif.wav"),nt=class nt{constructor(i,t,r,n,a){this.route=i,this.formBuilder=t,this.snackBar=r,this.myCoursesService=n,this.titleService=a,this.data=D(void 0),this.ticketForm=this.formBuilder.group({type:new F(0,[re.required]),assignmentSection:new F("",[re.required]),codeSection:new F("",[re.required]),conceptsSection:new F("",[re.required]),attemptSection:new F("",[re.required]),description:new F("",[re.required]),link:new F("",[re.required])}),this.ohEventId=this.route.snapshot.params.event_id}ngOnInit(){this.timer=lt(0,1e4).subscribe(()=>{this.pollData()})}ngOnDestroy(){this.timer.unsubscribe(),this.titleFlashTimer?.unsubscribe()}handleNotification(i){let t=!1;i.ticket&&i.ticket.state==="Called"&&this.data()&&this.data().ticket&&this.data().ticket.state==="Queued"&&(t=!0),t?(_s.play(),this.titleFlashTimer=lt(0,1e3).subscribe(()=>{this.titleService.setTitle(this.titleService.getTitle()===Io?To:Io)})):(this.titleFlashTimer?.unsubscribe(),this.titleService.setTitle(To))}pollData(){this.myCoursesService.getOfficeHoursHelpOverview(this.ohEventId).subscribe(i=>{this.handleNotification(i),this.data.set(i)})}isFormValid(){let i=this.ticketForm.controls.type.value===1?this.ticketForm.controls.assignmentSection.value!==""&&this.ticketForm.controls.codeSection.value!==""&&this.ticketForm.controls.conceptsSection.value!==""&&this.ticketForm.controls.attemptSection.value!=="":this.ticketForm.controls.description.value!=="",t=this.data().event_mode!=="Virtual - Student Link"||this.ticketForm.controls.link.value!=="";return i&&t}cancelTicket(i){this.myCoursesService.cancelTicket(i.id).subscribe({next:t=>{this.pollData(),this.snackBar.open("Ticket cancelled","",{duration:5e3})},error:t=>this.snackBar.open(t,"",{duration:2e3})})}submitTicketForm(){let i="",t=this.ticketForm.controls.type.value;this.ticketForm.controls.type.value===0?i=`**Conceptual Question**:  
`+(this.ticketForm.controls.description.value??""):i=`**Assignment Part**:  
`+(this.ticketForm.controls.assignmentSection.value??"")+`  
  
**Goal**:  
`+(this.ticketForm.controls.codeSection.value??"")+`  
  
**Concepts**:  
`+(this.ticketForm.controls.conceptsSection.value??"")+`  
  
**Tried**:  
`+(this.ticketForm.controls.attemptSection.value??""),this.data().event_mode==="Virtual - Student Link"&&(i=i+` 
Link: `+(this.ticketForm.controls.link.value??""));let r={office_hours_id:this.ohEventId,description:i,type:t};this.myCoursesService.createTicket(r).subscribe({next:n=>{this.pollData()},error:n=>{this.snackBar.open(`${n.error.message}`,"",{duration:2e3})}})}};nt.Route={path:"office-hours/:event_id/get-help",title:"Office Hours Get Help",component:nt,canActivate:[hi(["Student"])]},nt.\u0275fac=function(t){return new(t||nt)(p(Q),p(xt),p(Y),p(T),p($t))},nt.\u0275cmp=M({type:nt,selectors:[["app-office-hours-get-help"]],standalone:!1,decls:1,vars:1,consts:[[3,"formGroup"],[1,"pane-header"],[1,"queue-text-container"],[1,"font-secondary","queue-text"],[1,"queue-number","secondary-background"],["id","pane-divider"],[1,"pane-content"],[3,"cancelButtonPressed","ticket","hideCallTicketButton"],[1,"primary-color"],[1,"row"],[1,"secondary-color"],[1,"bold-text"],[3,"users","clickable"],[1,"font-primary"],[3,"ngSubmit","formGroup"],["appearance","outline"],["formControlName","type","required",""],[3,"value"],["appearance","outline","color","accent"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["matInput","","required","","formControlName","assignmentSection","placeholder","Ex. Assignment 01, Part 2"],["matInput","","required","","formControlName","codeSection","placeholder","Ex. I am trying to..."],["matInput","","required","","formControlName","conceptsSection","placeholder","Ex. Languages, class concepts, technologies involved"],["matInput","","required","","formControlName","attemptSection","placeholder","Ex. I have already tried..."],["matInput","","required","","formControlName","description","placeholder","Ex. I need help understanding adding to a binary tree"],["matInput","","placeholder","Ex: https://zoom.us/,,,","formControlName","link"]],template:function(t,r){t&1&&v(0,fs,2,1),t&2&&x(r.data()?0:-1)},dependencies:[et,X,de,V,B,Z,L,fe,R,ue,me,Pe,ve,ye,ge,U,Se,Me,Yt,Jt,De,gi,J],styles:[".pane-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.pane-content[_ngcontent-%COMP%]{padding-top:10px}.queue-text-container[_ngcontent-%COMP%]{align-items:center}.queue-text[_ngcontent-%COMP%]{font-weight:500;line-height:28px}.bold-text[_ngcontent-%COMP%]{font-weight:500}.queue-number[_ngcontent-%COMP%]{display:inline-block;border-radius:14px;min-width:28px;height:28px;color:#fff;width:fit-content;align-items:center;text-align:center}mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-mdc-card-actions[_ngcontent-%COMP%]{justify-content:end}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:8px}"]});var vi=nt;var Oo=(e,i)=>{let t=+e.parent.params.course_site_id;return G(Wt).get("/api/my-courses").pipe(Re(ai)).pipe(Re(r=>r.flatMap(n=>n.sites).find(n=>n.id===t)?.role=="Instructor"))};var hs=(e,i)=>i.id;function gs(e,i){if(e&1){let t=S();s(0,"mat-chip-row",14),_("removed",function(){g(t);let n=m().$implicit,a=m();return C(a.remove(a.sectionForId(n)))}),c(1),s(2,"button",15)(3,"mat-icon"),c(4,"cancel"),o()()()}if(e&2){let t=m().$implicit,r=m();l(),ce(" ",r.sectionForId(t).subject_code," ",r.sectionForId(t).course_number,"-",r.sectionForId(t).section_number," ")}}function Cs(e,i){if(e&1&&v(0,gs,5,3,"mat-chip-row"),e&2){let t=i.$implicit,r=m();x(r.sectionForId(t)?0:-1)}}function vs(e,i){if(e&1&&(s(0,"mat-option",16),c(1),o()),e&2){let t=m().$implicit;d("value",t.id),l(),ce("",t.subject_code," ",t.course_number,"-",t.section_number)}}function xs(e,i){if(e&1&&v(0,vs,2,4,"mat-option",16),e&2){let t=i.$implicit,r=m(2);x(r.selectedSections().includes(t.id)?-1:0)}}function bs(e,i){if(e&1&&P(0,xs,1,1,null,null,hs),e&2){let t=m();H(t.allSections())}}function Ss(e,i){e&1&&(s(0,"mat-error"),c(1," The value must be greater than 0 minutes. "),o())}function ys(e,i){e&1&&(s(0,"mat-error"),c(1," The value must be greater than 0. "),o())}var Do=(()=>{let i=class i{constructor(r,n,a){this.route=r,this.myCoursesService=n,this.snackBar=a,this.courseSite=null,this.title=new F(""),this.selectedTerm=new F(null),this.selectedSections=D([]),this.currentSectionInput=D(""),this.gtas=[],this.utas=[],this.ticketCooldown=new F(1),this.maxTicketsInDay=new F(1),this.resetForm()}selected(r){let n=r.option.value;this.selectedSections.update(a=>[...a,n]),this.currentSectionInput.set(""),r.option.deselect()}remove(r){this.selectedSections.update(n=>{let a=n.indexOf(r.id);return a<0?n:(n.splice(a,1),[...n])})}resetSections(){this.selectedSections.set([])}resetForm(){let r=this.route.parent.snapshot.params.course_site_id;this.myCoursesService.getCourseSite(r).subscribe(n=>{this.courseSite=n,this.title.setValue(n.title);let a=this.myCoursesService.allTerms().find(u=>u.id==this.courseSite.term_id);this.selectedTerm.setValue(a),this.selectedSections.set(this.courseSite.section_ids),this.gtas=this.courseSite.gtas,this.utas=this.courseSite.utas,this.ticketCooldown.setValue(this.courseSite.minimum_ticket_cooldown),this.maxTicketsInDay.setValue(this.courseSite.max_tickets_per_day)})}formIsValid(){return this.title.value!==null&&this.title.value!==""&&this.selectedSections().length>0}submit(){if(this.courseSite&&this.formIsValid()){let r={id:this.courseSite.id,title:this.title.value??"",term_id:this.courseSite.term_id,section_ids:this.selectedSections(),gtas:this.gtas,utas:this.utas,minimum_ticket_cooldown:this.ticketCooldown.value,max_tickets_per_day:this.maxTicketsInDay.value};this.myCoursesService.updateCourseSite(r).subscribe({next:()=>{this.resetForm(),this.snackBar.open("Successfully updated the course site.","",{duration:2e3})},error:n=>{this.snackBar.open("Could not save the course site.","",{duration:2e3})}})}}sectionForId(r){let n=this.myCoursesService.allTerms().find(a=>a.id==this.courseSite.term_id);return console.log(n),n.teaching_no_site.find(a=>a.id===r)||n.sites.flatMap(a=>a.sections).find(a=>a.id===r)}allSections(){let r=this.myCoursesService.allTerms().find(n=>n.id==this.courseSite.term_id);return r.teaching_no_site.concat(r.sites.flatMap(n=>n.sections).map(Xn)).sort((n,a)=>+n.course_number-+a.course_number)}};i.Route={path:"settings",title:"Course",component:i,canActivate:[Oo]},i.\u0275fac=function(n){return new(n||i)(p(Q),p(T),p(Y))},i.\u0275cmp=M({type:i,selectors:[["app-settings"]],standalone:!1,decls:41,vars:13,consts:[["chipGrid",""],["sectionInput",""],["auto","matAutocomplete"],["appearance","outline"],["matInput","","placeholder","Enter the title for the course site.","required","",3,"formControl"],["name","currentSection","placeholder","Add Sections...",3,"ngModelChange","ngModel","matChipInputFor","matAutocomplete"],[3,"optionSelected"],["label","Graduate Teaching Assistants",3,"users"],["label","Undergraduate Teaching Assistants",3,"users"],["appearance","outline","color","accent",1,"ticket-settings-input"],["type","number","matInput","","placeholder","Minutes students must wait before creating new ticket.","name","ticketCooldown",3,"formControl","min"],["type","number","matInput","","placeholder","Maximum number of tickets a student can make in a 24hr period.","name","maxTicketsInDay",3,"formControl","min"],["mat-stroked-button","","type","button",3,"click"],["mat-flat-button","","type","submit",3,"click"],[3,"removed"],["matChipRemove",""],[3,"value"]],template:function(n,a){if(n&1){let u=S();s(0,"mat-pane")(1,"form")(2,"mat-card-header")(3,"mat-card-title"),c(4,"Course Settings"),o()(),s(5,"mat-card-content")(6,"mat-form-field",3)(7,"mat-label"),c(8,"Title"),o(),f(9,"input",4),o(),s(10,"mat-form-field",3)(11,"mat-label"),c(12,"Select Course Sections"),o(),s(13,"mat-chip-grid",null,0),P(15,Cs,1,1,null,null,ut),o(),s(17,"input",5,1),oe("ngModelChange",function(b){return g(u),ne(a.currentSectionInput,b)||(a.currentSectionInput=b),C(b)}),o(),s(19,"mat-autocomplete",6,2),_("optionSelected",function(b){return g(u),C(a.selected(b))}),v(21,bs,2,0),o()(),f(22,"user-lookup",7)(23,"user-lookup",8),s(24,"mat-card-title"),c(25,"Office Hours Settings"),o(),s(26,"mat-form-field",9)(27,"mat-label"),c(28,"Ticket Cooldown (in minutes)"),o(),f(29,"input",10),v(30,Ss,2,0,"mat-error"),o(),s(31,"mat-form-field",9)(32,"mat-label"),c(33,"Maximum Tickets Per Student Per Day"),o(),f(34,"input",11),v(35,ys,2,0,"mat-error"),o()(),s(36,"mat-card-actions")(37,"button",12),_("click",function(){return g(u),C(a.resetForm())}),c(38," Reset "),o(),s(39,"button",13),_("click",function(){return g(u),C(a.submit())}),c(40,"Save"),o()()()()}if(n&2){let u=K(14),h=K(20);l(9),d("formControl",a.title),l(6),H(a.selectedSections()),l(2),ie("ngModel",a.currentSectionInput),d("matChipInputFor",u)("matAutocomplete",h),l(4),x(a.selectedTerm.value?21:-1),l(),d("users",a.gtas),l(),d("users",a.utas),l(6),d("formControl",a.ticketCooldown)("min",0),l(),x(a.ticketCooldown.hasError("min")?30:-1),l(4),d("formControl",a.maxTicketsInDay)("min",1),l(),x(a.ticketCooldown.hasError("min")?35:-1)}},dependencies:[Bn,X,de,V,B,L,R,pe,ue,me,Zt,ve,ye,ge,en,U,Se,Me,tn,Ce,vt,je,ii,ni,Kt,ei,De,Mt,kt],styles:[".mat-mdc-card-outlined{max-width:100%!important;margin-right:32px!important}mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-mdc-card-actions[_ngcontent-%COMP%]{padding-bottom:16px;justify-content:end;gap:12px}mat-card-content[_ngcontent-%COMP%]{padding-top:16px}.ticket-settings-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.ticket-settings-subtitle[_ngcontent-%COMP%], .ticket-settings-input[_ngcontent-%COMP%]{margin-top:16px}.ticket-settings-slider[_ngcontent-%COMP%]{width:50%}"]});let e=i;return e})();var Po=(e,i)=>e.paramMap.get("event_id")=="new"?{id:-1,type:0,mode:0,description:"",location_description:"",start_time:new Date,end_time:new Date,course_site_id:+e.paramMap.get("course_site_id"),room_id:"",recurrence_pattern_id:null,recurrence_pattern:null}:G(T).getOfficeHours(+e.parent.paramMap.get("course_site_id"),+e.paramMap.get("event_id")).pipe(Lt(t=>(console.log(t),at(void 0))));var ks=["roomInput"],Ho=()=>[0,1,2],ws=()=>[!1,!0],Es=(e,i)=>i.id,Ts=(e,i)=>i.key;function Is(e,i){if(e&1&&(s(0,"mat-option",7),c(1),o()),e&2){let t=i.$implicit,r=m();d("value",t),l(),y(r.numberToType(t))}}function Os(e,i){if(e&1&&(s(0,"mat-option",7),c(1),o()),e&2){let t=i.$implicit,r=m();d("value",t),l(),y(r.numberToMode(t))}}function Ds(e,i){if(e&1&&(s(0,"mat-option",7),c(1),o()),e&2){let t=i.$implicit;d("value",t.id),l(),y(t.id)}}function Ps(e,i){if(e&1){let t=S();s(0,"mat-form-field",5)(1,"mat-label"),c(2,"Room"),o(),s(3,"input",19,0),_("input",function(){g(t);let n=m();return C(n.filterRooms())})("focus",function(){g(t);let n=m();return C(n.filterRooms())}),o(),s(5,"mat-autocomplete",20,1),P(7,Ds,2,2,"mat-option",7,Es),o()()}if(e&2){let t=K(6),r=m();l(3),d("matAutocomplete",t),l(4),H(r.filteredRooms)}}function Hs(e,i){if(e&1){let t=S();s(0,"mat-checkbox",21),_("change",function(n){g(t);let a=m();return C(a.toggleUpdateRecurrencePattern(n.checked))}),c(1,"Update future events in recurrence pattern."),o()}}function Fs(e,i){if(e&1&&(s(0,"mat-option",7),c(1),o()),e&2){let t=i.$implicit;d("value",t),l(),y(t?"Weekly":"Does not repeat")}}function Rs(e,i){if(e&1){let t=S();s(0,"mat-button-toggle",26),_("change",function(){let n=g(t).$implicit,a=m(2);return C(a.toggleDay(n.key))}),c(1),o()}if(e&2){let t=i.$implicit,r=m(2);d("value",Qi(t.key))("checked",r.days[t.key])("disabled",!r.isNew()&&!r.updateRecurrencePattern),l(),y(t.key)}}function Vs(e,i){if(e&1){let t=S();s(0,"mat-button-toggle-group",22),P(1,Rs,2,5,"mat-button-toggle",23,Ts),w(3,"keyvalue"),o(),s(4,"mat-form-field",10)(5,"mat-label"),c(6,"Recurrence End Date"),o(),s(7,"input",24),_("click",function(){g(t);let n=K(10);return C(n.open())}),o(),f(8,"mat-datepicker-toggle",25)(9,"mat-datepicker",null,2),o()}if(e&2){let t=K(10),r=m();d("hideMultipleSelectionIndicator",!0),l(),H(E(3,4,r.days,r.maintainOriginalOrder)),l(6),d("max",r.myCoursesService.currentTerms()[0].end)("matDatepicker",t),l(),d("for",t)}}function Bs(e,i){e&1&&(s(0,"mat-error"),c(1,"This event's end time must be after its start time."),o())}function As(e,i){e&1&&(s(0,"mat-error"),c(1,"This event's recurrence end date must be after the original event end date."),o())}var ot=class ot{constructor(i,t,r,n,a,u){this.route=i,this.router=t,this.formBuilder=r,this.snackBar=n,this.myCoursesService=a,this.datePipe=u,this.days={[W.Monday]:!1,[W.Tuesday]:!1,[W.Wednesday]:!1,[W.Thursday]:!1,[W.Friday]:!1,[W.Saturday]:!1,[W.Sunday]:!1},this.updateRecurrencePattern=!1,this.dateRangeValidator=j=>{let xe=j.get("start_time"),he=j.get("end_time");return xe&&xe.value&&he&&he.value&&xe.value>=he.value?{dateRangeInvalid:!0}:null},this.genericDateRangeValidator=(j,xe)=>he=>{let Fe=he.get(j),rt=he.get(xe);return Fe&&Fe.value&&rt&&rt.value&&Fe.value>=rt.value?xe=="recur_end"?{recurEndDateInvalid:!0}:{dateRangeInvalid:!0}:null},this.officeHoursForm=this.formBuilder.group({type:new F(0,[re.required]),mode:new F(0,[re.required]),description:new F(""),location_description:new F(""),start_time:new F(this.datePipe.transform(new Date,"yyyy-MM-ddTHH:mm"),[re.required]),end_time:new F(this.datePipe.transform(new Date,"yyyy-MM-ddTHH:mm"),[re.required]),room_id:new F("",[re.required]),recurs:new F(!1,[re.required]),recur_end:new F(this.datePipe.transform(new Date,"yyyy-MM-dd"),[])},{validators:[this.genericDateRangeValidator("start_time","end_time"),this.genericDateRangeValidator("end_time","recur_end")]}),this.maintainOriginalOrder=()=>0;let h=this.route.snapshot.data;this.officeHours=h.officeHours,this.rooms=h.rooms,this.virtualRoom=this.rooms.find(j=>j.id==="Virtual");let b=this.myCoursesService.currentTerms()[0].end,O=new Date(this.officeHours.recurrence_pattern&&this.officeHours.recurrence_pattern.end_date?this.officeHours.recurrence_pattern.end_date:b);this.officeHoursForm.patchValue(Object.assign({},this.officeHours,{start_time:this.datePipe.transform(this.officeHours.start_time,"yyyy-MM-ddTHH:mm"),end_time:this.datePipe.transform(this.officeHours.end_time,"yyyy-MM-ddTHH:mm"),recur_end:this.datePipe.transform(new Date(O).setDate(O.getDate()+1),"yyyy-MM-dd")})),this.days=this.officeHours.recurrence_pattern?{[W.Monday]:this.officeHours.recurrence_pattern.recur_monday,[W.Tuesday]:this.officeHours.recurrence_pattern.recur_tuesday,[W.Wednesday]:this.officeHours.recurrence_pattern.recur_wednesday,[W.Thursday]:this.officeHours.recurrence_pattern.recur_thursday,[W.Friday]:this.officeHours.recurrence_pattern.recur_friday,[W.Saturday]:this.officeHours.recurrence_pattern.recur_saturday,[W.Sunday]:this.officeHours.recurrence_pattern.recur_sunday}:this.days,this.officeHours.id!==-1&&(this.officeHoursForm.controls.recurs.setValue(this.officeHours.recurrence_pattern_id!==void 0),this.officeHoursForm.controls.recurs.disable(),this.officeHoursForm.controls.recur_end.disable()),this.filteredRooms=this.rooms}toggleDay(i){this.days[i]=!this.days[i]}isNew(){return this.officeHours.id===-1}action(){return this.isNew()?"Created":"Updated"}toggleUpdateRecurrencePattern(i){this.updateRecurrencePattern=i,console.log(this.updateRecurrencePattern),this.officeHoursForm.controls.recurs.setValue(this.officeHours.recurrence_pattern_id!==void 0),!this.isNew()&&i?(this.officeHoursForm.controls.recurs.enable(),this.officeHoursForm.controls.recur_end.enable()):(this.officeHoursForm.controls.recurs.disable(),this.officeHoursForm.controls.recur_end.disable())}onSubmit(){if(this.officeHoursForm.valid){let t=this.officeHours,i=this.officeHoursForm.value,{recurs:r,recur_end:n}=i,a=Fi(i,["recurs","recur_end"]);Object.assign(t,a),t.start_time=new Date(a.start_time),t.end_time=new Date(a.end_time);let u=+this.route.parent.snapshot.params.course_site_id;t.course_site_id=u;let h;if(r||this.updateRecurrencePattern){let b={start_date:new Date(new Date(t.start_time).setHours(0,0,0,0)),end_date:n?new Date(new Date(n).setHours(0,0,0,0)):null,recur_monday:this.days[W.Monday],recur_tuesday:this.days[W.Tuesday],recur_wednesday:this.days[W.Wednesday],recur_thursday:this.days[W.Thursday],recur_friday:this.days[W.Friday],recur_saturday:this.days[W.Saturday],recur_sunday:this.days[W.Sunday]};h=this.isNew()?this.myCoursesService.createRecurringOfficeHours(u,t,b):this.myCoursesService.updateRecurringOfficeHours(u,t,b),h.subscribe({next:O=>this.onSuccess(O[0]),error:O=>this.onError(O)})}else h=this.isNew()?this.myCoursesService.createOfficeHours(u,t):this.myCoursesService.updateOfficeHours(u,t),h.subscribe({next:b=>this.onSuccess(b),error:b=>this.onError(b)})}}onSuccess(i){this.router.navigate(["/course/",i.course_site_id,"office-hours"]),this.snackBar.open(`Office Hours ${this.action()}`,"",{duration:2e3})}onError(i){this.snackBar.open(`${i.error.message}`,"",{duration:2e3})}onReset(){this.officeHoursForm.patchValue(Object.assign({},this.officeHours,{start_time:this.datePipe.transform(this.officeHours.start_time,"yyyy-MM-ddTHH:mm"),end_time:this.datePipe.transform(this.officeHours.end_time,"yyyy-MM-ddTHH:mm")}))}modeChanged(){this.officeHoursForm.controls.mode.value===0?this.officeHoursForm.controls.room_id.setValue(""):this.officeHoursForm.controls.room_id.setValue(this.virtualRoom.id)}numberToType(i){return i===0?"Office Hours":i===1?"Tutoring":i===2?"Review Session":""}numberToMode(i){return i===0?"In-Person":i===1?"Virtual - Student Link":i===2?"Virtual - Our Link":""}filterRooms(){let i=this.input?.nativeElement.value.toLowerCase();this.filteredRooms=this.rooms.filter(t=>t.id?.toLowerCase().includes(i?.toLowerCase()||""))}};ot.Route={path:"office-hours/:event_id/edit",title:"Office Hours Editor",component:ot,canActivate:[xo(["UTA","GTA","Instructor"])],resolve:{officeHours:Po,rooms:Zn}},ot.\u0275fac=function(t){return new(t||ot)(p(Q),p(le),p(xt),p(Y),p(T),p(J))},ot.\u0275cmp=M({type:ot,selectors:[["app-office-hours-editor"]],viewQuery:function(t,r){if(t&1&&Dt(ks,5),t&2){let n;pt(n=ft())&&(r.input=n.first)}},standalone:!1,decls:51,vars:11,consts:[["roomInput",""],["auto","matAutocomplete"],["endDatePicker",""],[3,"ngSubmit","formGroup"],["appearance","outlined"],["appearance","outline"],["formControlName","type"],[3,"value"],["formControlName","mode",3,"selectionChange"],["matInput","","placeholder","Descibe where the office hours room is here.","formControlName","location_description","name","location_description"],["appearance","outline","color","accent"],["matInput","","placeholder","Enter description here.","formControlName","description","name","description"],[1,"time-form-fields-container"],["matInput","","type","datetime-local","placeholder","Start Time","formControlName","start_time","name","start_time","required",""],["matInput","","type","datetime-local","placeholder","End Time","formControlName","end_time","name","end_time","required",""],["className","recurrence-update-toggle"],["formControlName","recurs"],["mat-stroked-button","","color","secondary","type","button",3,"click"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["type","text","matInput","","formControlName","room_id",3,"input","focus","matAutocomplete"],["requireSelection",""],["className","recurrence-update-toggle",3,"change"],["name","days","aria-label","Days to Recur","multiple","",3,"hideMultipleSelectionIndicator"],[3,"value","checked","disabled"],["matInput","","formControlName","recur_end","name","recur_end","required","",3,"click","max","matDatepicker"],["matIconSuffix","",3,"for"],[3,"change","value","checked","disabled"]],template:function(t,r){t&1&&(s(0,"form",3),_("ngSubmit",function(){return r.onSubmit()}),s(1,"mat-pane",4)(2,"mat-card-header")(3,"mat-card-title"),c(4),o()(),s(5,"mat-card-content")(6,"mat-form-field",5)(7,"mat-label"),c(8,"Type"),o(),s(9,"mat-select",6),P(10,Is,2,2,"mat-option",7,ut),o()(),s(12,"mat-form-field",5)(13,"mat-label"),c(14,"Mode"),o(),s(15,"mat-select",8),_("selectionChange",function(){return r.modeChanged()}),P(16,Os,2,2,"mat-option",7,ut),o()(),v(18,Ps,9,1,"mat-form-field",5),s(19,"mat-form-field",5)(20,"mat-label"),c(21,"Location Description or Zoom Link"),o(),f(22,"input",9),o(),s(23,"mat-form-field",10)(24,"mat-label"),c(25,"Office Hours Description"),o(),f(26,"textarea",11),o(),s(27,"div",12)(28,"mat-form-field",10)(29,"mat-label"),c(30,"Office Hours Event Start Time"),o(),f(31,"input",13),o(),s(32,"mat-form-field",10)(33,"mat-label"),c(34,"Office Hours Event End Time"),o(),f(35,"input",14),o()(),v(36,Hs,2,0,"mat-checkbox",15),s(37,"mat-form-field",5)(38,"mat-label"),c(39,"Recurrence Pattern"),o(),s(40,"mat-select",16),P(41,Fs,2,2,"mat-option",7,ut),o()(),v(43,Vs,11,7),v(44,Bs,2,0,"mat-error"),v(45,As,2,0,"mat-error"),o(),s(46,"mat-card-actions")(47,"button",17),_("click",function(){return r.onReset()}),c(48," Reset "),o(),s(49,"button",18),c(50," Save "),o()()()()),t&2&&(d("formGroup",r.officeHoursForm),l(4),k(" ",r.isNew()?"Create":"Update"," Office Hours "),l(6),H(z(8,Ho)),l(6),H(z(9,Ho)),l(2),x(r.officeHoursForm.controls.mode.value===0?18:-1),l(18),x(r.isNew()?-1:36),l(5),H(z(10,ws)),l(2),x(r.officeHoursForm.getRawValue().recurs?43:-1),l(),x(r.officeHoursForm.hasError("dateRangeInvalid")?44:-1),l(),x(r.officeHoursForm.value.recurs&&r.officeHoursForm.hasError("recurEndDateInvalid")?45:-1),l(4),d("disabled",r.officeHoursForm.invalid))},dependencies:[X,de,V,B,L,R,ue,me,Zt,Cn,Pe,ve,ye,ge,U,Se,Me,Yt,Jt,si,ci,De,Mt,kt,Ln,qn,jn,Xt,Zi],styles:["mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding-top:16px}mat-form-field[_ngcontent-%COMP%]{width:100%}.horizontal-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:16px}.mat-mdc-card-actions[_ngcontent-%COMP%]{padding-bottom:16px;justify-content:end;gap:12px}.recurrence-update-toggle[_ngcontent-%COMP%]{margin-top:-20px}.time-form-fields-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;column-gap:12px}mat-button-toggle-group[_ngcontent-%COMP%]{width:100%;margin-top:-16px;margin-bottom:16px}mat-button-toggle[_ngcontent-%COMP%]{width:100%}"]});var xi=ot;var Ns=e=>[e],Ls=()=>[],Fo=(()=>{let i=class i{constructor(r,n,a){this.dialogRef=r,this.data=n,this.myCoursesService=a,this.studentWaitTime=0,this.ticketDuration=0;let u=new Date(n.ticket.created_at),h=new Date(n.ticket.called_at),b=new Date(n.ticket.closed_at);this.studentWaitTime=(h.getTime()-u.getTime())/1e3/60,this.ticketDuration=(b.getTime()-h.getTime())/1e3/60}close(){this.dialogRef.close()}};i.\u0275fac=function(n){return new(n||i)(p(we),p(Ee),p(T))},i.\u0275cmp=M({type:i,selectors:[["dialog-ticket-details"]],standalone:!1,decls:40,vars:28,consts:[["mat-dialog-title",""],[1,"semibold"],[1,"semibold","user-tag"],[3,"users"],["nameSuffix"," (Staff)",3,"users"],["mat-card-subtitle",""],["markdown",""]],template:function(n,a){n&1&&(s(0,"h2",0),c(1,"Ticket Details"),o(),s(2,"mat-dialog-content")(3,"p")(4,"span",1),c(5,"Ticket Type: "),o(),c(6),o(),s(7,"p")(8,"span",1),c(9,"Created: "),o(),c(10),w(11,"date"),w(12,"date"),o(),s(13,"p")(14,"span",1),c(15,"Student Wait Time: "),o(),c(16),o(),s(17,"p")(18,"span",1),c(19,"Assisted From: "),o(),c(20),w(21,"date"),w(22,"date"),o(),f(23,"mat-divider"),s(24,"span",2),c(25,"Student:"),o(),f(26,"user-chip-list",3),s(27,"span",2),c(28,"Caller:"),o(),f(29,"user-chip-list",4)(30,"mat-divider"),s(31,"p",5),c(32,"Description"),o(),s(33,"p",6),c(34),o(),f(35,"mat-divider"),s(36,"p",5),c(37,"Caller Notes"),o(),s(38,"p",6),c(39),o()()),n&2&&(l(6),k(" ",a.data.ticket.type," "),l(4),$(" ",E(11,13,a.data.ticket.created_at,"EEEE, MMMM d, y")," at ",E(12,16,a.data.ticket.created_at,"hh:mm a")," "),l(6),$(" ",a.studentWaitTime.toFixed(0)," minute",a.studentWaitTime!==1?"s":""," "),l(4),zi(" ",E(21,19,a.data.ticket.called_at,"hh:mm a")," - ",E(22,22,a.data.ticket.closed_at,"hh:mm a")," (",a.ticketDuration.toFixed(0)," minute",a.ticketDuration!==1?"s":"",") "),l(6),d("users",a.data.ticket.creators),l(3),d("users",a.data.ticket.caller?_t(25,Ns,a.data.ticket.caller):z(27,Ls)),l(5),k(" ",a.data.ticket.description," "),l(5),k(" ",a.data.ticket.caller_notes??"None"," "))},dependencies:[et,yt,Z,fe,Ie,Oe,J],styles:[".semibold[_ngcontent-%COMP%]{font-weight:500}.mat-divider[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px}.user-tag[_ngcontent-%COMP%]{margin-right:8px}"]});let e=i;return e})();var Vo=Ri(eo());function qs(e,i){if(e&1&&(s(0,"p",3)(1,"span",5),c(2),o(),c(3),o()),e&2){let t=m();l(2),y(t.rightStatistic()),l(),k("",t.rightStatisticLabel()," ")}}var Ro=(()=>{let i=class i{constructor(){this.title=ht(""),this.leftStatistic=ht(""),this.leftStatisticLabel=ht(""),this.rightStatistic=ht(void 0),this.rightStatisticLabel=ht(void 0)}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=M({type:i,selectors:[["office-hours-statistics-card"]],inputs:{title:[1,"title"],leftStatistic:[1,"leftStatistic"],leftStatisticLabel:[1,"leftStatisticLabel"],rightStatistic:[1,"rightStatistic"],rightStatisticLabel:[1,"rightStatisticLabel"]},standalone:!1,decls:10,vars:4,consts:[["appearance","outlined",1,"statistics-card"],[1,"title-medium"],[1,"statistics-card-content"],[1,"statistics-card-statistic"],[1,"text-badge","inverse-primary-background-color","label-large"],[1,"text-badge","surface-container-high","label-large"]],template:function(n,a){n&1&&(s(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),c(3),o()(),s(4,"mat-card-content",2)(5,"p",3)(6,"span",4),c(7),o(),c(8),o(),v(9,qs,4,2,"p",3),o()()),n&2&&(l(3),y(a.title()),l(4),y(a.leftStatistic()),l(),k("",a.leftStatisticLabel()," "),l(),x(a.rightStatistic()&&a.rightStatisticLabel()?9:-1))},dependencies:[ee,V,B,L],styles:[".statistics-card{max-width:max-content!important;margin:0!important}.statistics-row[_ngcontent-%COMP%]{margin-top:16px}.text-badge[_ngcontent-%COMP%]{height:32px;width:48px;text-align:center;padding:6px 12px;border-radius:14px;margin-right:8px;line-height:32px;color:#fff}.statistics-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:24px;padding-top:12px}.statistics-card-statistic[_ngcontent-%COMP%]{margin-bottom:0}"]});let e=i;return e})();var Bo=()=>[],Gs=e=>[e],Ws=(e,i)=>i.id;function $s(e,i){if(e&1){let t=S();s(0,"div",22),_("click",function(){g(t);let n=m(2);return C(n.clearStudentFilter())}),f(1,"mat-divider",23),s(2,"mat-icon",16),c(3,"close"),o()()}e&2&&(l(),d("vertical",!0))}function zs(e,i){if(e&1){let t=S();s(0,"div",22),_("click",function(){g(t);let n=m(2);return C(n.clearStaffFilter())}),f(1,"mat-divider",23),s(2,"mat-icon",16),c(3,"close"),o()()}e&2&&(l(),d("vertical",!0))}function Qs(e,i){if(e&1&&(s(0,"span"),c(1),w(2,"date"),o()),e&2){let t=m(3);l(),k(" - ",E(2,1,t.selectedEndDate(),"shortDate"))}}function Us(e,i){if(e&1&&(s(0,"span"),c(1),w(2,"date"),o(),v(3,Qs,3,4,"span")),e&2){let t=m(2);l(),k("",E(2,2,t.selectedStartDate(),"shortDate")," "),l(2),x(t.selectedEndDate()?3:-1)}}function Ys(e,i){e&1&&(s(0,"span"),c(1,"Date"),o())}function Js(e,i){if(e&1){let t=S();s(0,"div",22),_("click",function(){g(t);let n=m(2);return C(n.clearDateRangeFilter())}),f(1,"mat-divider",23),s(2,"mat-icon",16),c(3,"close"),o()()}e&2&&(l(),d("vertical",!0))}function Zs(e,i){if(e&1){let t=S();s(0,"div",3)(1,"mat-filter-chip",8),oe("selectedItemsChange",function(n){g(t);let a=m();return ne(a.selectedStudentFilterOptions,n)||(a.selectedStudentFilterOptions=n),C(n)}),v(2,$s,4,1,"div",9),o(),s(3,"mat-filter-chip",10),oe("selectedItemsChange",function(n){g(t);let a=m();return ne(a.selectedStaffFilterOptions,n)||(a.selectedStaffFilterOptions=n),C(n)}),v(4,zs,4,1,"div",9),o(),s(5,"div",11)(6,"mat-chip",12)(7,"div",13)(8,"div",14),_("click",function(){g(t);let n=K(20);return C(n.open())}),s(9,"mat-icon",15),c(10,"date_range"),o(),v(11,Us,4,5)(12,Ys,2,0,"span"),s(13,"mat-icon",16),c(14,"arrow_drop_down"),o()(),v(15,Js,4,1,"div",9),o()(),s(16,"mat-date-range-input",17)(17,"input",18),oe("ngModelChange",function(n){g(t);let a=m();return ne(a.selectedStartDate,n)||(a.selectedStartDate=n),C(n)}),o(),s(18,"input",19),oe("ngModelChange",function(n){g(t);let a=m();return ne(a.selectedEndDate,n)||(a.selectedEndDate=n),C(n)}),o()(),f(19,"mat-date-range-picker",null,0),o(),s(21,"button",20),_("click",function(){g(t);let n=m();return C(n.downloadTicketData())}),s(22,"mat-icon",21),c(23,"download"),o()()()}if(e&2){let t,r,n=K(20),a=m();l(),d("searchableItems",a.studentFilterOptions()),ie("selectedItems",a.selectedStudentFilterOptions),d("filterLogic",a.profileFilterLogic),l(),x(a.studentFilterOptions().length?2:-1),l(),d("searchableItems",a.staffFilterOptions()),ie("selectedItems",a.selectedStaffFilterOptions),d("filterLogic",a.profileFilterLogic),l(),x(a.staffFilterOptions().length?4:-1),l(2),d("highlighted",a.selectedStartDate()||a.selectedEndDate()),l(5),x(a.selectedStartDate()||a.selectedEndDate()?11:12),l(4),x(a.selectedStartDate()||a.selectedEndDate()?15:-1),l(),be("cdk-visually-hidden",!0),d("rangePicker",n)("min",(t=a.filterOptions())==null?null:t.term_start)("max",(r=a.filterOptions())==null?null:r.term_end),l(),be("cdk-visually-hidden",!0),ie("ngModel",a.selectedStartDate),l(),be("cdk-visually-hidden",!0),ie("ngModel",a.selectedEndDate)}}function Xs(e,i){if(e&1&&(s(0,"mat-icon"),c(1,"feedback"),o()),e&2){let t=m().$implicit;qt("feedback-indicator "+(t.has_concerns?"font-error":"font-secondary"))}}function Ks(e,i){if(e&1){let t=S();s(0,"div",25)(1,"div",27)(2,"p"),c(3),w(4,"date"),f(5,"br"),c(6),w(7,"date"),o(),s(8,"p")(9,"span",28),c(10),o()(),s(11,"div",29),f(12,"user-chip-list",30)(13,"user-chip-list",31),o()(),s(14,"div",32),v(15,Xs,2,2,"mat-icon",33),s(16,"button",34),_("click",function(){let n=g(t).$implicit,a=m(2);return C(a.openTicketDetails(n))}),s(17,"mat-icon"),c(18,"more_vert"),o()()()()}if(e&2){let t=i.$implicit;l(3),y(E(4,6,t.called_at,"EEE, M/d")),l(3),y(E(7,9,t.called_at,"shortTime")),l(4),y(t.type),l(2),d("users",t.creators),l(),d("users",t.caller?_t(12,Gs,t.caller):z(14,Bo)),l(2),x(t.has_concerns||t.caller_notes&&t.caller_notes!=""?15:-1)}}function ec(e,i){e&1&&(s(0,"p"),c(1,"No tickets found."),o())}function tc(e,i){if(e&1){let t=S();s(0,"mat-card",7)(1,"mat-card-content")(2,"div",24),P(3,Ks,19,15,"div",25,Ws,!1,ec,2,0,"p"),o(),s(6,"mat-paginator",26),_("page",function(n){g(t);let a=m();return C(a.handlePageEvent(n))}),o()()()}if(e&2){let t,r=m();l(3),H(((t=r.paginatedTickets())==null?null:t.items)??z(4,Bo)),l(3),d("length",r.paginatedTickets().length)("pageSize",r.paginatedTickets().params.page_size)("pageIndex",r.paginatedTickets().params.page)}}var Ao=(()=>{let i=class i{loadPaginatedData(r){this.myCoursesService.getPaginatedOfficeHoursStatisticsTicketHistory(this.courseSiteId,r).subscribe(n=>{this.paginatedTickets.set(n),this.previousPaginationParams=n.params}),this.myCoursesService.getOfficeHoursTicketStatistics(this.courseSiteId,r).subscribe(n=>{this.ticketStatistics.set(n)})}handlePageEvent(r){let n=this.previousPaginationParams;n.page=r.pageIndex,n.page_size=r.pageSize,this.loadPaginatedData(n)}constructor(r,n,a,u,h){this.route=r,this.router=n,this.myCoursesService=a,this.dialog=u,this.snackBar=h,this.filterOptions=D(void 0),this.studentFilterOptions=Pt(()=>this.filterOptions()?.students.map(b=>({displayText:b.first_name+" "+b.last_name,item:b}))??[]),this.selectedStudentFilterOptions=D([]),this.staffFilterOptions=Pt(()=>this.filterOptions()?.staff.map(b=>({displayText:b.first_name+" "+b.last_name,item:b}))??[]),this.selectedStaffFilterOptions=D([]),this.profileFilterLogic=(b,O)=>b.displayText.toLowerCase().includes(O.toLowerCase()),this.selectedStartDate=Mi(void 0),this.selectedEndDate=Mi(void 0),this.paginatedTickets=D(void 0),this.previousPaginationParams=Kn,this.ticketStatistics=D(void 0),this.filterEffect=Ht(()=>{this.loadPaginatedData({page:0,page_size:25,student_ids:JSON.stringify(this.selectedStudentFilterOptions().map(b=>b.item.id)),staff_ids:JSON.stringify(this.selectedStaffFilterOptions().map(b=>b.item.id)),range_start:this.selectedStartDate()?.toISOString()??"",range_end:this.selectedEndDate()?.toISOString()??""})}),this.urlUpdateEffect=Ht(()=>{let b=this.selectedStudentFilterOptions().map(he=>he.item.id).join(","),O=this.selectedStaffFilterOptions().map(he=>he.item.id).join(","),j=this.selectedStartDate()?.toISOString()??"",xe=this.selectedEndDate()?.toISOString()??"";(b||O||j||xe)&&this.router.navigate([],{relativeTo:this.route,queryParams:{studentId:b||null,staffId:O||null,range_start:j||null,range_end:xe||null}})},{allowSignalWrites:!0}),this.courseSiteId=+this.route.parent.snapshot.params.course_site_id,this.myCoursesService.getOfficeHoursStatisticsFilterOptions(this.courseSiteId).subscribe(b=>{this.filterOptions.set(b);let O=this.route.snapshot.queryParamMap.get("studentId")?.split(","),j=this.route.snapshot.queryParamMap.get("staffId")?.split(","),xe=(O??[]).reduce((Fe,rt)=>{let Ot=this.studentFilterOptions().find(bi=>bi.item.id===+rt);return Ot&&Fe.push(Ot),Fe},[]),he=(j??[]).reduce((Fe,rt)=>{let Ot=this.staffFilterOptions().find(bi=>bi.item.id===+rt);return Ot&&Fe.push(Ot),Fe},[]);this.selectedStudentFilterOptions.set(xe),this.selectedStaffFilterOptions.set(he)})}clearStudentFilter(){this.selectedStudentFilterOptions.set([])}clearStaffFilter(){this.selectedStaffFilterOptions.set([])}clearDateRangeFilter(){this.selectedStartDate.set(void 0),this.selectedEndDate.set(void 0)}clearFilters(){this.selectedStudentFilterOptions.set([]),this.selectedStaffFilterOptions.set([]),this.selectedStartDate.set(void 0),this.selectedEndDate.set(void 0)}openTicketDetails(r){this.dialog.open(Fo,{height:"500px",width:"450px",data:{ticket:r}})}downloadTicketData(){this.myCoursesService.getOfficeHoursTicketCsv(this.courseSiteId,{student_ids:JSON.stringify(this.selectedStudentFilterOptions().map(r=>r.item.id)),staff_ids:JSON.stringify(this.selectedStaffFilterOptions().map(r=>r.item.id)),range_start:this.selectedStartDate()?.toISOString()??"",range_end:this.selectedEndDate()?.toISOString()??""}).subscribe({next:r=>{(0,Vo.default)(r,"ticket-data.csv"),this.snackBar.open("Office hours data downloaded.","",{duration:2e3})},error:()=>{this.snackBar.open("There was an error downloading office hours data.","",{duration:2e3})}})}};i.Route={path:"statistics",title:"Course",component:i},i.\u0275fac=function(n){return new(n||i)(p(Q),p(le),p(T),p(Te),p(Y))},i.\u0275cmp=M({type:i,selectors:[["app-statistics"]],inputs:{selectedStartDate:[1,"selectedStartDate"],selectedEndDate:[1,"selectedEndDate"]},outputs:{selectedStartDate:"selectedStartDateChange",selectedEndDate:"selectedEndDateChange"},standalone:!1,decls:15,vars:6,consts:[["datePicker",""],[1,"container"],[1,"ticket-history-toolbar"],[1,"ticket-history-toolbar-options"],[1,"statistics-row"],["title","Total Tickets","leftStatisticLabel","this week","rightStatisticLabel","overall",3,"leftStatistic","rightStatistic"],["title","Queue Statistics","leftStatisticLabel","average wait (m)","rightStatisticLabel","average duration (m)",3,"leftStatistic","rightStatistic"],["appearance","outlined",1,"ticket-history-card"],["placeholder","Students","leadingIcon","person_raised_hand","dropdownAlignment","right",3,"selectedItemsChange","searchableItems","selectedItems","filterLogic"],[1,"mat-filter-chip-accessory"],["placeholder","Staff","leadingIcon","group","dropdownAlignment","right",3,"selectedItemsChange","searchableItems","selectedItems","filterLogic"],[1,"date-picker-container"],["disableRipple","",3,"highlighted"],[1,"mat-filter-chip-content"],[1,"mat-filter-chip-main-content",3,"click"],["matChipTrailingIcon","",1,"font-primary","mat-filter-chip-leading-icon"],["matChipTrailingIcon",""],[1,"date-input",3,"rangePicker","min","max"],["matStartDate","",3,"ngModelChange","ngModel"],["matEndDate","",3,"ngModelChange","ngModel"],["mat-flat-button","",1,"secondary-button",3,"click"],["id","download-button-icon"],[1,"mat-filter-chip-accessory",3,"click"],[1,"mat-filter-chip-divider",3,"vertical"],[1,"ticket-list"],[1,"ticket-row"],[3,"page","length","pageSize","pageIndex"],[1,"ticket-row-leading-content"],[1,"semibold"],[1,"ticket-row-user-chips"],[3,"users"],["nameSuffix"," (Staff)",3,"users"],[1,"ticket-row-trailing-content"],[3,"class"],["mat-icon-button","",3,"click"]],template:function(n,a){if(n&1&&(s(0,"div",1)(1,"mat-pane")(2,"mat-card-header")(3,"mat-card-title"),c(4,"Statistics"),o(),f(5,"mat-divider"),o(),s(6,"mat-card-content")(7,"div",2)(8,"mat-card-subtitle"),c(9,"Ticket History"),o(),v(10,Zs,24,22,"div",3),o(),s(11,"div",4),f(12,"office-hours-statistics-card",5)(13,"office-hours-statistics-card",6),o(),v(14,tc,7,5,"mat-card",7),o()()()),n&2){let u,h,b,O;l(10),x(a.filterOptions()?10:-1),l(2),d("leftStatistic",((u=a.ticketStatistics())==null||u.total_tickets_weekly==null?null:u.total_tickets_weekly.toFixed(0))??"---")("rightStatistic",((h=a.ticketStatistics())==null||h.total_tickets==null?null:h.total_tickets.toFixed(0))??"---"),l(),d("leftStatistic",((b=a.ticketStatistics())==null||b.average_wait_time==null?null:b.average_wait_time.toFixed(2))??"---")("rightStatistic",((O=a.ticketStatistics())==null||O.average_duration==null?null:O.average_duration.toFixed(2))??"---"),l(),x(a.paginatedTickets()?14:-1)}},dependencies:[et,X,An,ee,V,B,Z,L,fe,R,ke,pe,ge,U,Ce,St,bt,On,Gn,Wn,$n,zn,Ro,J],styles:[".mat-pane{margin-right:32px!important}.container[_ngcontent-%COMP%]{height:100%}.container[_ngcontent-%COMP%]     .mat-pane{max-width:100%!important;min-height:73vh;margin-bottom:32px!important}.mat-mdc-card-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding-bottom:16px}.ticket-history-toolbar[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:center;justify-content:space-between}.ticket-history-toolbar-options[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:16px}#download-button-icon[_ngcontent-%COMP%]{margin-right:-8px}.mat-filter-chip-content[_ngcontent-%COMP%], .mat-filter-chip-main-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.mat-filter-chip-leading-icon[_ngcontent-%COMP%]{padding-left:0!important}.mat-filter-chip-accessory[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.date-input[_ngcontent-%COMP%]{position:relative;float:bottom;margin-top:auto;margin-bottom:-10px}.date-picker-container[_ngcontent-%COMP%]{padding-top:-12px;height:32px}.mat-filter-chip-divider[_ngcontent-%COMP%]{height:30px}.statistics-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:24px;margin-top:16px}  .ticket-history-card{max-width:100%!important;max-height:100%!important;margin-left:0!important;margin-right:0!important;margin-top:16px}.ticket-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:16px}.ticket-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0}.semibold[_ngcontent-%COMP%]{font-weight:500}.ticket-row-user-chips[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px;padding-left:16px;padding-bottom:-8px}  .ticket-row-user-chips>.user-chips{margin-bottom:0!important}.ticket-row-leading-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:16px}.ticket-row-trailing-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.feedback-indicator[_ngcontent-%COMP%]{margin-top:4px}.ticket-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.text-badge[_ngcontent-%COMP%]{height:20px;width:76px;text-align:center;padding:6px 12px;border-radius:14px;margin-right:8px;line-height:32px;color:#fff}"]});let e=i;return e})();var ic=[ro.Route,{path:"catalog",component:ao,children:[co.Route,lo.Route]},{path:"course/:course_site_id",component:mo,children:[_o.Route,Do.Route,fi.Route,Ci.Route,vi.Route,xi.Route,Ao.Route]}],No=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=mt({type:i}),i.\u0275inj=dt({imports:[Ft.forChild(ic),Ft]});let e=i;return e})();var Km=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=mt({type:i}),i.\u0275inj=dt({providers:[Ii],imports:[Xi,No,Ft,Nn,hn,fn,Sn,_n,xn,wn,Fn,vn,Pn,nn,on,gn,Hn,to,Dn,bn,Rn,Mn,Ii,Qn,go,Xt,In,kn]});let e=i;return e})();export{Km as MyCoursesModule};
