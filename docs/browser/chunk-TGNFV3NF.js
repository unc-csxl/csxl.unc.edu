import{Df as u,H as e,K as g,N as o,W as p,Wb as c,jc as l,xb as h,ye as m}from"./chunk-KVV3I3RP.js";var y=(()=>{let a=class a{constructor(i,t,n,r){this.http=i,this.auth=t,this.snackBar=n,this.permissionService=r,this.organizationsSignal=p([]),this.organizations=this.organizationsSignal.asReadonly(),this.adminOrganizations=h(()=>this.organizations().filter(z=>this.permissionService.checkSignal("organization.*","organization/"+z.slug))),this.getOrganizations()}getOrganizations(){this.http.get("/api/organizations").subscribe(i=>{this.organizationsSignal.set(i)})}getOrganization(i){return this.http.get("/api/organizations/"+i)}createOrganization(i){return this.http.post("/api/organizations",i).pipe(e(t=>this.organizationsSignal.update(n=>[...n,t])))}updateOrganization(i){return this.http.put("/api/organizations",i).pipe(e(t=>this.organizationsSignal.update(n=>[...n.filter(r=>r.id!=t.id),t])))}deleteOrganization(i){return this.http.delete(`/api/organizations/${i.slug}`).pipe(e(t=>{this.organizationsSignal.update(n=>n.filter(r=>r.id!=t.id))}))}};a.\u0275fac=function(t){return new(t||a)(o(c),o(l),o(m),o(u))},a.\u0275prov=g({token:a,factory:a.\u0275fac,providedIn:"root"});let s=a;return s})();export{y as a};
