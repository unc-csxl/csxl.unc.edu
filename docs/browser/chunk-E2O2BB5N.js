import{b as M,d as St,e as wt}from"./chunk-UEXQXD4E.js";import{a as ot}from"./chunk-3NBKQ2M3.js";import{$e as z,Aa as ct,Ba as _t,Ca as pt,Cd as J,Da as C,Ea as n,Fa as a,Fd as N,Ff as Rt,Ga as S,Gd as P,H as lt,Ie as gt,Jd as H,Je as V,K as I,Ka as _,La as p,Lb as G,N as y,Na as R,P as b,Pa as v,Q as g,Ra as c,W as L,Wb as X,Z as mt,ab as o,af as Y,bb as x,bf as q,cb as f,db as O,df as Q,ea as l,ec as Ct,ef as Z,gf as tt,hf as et,ia as A,jf as it,kf as nt,la as T,mf as at,n as st,oe as ft,pe as ut,qa as d,qb as w,qe as ht,r as U,re as vt,sa as dt,sb as E,se as xt,ue as bt,v as W,wa as u,xb as $,ya as h,yf as Et}from"./chunk-KVV3I3RP.js";function $t(t,e){if(t&1){let i=R();n(0,"mat-list-item",2),v("click",function(){b(i);let s=c().$implicit,m=c();return g(m.reserve(s))}),n(1,"span",3),o(2),a(),n(3,"span",4),o(4),a(),n(5,"p",5),o(6),a(),n(7,"h3",6),o(8,"\u203A"),a()()}if(t&2){let i=c().$implicit;l(2),x(i.title),l(2),x(i.seats_available_now.length),l(2),x(i.availabilityString())}}function Xt(t,e){if(t&1){let i=R();n(0,"mat-list-item",2),v("click",function(){b(i);let s=c(2).$implicit,m=c();return g(m.reserve(s))}),n(1,"h3",3),o(2),a(),n(3,"div",7),o(4,"1"),a(),n(5,"p",5),o(6),a(),n(7,"h3",6),o(8,"\u203A"),a()()}if(t&2){let i=c(2).$implicit;l(2),x(i.title),l(4),x(i.availabilityString())}}function Nt(t,e){if(t&1&&(n(0,"mat-list-item")(1,"h3",3),o(2),a(),n(3,"div",8),o(4,"0"),a(),n(5,"p",9),o(6,"None available"),a()()),t&2){let i=c(2).$implicit;l(2),x(i.title)}}function Pt(t,e){if(t&1&&u(0,Xt,9,2,"mat-list-item")(1,Nt,7,1,"mat-list-item"),t&2){let i=c().$implicit;h(i.reservable_soon?0:1)}}function Ht(t,e){if(t&1&&u(0,$t,9,3,"mat-list-item")(1,Pt,2,1),t&2){let i=e.$implicit;h(i.reservable_now?0:1)}}var K=class{constructor(e){this.reservable_now=!1,this.seats_available_now=[],this.reservable_soon=!1,this.seats_available_soon=[],this.title=e}push(e){let r=new Date(Date.now()+59e3),s=new Date(Date.now()+600*1e3);e.availability[0].start<=r?(this.seats_available_now.push(e),this.seats_available_now.length===1&&(this.reservable_now=!0,this.next_available=e)):e.availability[0].start<=s&&(this.seats_available_soon.push(e),!this.reservable_now&&this.seats_available_soon.length===1&&(this.reservable_soon=!0,this.next_available=e))}availabilityString(){let e="Available ";if(this.reservable_now)e+="now";else if(this.reservable_soon){e+=" in ";let i=new Date,r=this.seats_available_soon[0].availability[0].start,s=Math.ceil((r.getTime()-i.getTime())/(60*1e3));e+=` ${s} minutes`}else return"None available";return e}},Vt=0,Ft=1,jt=2,kt=(()=>{let e=class e{constructor(){this.seatsSelected=new dt,this.categories=this.initCategories()}ngOnChanges(r){this.seat_availability=r.seat_availability.currentValue,this.categories=this.initCategories();for(let s of this.seat_availability)s.has_monitor?s.sit_stand?this.categories[Ft].push(s):this.categories[Vt].push(s):this.categories[jt].push(s)}reserve(r){this.seatsSelected.emit([...r.seats_available_now,...r.seats_available_soon])}initCategories(){return[new K("Sitting Desk with Monitor"),new K("Standing Desk with Monitor"),new K("Communal Area")]}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=T({type:e,selectors:[["coworking-dropin-availability-card"]],inputs:{seat_availability:"seat_availability"},outputs:{seatsSelected:"seatsSelected"},standalone:!1,features:[mt],decls:10,vars:0,consts:[["appearance","outlined"],[1,"dropin-header"],[3,"click"],["matListItemTitle",""],["matListItemIcon","",1,"primary-background"],["matListItemLine",""],["matListItemMeta",""],["matListItemIcon","",1,"upcoming","secondary-background"],["matListItemIcon","",1,"unavailable","tertiary-background"],["matListItemLine","",1,"tertiary-color"]],template:function(s,m){s&1&&(n(0,"mat-pane",0)(1,"mat-card-header",1)(2,"mat-card-title"),o(3,"Drop-in to The XL (SN156)"),a()(),n(4,"mat-card-content")(5,"p"),o(6," The following seats are available for drop-ins. Reserve here and check-in within 10 minutes. "),a(),n(7,"mat-action-list"),_t(8,Ht,2,1,null,null,ct),a()()()),s&2&&(l(8),pt(m.categories))},dependencies:[P,H,N,xt,bt,vt,ut,ft,ht,V],styles:[".mat-mdc-list-item[_ngcontent-%COMP%]{border-radius:12px}.mdc-list-item.mdc-list-item--with-trailing-meta[_ngcontent-%COMP%]   .mdc-list-item__end[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-size:32px;margin-top:auto;margin-bottom:auto}.mdc-list-item__content[_ngcontent-%COMP%]{align-items:center}.mdc-list-item__primary-text[_ngcontent-%COMP%]{margin-top:-4px!important;margin-left:4px!important}.mdc-list-item__secondary-text[_ngcontent-%COMP%]{margin-left:4px!important;margin-bottom:0}.mdc-list-item--with-leading-icon[_ngcontent-%COMP%]   .mdc-list-item__start[_ngcontent-%COMP%]{font-size:24px;background:#4786c6;width:36px;height:36px;text-align:center;margin:auto 8px;padding-bottom:0;line-height:36px;border-radius:100%;color:#fff}.mdc-list-item--with-leading-icon[_ngcontent-%COMP%]   .mdc-list-item__start.unavailable[_ngcontent-%COMP%]{background:#612d23}.mdc-list-item--with-leading-icon[_ngcontent-%COMP%]   .mdc-list-item__start.upcoming[_ngcontent-%COMP%]{background:#234261}.mat-mdc-card[_ngcontent-%COMP%]{margin:0!important;max-width:640px}.dropin-header[_ngcontent-%COMP%]{display:flex;margin-bottom:.5rem;align-items:center;justify-content:space-between}.mdc-list-item[_ngcontent-%COMP%]{padding:0!important;display:flex;align-items:baseline}.mdc-list-group__subheader[_ngcontent-%COMP%]{margin:0}.mat-mdc-list-base[_ngcontent-%COMP%]{padding:0}.mat-expansion-panel-header-description[_ngcontent-%COMP%]{align-items:right;flex:0 0 auto}.mat-expansion-panel-header-description[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{z-index:10!important}mat-expansion-panel[_ngcontent-%COMP%]{margin-top:8px}.mat-action-row[_ngcontent-%COMP%]{align-items:center}mat-checkbox[_ngcontent-%COMP%]{flex:1}.bolded[_ngcontent-%COMP%]{font-weight:500}a[_ngcontent-%COMP%]{text-decoration:none}"]});let t=e;return t})();var Ut=3600*1e3,At=(()=>{let e=class e{constructor(r){this.http=r,this.reservationsSignal=L([]),this.reservations=this.reservationsSignal.asReadonly()}fetchReservations(){this.http.get("/api/coworking/ambassador/xl").subscribe(r=>{this.reservationsSignal.set(r.map(M))})}checkIn(r){this.http.put("/api/coworking/ambassador/checkin",{id:r.id,state:"CHECKED_IN"}).subscribe(s=>{this.fetchReservations()})}checkOut(r){this.http.put(`/api/coworking/reservation/${r.id}`,{id:r.id,state:"CHECKED_OUT"}).subscribe(s=>{this.fetchReservations()})}cancel(r){this.http.put(`/api/coworking/reservation/${r.id}`,{id:r.id,state:"CANCELLED"}).subscribe({next:s=>{this.fetchReservations()},error:s=>{alert(s)}})}makeDropinReservation(r,s){let m=r[0].availability[0].start,j=new Date(m.getTime()+2*Ut),B={users:s,seats:r.map(rt=>({id:rt.id})),start:m,end:j};return this.http.post("/api/coworking/ambassador/reservation",B).pipe(U(M))}};e.\u0275fac=function(s){return new(s||e)(y(X))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Wt=3600*1e3,Mt=(()=>{let e=class e{constructor(r,s){this.http=r,this.profileSvc=s,this.statusSignal=L(St),this.status=this.statusSignal.asReadonly(),this.isCancelExpanded=new st(!1),this.findActiveReservationPredicate=m=>{let j=new Date,B=new Date(Date.now()+600*1e3),rt=["DRAFT","CONFIRMED","CHECKED_IN"];return m.start<=B&&m.end>j&&rt.includes(m.state)},this.profileSubscription=this.profileSvc.profile$.subscribe(m=>this.profile=m)}ngOnDestroy(){this.profileSubscription.unsubscribe()}pollStatus(){this.http.get("/api/coworking/status").pipe(U(wt)).subscribe(r=>this.statusSignal.set(r))}draftReservation(r){if(this.profile===void 0)throw new Error("Only allowed for logged in users.");let s=r[0].availability[0].start,m=new Date(s.getTime()+2*Wt),j={users:[this.profile],seats:r.map(B=>({id:B.id})),start:s,end:m};return this.http.post("/api/coworking/reservation",j).pipe(U(M))}toggleCancelExpansion(){this.isCancelExpanded.next(!this.isCancelExpanded.value)}};e.\u0275fac=function(s){return new(s||e)(y(X),y(gt))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function qt(t,e){if(t&1){let i=R();n(0,"coworking-dropin-availability-card",4),v("seatsSelected",function(s){b(i);let m=c(2);return g(m.onWalkinSeatSelection(s))}),a()}if(t&2){let i=c(2);C("seat_availability",i.status().seat_availability)}}function Qt(t,e){if(t&1&&u(0,qt,1,1,"coworking-dropin-availability-card",3),t&2){let i=c();h(i.status()?0:-1)}}function Zt(t,e){t&1&&(n(0,"th",17),o(1,"ID"),a())}function te(t,e){if(t&1&&(n(0,"td",18),o(1),a()),t&2){let i=e.$implicit;l(),x(i.id)}}function ee(t,e){t&1&&(n(0,"th",17),o(1,"Name"),a())}function ie(t,e){if(t&1&&(n(0,"td",18),o(1),a()),t&2){let i=e.$implicit;l(),O(" ",i.users[0].first_name," ",i.users[0].last_name," ")}}function ne(t,e){t&1&&(n(0,"th",17),o(1,"Start"),a())}function ae(t,e){if(t&1&&(n(0,"td",18),o(1),w(2,"date"),a()),t&2){let i=e.$implicit;l(),f(" ",E(2,1,i.start,"shortTime")," ")}}function oe(t,e){t&1&&(n(0,"th",17),o(1,"End"),a())}function re(t,e){if(t&1&&(n(0,"td",18),o(1),w(2,"date"),a()),t&2){let i=e.$implicit;l(),f(" ",E(2,1,i.end,"shortTime")," ")}}function se(t,e){t&1&&(n(0,"th",17),o(1,"Seat"),a())}function le(t,e){if(t&1&&(n(0,"td",18),o(1),a()),t&2){let i=e.$implicit;l(),f(" ",i.seats[0].title," ")}}function me(t,e){t&1&&(n(0,"th",17),o(1,"Actions"),a())}function de(t,e){if(t&1){let i=R();n(0,"td",18)(1,"button",19),v("click",function(){let s=b(i).$implicit,m=c(3);return g(m.ambassadorService.checkIn(s))}),o(2," Check-in "),a(),n(3,"button",20),v("click",function(){let s=b(i).$implicit,m=c(3);return g(m.ambassadorService.cancel(s))}),o(4," Cancel "),a()()}}function ce(t,e){t&1&&S(0,"tr",21)}function _e(t,e){t&1&&S(0,"tr",22)}function pe(t,e){if(t&1&&(n(0,"mat-pane",0)(1,"mat-card-header")(2,"mat-card-title"),o(3,"Upcoming Reservations"),a()(),n(4,"mat-card-content")(5,"div",5)(6,"table",6),_(7,7),d(8,Zt,2,0,"th",8)(9,te,2,1,"td",9),p(),_(10,10),d(11,ee,2,0,"th",8)(12,ie,2,2,"td",9),p(),_(13,11),d(14,ne,2,0,"th",8)(15,ae,3,4,"td",9),p(),_(16,12),d(17,oe,2,0,"th",8)(18,re,3,4,"td",9),p(),_(19,13),d(20,se,2,0,"th",8)(21,le,2,1,"td",9),p(),_(22,14),d(23,me,2,0,"th",8)(24,de,5,0,"td",9),p(),d(25,ce,1,0,"tr",15)(26,_e,1,0,"tr",16),a()()()()),t&2){let i=c(2);l(6),C("dataSource",i.upcomingReservations()),l(19),C("matHeaderRowDef",i.columnsToDisplay),l(),C("matRowDefColumns",i.columnsToDisplay)}}function Ce(t,e){t&1&&(n(0,"mat-pane",0)(1,"mat-card-header")(2,"mat-card-title"),o(3,"Upcoming Reservations"),a()(),n(4,"mat-card-content")(5,"p"),o(6,"No upcoming reservations."),a()()())}function fe(t,e){if(t&1&&u(0,pe,27,3,"mat-pane",0)(1,Ce,7,0,"mat-pane",0),t&2){let i=c();h(i.upcomingReservations().length>0?0:1)}}function ue(t,e){t&1&&(n(0,"th",17),o(1,"ID"),a())}function he(t,e){if(t&1&&(n(0,"td",18),o(1),a()),t&2){let i=e.$implicit;l(),x(i.id)}}function ve(t,e){t&1&&(n(0,"th",17),o(1,"Name"),a())}function xe(t,e){if(t&1&&(n(0,"td",18),o(1),a()),t&2){let i=e.$implicit;l(),O(" ",i.users[0].first_name," ",i.users[0].last_name," ")}}function be(t,e){t&1&&(n(0,"th",17),o(1,"Start"),a())}function ge(t,e){if(t&1&&(n(0,"td",18),o(1),w(2,"date"),a()),t&2){let i=e.$implicit;l(),f(" ",E(2,1,i.start,"shortTime")," ")}}function Se(t,e){t&1&&(n(0,"th",17),o(1,"End"),a())}function we(t,e){if(t&1&&(n(0,"td",18),o(1),w(2,"date"),a()),t&2){let i=e.$implicit;l(),f(" ",E(2,1,i.end,"shortTime")," ")}}function Ee(t,e){t&1&&(n(0,"th",17),o(1,"Seat"),a())}function Re(t,e){if(t&1&&(n(0,"td",18),o(1),a()),t&2){let i=e.$implicit;l(),f(" ",i.seats[0].title," ")}}function Te(t,e){t&1&&(n(0,"th",17),o(1,"Actions"),a())}function De(t,e){if(t&1){let i=R();n(0,"td",18)(1,"button",20),v("click",function(){let s=b(i).$implicit,m=c(3);return g(m.ambassadorService.checkOut(s))}),o(2," Check-out"),a(),o(3,"\xA0 "),a()}}function ke(t,e){t&1&&S(0,"tr",21)}function ye(t,e){t&1&&S(0,"tr",22)}function Ae(t,e){if(t&1&&(n(0,"mat-pane",0)(1,"mat-card-header")(2,"mat-card-title"),o(3,"Active Reservations"),a()(),n(4,"mat-card-content")(5,"div",5)(6,"table",6),_(7,7),d(8,ue,2,0,"th",8)(9,he,2,1,"td",9),p(),_(10,10),d(11,ve,2,0,"th",8)(12,xe,2,2,"td",9),p(),_(13,11),d(14,be,2,0,"th",8)(15,ge,3,4,"td",9),p(),_(16,12),d(17,Se,2,0,"th",8)(18,we,3,4,"td",9),p(),_(19,13),d(20,Ee,2,0,"th",8)(21,Re,2,1,"td",9),p(),_(22,14),d(23,Te,2,0,"th",8)(24,De,4,0,"td",9),p(),d(25,ke,1,0,"tr",15)(26,ye,1,0,"tr",16),a()()()()),t&2){let i=c(2);l(6),C("dataSource",i.activeReservations()),l(19),C("matHeaderRowDef",i.columnsToDisplay),l(),C("matRowDefColumns",i.columnsToDisplay)}}function Me(t,e){t&1&&(n(0,"mat-pane",0)(1,"mat-card-header")(2,"mat-card-title"),o(3,"Active Reservations"),a()(),n(4,"mat-card-content")(5,"p"),o(6,"It's lonely in here."),a()()())}function Ie(t,e){if(t&1&&u(0,Ae,27,3,"mat-pane",0)(1,Me,7,0,"mat-pane",0),t&2){let i=c();h(i.activeReservations().length>0?0:1)}}var Le=5*1e3,D=class D{constructor(e,i){this.ambassadorService=e,this.coworkingService=i,this.upcomingReservations=$(()=>this.ambassadorService.reservations().filter(r=>r.state=="CONFIRMED")),this.activeReservations=$(()=>this.ambassadorService.reservations().filter(r=>r.state=="CHECKED_IN")),this.welcomeDeskReservationSelection=[],this.columnsToDisplay=["id","name","seat","start","end","actions"],this.status=i.status}beginReservationRefresh(){this.refreshSubscription&&this.refreshSubscription.unsubscribe(),this.refreshSubscription=W(0,Le).subscribe(e=>{this.ambassadorService.fetchReservations()})}ngOnInit(){this.beginReservationRefresh()}ngOnDestroy(){this.refreshSubscription.unsubscribe()}onUsersChanged(e){e.length>0&&this.coworkingService.pollStatus()}onWalkinSeatSelection(e){e.length>0&&this.welcomeDeskReservationSelection.length>0&&this.ambassadorService.makeDropinReservation(e,this.welcomeDeskReservationSelection).subscribe({next:i=>{this.welcomeDeskReservationSelection=[],this.beginReservationRefresh(),alert(`Walk-in reservation made for ${i.users[0].first_name} ${i.users[0].last_name}!
Reservation ends at ${i.end.toLocaleTimeString()}`)},error:i=>{this.welcomeDeskReservationSelection=[],alert(i.message+`

`+i.error.message)}})}};D.Route={path:"xl",component:D,title:"XL Reservations",canActivate:[ot("coworking.reservation.*","*")],resolve:{}},D.\u0275fac=function(i){return new(i||D)(A(At),A(Mt))},D.\u0275cmp=T({type:D,selectors:[["app-ambassador-xl"]],standalone:!1,decls:15,vars:5,consts:[["appearance","outlined",1,"content"],[1,"walkinReservation"],["label","Member Lookup",3,"usersChanged","maxSelected","users"],[3,"seat_availability"],[3,"seatsSelected","seat_availability"],[1,"table-responsive"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","start"],["matColumnDef","end"],["matColumnDef","seat"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-flat-button","",3,"click"],["mat-flat-button","",1,"tertiary-button",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,r){i&1&&(n(0,"div")(1,"mat-pane",0)(2,"mat-card-header")(3,"mat-card-title"),o(4,"Reserve a Drop-in at the Welcome Desk"),a()(),n(5,"mat-card-content",1)(6,"p"),o(7," Create a walk-in reservation for an XL community member at the welcome desk. "),a(),n(8,"p")(9,"em"),o(10," Members must be registered with the XL and accept the Community Agreement. "),a()(),n(11,"user-lookup",2),v("usersChanged",function(m){return r.onUsersChanged(m)}),a(),u(12,Qt,1,1),a()()(),u(13,fe,2,1),u(14,Ie,2,1)),i&2&&(l(11),C("maxSelected",1)("users",r.welcomeDeskReservationSelection),l(),h(r.welcomeDeskReservationSelection.length>0?12:-1),l(),h(r.upcomingReservations()?13:-1),l(),h(r.activeReservations()?14:-1))},dependencies:[P,H,N,J,z,q,et,Q,Y,it,Z,tt,nt,at,Et,V,kt,G],styles:[".mat-mdc-card-outlined{max-width:100%!important;margin-right:32px!important}.mat-mdc-card-header[_ngcontent-%COMP%]{margin-bottom:16px}.walkinReservation.mat-mdc-card-content[_ngcontent-%COMP%]:last-child{padding-bottom:0}button[_ngcontent-%COMP%]{margin-right:1vw}"]});var It=D;var Fi=(()=>{let e=class e{constructor(r){this.router=r,this.links=[{label:"XL Reservations",path:"/coworking/ambassador/xl",icon:"chair_alt"},{label:"Room Reservations",path:"/coworking/ambassador/room",icon:"meeting_room"}]}ngOnInit(){this.router.navigate(["/coworking/ambassador/xl"])}};e.\u0275fac=function(s){return new(s||e)(A(Ct))},e.\u0275cmp=T({type:e,selectors:[["app-coworking-ambassador-home"]],standalone:!1,decls:1,vars:1,consts:[[3,"links"]],template:function(s,m){s&1&&S(0,"tab-container",0),s&2&&C("links",m.links)},dependencies:[Rt],encapsulation:2});let t=e;return t})();var Lt=(()=>{let e=class e{constructor(r){this.http=r,this.reservationsSignal=L([]),this.reservations=this.reservationsSignal.asReadonly()}fetchReservations(){this.http.get("/api/coworking/ambassador/rooms").subscribe(r=>{this.reservationsSignal.set(r.map(M))})}isCheckInDisabled(r){let s=new Date;return new Date(r.start)>s}checkIn(r){this.http.put("/api/coworking/ambassador/checkin",{id:r.id,state:"CHECKED_IN"}).subscribe(s=>{this.fetchReservations()})}checkOut(r){this.http.put(`/api/coworking/reservation/${r.id}`,{id:r.id,state:"CHECKED_OUT"}).subscribe(s=>{this.fetchReservations()})}cancel(r){this.http.put(`/api/coworking/reservation/${r.id}`,{id:r.id,state:"CANCELLED"}).subscribe({next:s=>{this.fetchReservations()},error:s=>{alert(s)}})}};e.\u0275fac=function(s){return new(s||e)(y(X))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function $e(t,e){t&1&&(n(0,"th",14),o(1,"ID"),a())}function Xe(t,e){if(t&1&&(n(0,"td",15),o(1),a()),t&2){let i=e.$implicit;l(),x(i.id)}}function Ne(t,e){t&1&&(n(0,"th",14),o(1,"Name"),a())}function Pe(t,e){if(t&1&&(n(0,"td",15),o(1),a()),t&2){let i=e.$implicit;l(),O(" ",i.users[0].first_name," ",i.users[0].last_name," ")}}function He(t,e){t&1&&(n(0,"th",14),o(1,"Date"),a())}function Ve(t,e){if(t&1&&(n(0,"td",15),o(1),w(2,"date"),a()),t&2){let i=e.$implicit;l(),f(" ",E(2,1,i.start,"dd MMM yyyy")," ")}}function Fe(t,e){t&1&&(n(0,"th",14),o(1,"Start"),a())}function je(t,e){if(t&1&&(n(0,"td",15),o(1),w(2,"date"),a()),t&2){let i=e.$implicit;l(),f(" ",E(2,1,i.start,"shortTime")," ")}}function Be(t,e){t&1&&(n(0,"th",14),o(1,"End"),a())}function Ue(t,e){if(t&1&&(n(0,"td",15),o(1),w(2,"date"),a()),t&2){let i=e.$implicit;l(),f(" ",E(2,1,i.end,"shortTime")," ")}}function Ke(t,e){t&1&&(n(0,"th",14),o(1,"Room"),a())}function We(t,e){if(t&1&&(n(0,"td",15),o(1),a()),t&2){let i=e.$implicit;l(),f(" ",i.room.id," ")}}function Ge(t,e){t&1&&(n(0,"th",14),o(1,"Actions"),a())}function Je(t,e){if(t&1){let i=R();n(0,"td",15)(1,"button",16),v("click",function(){let s=b(i).$implicit,m=c(3);return g(m.ambassadorService.checkIn(s))}),o(2," Check-in "),a(),n(3,"button",17),v("click",function(){let s=b(i).$implicit,m=c(3);return g(m.ambassadorService.cancel(s))}),o(4," Cancel "),a()()}if(t&2){let i=e.$implicit,r=c(3);l(),C("disabled",r.ambassadorService.isCheckInDisabled(i))}}function ze(t,e){t&1&&S(0,"tr",18)}function Ye(t,e){t&1&&S(0,"tr",19)}function qe(t,e){if(t&1&&(n(0,"mat-pane",0)(1,"mat-card-header")(2,"mat-card-title"),o(3,"Upcoming Reservations"),a()(),n(4,"mat-card-content")(5,"div",1)(6,"table",2),_(7,3),d(8,$e,2,0,"th",4)(9,Xe,2,1,"td",5),p(),_(10,6),d(11,Ne,2,0,"th",4)(12,Pe,2,2,"td",5),p(),_(13,7),d(14,He,2,0,"th",4)(15,Ve,3,4,"td",5),p(),_(16,8),d(17,Fe,2,0,"th",4)(18,je,3,4,"td",5),p(),_(19,9),d(20,Be,2,0,"th",4)(21,Ue,3,4,"td",5),p(),_(22,10),d(23,Ke,2,0,"th",4)(24,We,2,1,"td",5),p(),_(25,11),d(26,Ge,2,0,"th",4)(27,Je,5,1,"td",5),p(),d(28,ze,1,0,"tr",12)(29,Ye,1,0,"tr",13),a()()()()),t&2){let i=c(2);l(6),C("dataSource",i.upcomingReservations()),l(22),C("matHeaderRowDef",i.columnsToDisplay),l(),C("matRowDefColumns",i.columnsToDisplay)}}function Qe(t,e){t&1&&(n(0,"mat-pane",0)(1,"mat-card-header")(2,"mat-card-title"),o(3,"Upcoming Reservations"),a()(),n(4,"mat-card-content")(5,"p"),o(6,"No upcoming reservations."),a()()())}function Ze(t,e){if(t&1&&u(0,qe,30,3,"mat-pane",0)(1,Qe,7,0,"mat-pane",0),t&2){let i=c();h(i.upcomingReservations().length>0?0:1)}}function ti(t,e){t&1&&(n(0,"th",14),o(1,"ID"),a())}function ei(t,e){if(t&1&&(n(0,"td",15),o(1),a()),t&2){let i=e.$implicit;l(),x(i.id)}}function ii(t,e){t&1&&(n(0,"th",14),o(1,"Name"),a())}function ni(t,e){if(t&1&&(n(0,"td",15),o(1),a()),t&2){let i=e.$implicit;l(),O(" ",i.users[0].first_name," ",i.users[0].last_name," ")}}function ai(t,e){t&1&&(n(0,"th",14),o(1,"Date"),a())}function oi(t,e){if(t&1&&(n(0,"td",15),o(1),w(2,"date"),a()),t&2){let i=e.$implicit;l(),f(" ",E(2,1,i.start,"dd MMM yyyy")," ")}}function ri(t,e){t&1&&(n(0,"th",14),o(1,"Start"),a())}function si(t,e){if(t&1&&(n(0,"td",15),o(1),w(2,"date"),a()),t&2){let i=e.$implicit;l(),f(" ",E(2,1,i.start,"shortTime")," ")}}function li(t,e){t&1&&(n(0,"th",14),o(1,"End"),a())}function mi(t,e){if(t&1&&(n(0,"td",15),o(1),w(2,"date"),a()),t&2){let i=e.$implicit;l(),f(" ",E(2,1,i.end,"shortTime")," ")}}function di(t,e){t&1&&(n(0,"th",14),o(1,"Room"),a())}function ci(t,e){if(t&1&&(n(0,"td",15),o(1),a()),t&2){let i=e.$implicit;l(),f(" ",i.room.id," ")}}function _i(t,e){t&1&&(n(0,"th",14),o(1,"Actions"),a())}function pi(t,e){if(t&1){let i=R();n(0,"td",15)(1,"button",17),v("click",function(){let s=b(i).$implicit,m=c(3);return g(m.ambassadorService.checkOut(s))}),o(2," Check Out "),a()()}}function Ci(t,e){t&1&&S(0,"tr",18)}function fi(t,e){t&1&&S(0,"tr",19)}function ui(t,e){if(t&1&&(n(0,"mat-pane",0)(1,"mat-card-header")(2,"mat-card-title"),o(3,"Active Reservations"),a()(),n(4,"mat-card-content")(5,"div",1)(6,"table",2),_(7,3),d(8,ti,2,0,"th",4)(9,ei,2,1,"td",5),p(),_(10,6),d(11,ii,2,0,"th",4)(12,ni,2,2,"td",5),p(),_(13,7),d(14,ai,2,0,"th",4)(15,oi,3,4,"td",5),p(),_(16,8),d(17,ri,2,0,"th",4)(18,si,3,4,"td",5),p(),_(19,9),d(20,li,2,0,"th",4)(21,mi,3,4,"td",5),p(),_(22,10),d(23,di,2,0,"th",4)(24,ci,2,1,"td",5),p(),_(25,11),d(26,_i,2,0,"th",4)(27,pi,3,0,"td",5),p(),d(28,Ci,1,0,"tr",12)(29,fi,1,0,"tr",13),a()()()()),t&2){let i=c(2);l(6),C("dataSource",i.activeReservations()),l(22),C("matHeaderRowDef",i.columnsToDisplay),l(),C("matRowDefColumns",i.columnsToDisplay)}}function hi(t,e){t&1&&(n(0,"mat-pane",0)(1,"mat-card-header")(2,"mat-card-title"),o(3,"Active Reservations"),a()(),n(4,"mat-card-content")(5,"p"),o(6,"It's lonely in here."),a()()())}function vi(t,e){if(t&1&&u(0,ui,30,3,"mat-pane",0)(1,hi,7,0,"mat-pane",0),t&2){let i=c();h(i.activeReservations().length>0?0:1)}}var k=class k{constructor(e){this.ambassadorService=e,this.upcomingReservations=$(()=>this.ambassadorService.reservations().filter(i=>i.state=="CONFIRMED")),this.activeReservations=$(()=>this.ambassadorService.reservations().filter(i=>i.state=="CHECKED_IN")),this.columnsToDisplay=["id","name","room","date","start","end","actions"]}ngOnInit(){this.refreshSubscription=W(0,5e3).pipe(lt(e=>this.ambassadorService.fetchReservations())).subscribe()}ngOnDestroy(){this.refreshSubscription.unsubscribe()}};k.Route={path:"room",component:k,title:"Room Reservations",canActivate:[ot("coworking.reservation.*","*")],resolve:{}},k.\u0275fac=function(i){return new(i||k)(A(Lt))},k.\u0275cmp=T({type:k,selectors:[["app-ambassador-room"]],standalone:!1,decls:2,vars:2,consts:[["appearance","outlined",1,"content"],[1,"table-responsive"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","date"],["matColumnDef","start"],["matColumnDef","end"],["matColumnDef","room"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-flat-button","",3,"click","disabled"],["mat-flat-button","",1,"tertiary-button",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,r){i&1&&(u(0,Ze,2,1),u(1,vi,2,1)),i&2&&(h(r.upcomingReservations()?0:-1),l(),h(r.activeReservations()?1:-1))},dependencies:[P,H,N,J,z,q,et,Q,Y,it,Z,tt,nt,at,V,G],styles:[".mat-mdc-card-outlined{max-width:100%!important;margin-right:32px!important}.mat-mdc-card-header[_ngcontent-%COMP%]{margin-bottom:16px}.walkinReservation.mat-mdc-card-content[_ngcontent-%COMP%]:last-child{padding-bottom:0}button[_ngcontent-%COMP%]{margin-right:1vw}"]});var Ot=k;export{Mt as a,kt as b,It as c,Fi as d,Ot as e};
